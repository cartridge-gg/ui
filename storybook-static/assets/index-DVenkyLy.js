var Jh=Object.defineProperty;var Qh=(e,t,n)=>t in e?Jh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var w=(e,t,n)=>Qh(e,typeof t!="symbol"?t+"":t,n);const nu=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Ta="ACCEPTED_ON_L2",Sa="ACCEPTED_ON_L1",fs="SUCCEEDED",hs="REVERTED",ru="PENDING",gs="REJECTED",_s="RECEIVED",ps="DECLARE",ys="DEPLOY",bs="DEPLOY_ACCOUNT",ms="INVOKE",ws="L1_HANDLER",iu="struct",au="event",ou="function",su="constructor",cu="l1_handler",lu="enum",uu="view",du="external",fu="WEI",hu="FRI",gu={BLOB:"BLOB",CALLDATA:"CALLDATA"},_u={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},Lt={DECLARE:ps,DEPLOY:ys,DEPLOY_ACCOUNT:bs,INVOKE:ms,L1_HANDLER:ws},Hr={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},Fr={RECEIVED:_s,REJECTED:gs,ACCEPTED_ON_L2:Ta,ACCEPTED_ON_L1:Sa},pu={ACCEPTED_ON_L2:Ta,ACCEPTED_ON_L1:Sa},yu={SUCCEEDED:fs,REVERTED:hs},bu={LATEST:"latest",PENDING:"pending"},mu={L1:"L1",L2:"L2"},wu={L1:0,L2:1},Le={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},Eu={V0:Le.V0,V1:Le.V1,V2:Le.V2,F0:Le.F0,F1:Le.F1,F2:Le.F2},Au={V3:Le.V3,F3:Le.F3},e0=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:su,ABI_TYPE_ENUM:lu,ABI_TYPE_FUNCTION:ou,ABI_TYPE_L1_HANDLER:cu,CALL_TYPE:_u,CONTRACT:nu,EBlockTag:bu,EDAMode:wu,EDataAvailabilityMode:mu,ESimulationFlag:Hr,ETransactionExecutionStatus:yu,ETransactionFinalityStatus:pu,ETransactionStatus:Fr,ETransactionType:Lt,ETransactionVersion:Le,ETransactionVersion2:Eu,ETransactionVersion3:Au,EVENT_ABI_TYPE:au,L1_DA_MODE:gu,PRICE_UNIT_FRI:hu,PRICE_UNIT_WEI:fu,STATE_MUTABILITY_EXTERNAL:du,STATE_MUTABILITY_VIEW:uu,STATUS_ACCEPTED_ON_L1:Sa,STATUS_ACCEPTED_ON_L2:Ta,STATUS_PENDING:ru,STATUS_RECEIVED:_s,STATUS_REJECTED:gs,STATUS_REVERTED:hs,STATUS_SUCCEEDED:fs,STRUCT_ABI_TYPE:iu,TXN_TYPE_DECLARE:ps,TXN_TYPE_DEPLOY:ys,TXN_TYPE_DEPLOY_ACCOUNT:bs,TXN_TYPE_INVOKE:ms,TXN_TYPE_L1_HANDLER:ws},Symbol.toStringTag,{value:"Module"})),Tu={ACCOUNTS:"accounts"},Su={ACTIVE:"1",LEGACY:"0"},t0=Object.freeze(Object.defineProperty({__proto__:null,Permission:Tu,TypedDataRevision:Su},Symbol.toStringTag,{value:"Module"})),vu=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Es=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:su,ABI_TYPE_ENUM:lu,ABI_TYPE_FUNCTION:ou,ABI_TYPE_L1_HANDLER:cu,API:e0,CALL_TYPE:_u,CONTRACT:nu,EBlockTag:bu,EDAMode:wu,EDataAvailabilityMode:mu,ESimulationFlag:Hr,ETransactionExecutionStatus:yu,ETransactionFinalityStatus:pu,ETransactionStatus:Fr,ETransactionType:Lt,ETransactionVersion:Le,ETransactionVersion2:Eu,ETransactionVersion3:Au,EVENT_ABI_TYPE:au,L1_DA_MODE:gu,PAYMASTER_API:vu,PRICE_UNIT_FRI:hu,PRICE_UNIT_WEI:fu,Permission:Tu,STATE_MUTABILITY_EXTERNAL:du,STATE_MUTABILITY_VIEW:uu,STATUS_ACCEPTED_ON_L1:Sa,STATUS_ACCEPTED_ON_L2:Ta,STATUS_PENDING:ru,STATUS_RECEIVED:_s,STATUS_REJECTED:gs,STATUS_REVERTED:hs,STATUS_SUCCEEDED:fs,STRUCT_ABI_TYPE:iu,TXN_TYPE_DECLARE:ps,TXN_TYPE_DEPLOY:ys,TXN_TYPE_DEPLOY_ACCOUNT:bs,TXN_TYPE_INVOKE:ms,TXN_TYPE_L1_HANDLER:ws,TypedDataRevision:Su,WALLET_API:t0},Symbol.toStringTag,{value:"Module"})),xu=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),_i="ACCEPTED_ON_L2",pi="ACCEPTED_ON_L1",As="SUCCEEDED",Ts="REVERTED",Ss="RECEIVED",vs="CANDIDATE",hr="PRE_CONFIRMED",xs=hr.toLowerCase(),Is="DECLARE",ks="DEPLOY",Cs="DEPLOY_ACCOUNT",Bs="INVOKE",Ns="L1_HANDLER",Iu="struct",ku="event",Cu="function",Bu="constructor",Nu="l1_handler",Ru="enum",Ou="view",Du="external",Lu="WEI",Pu="FRI",Uu={BLOB:"BLOB",CALLDATA:"CALLDATA"},$u={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},Rs={DECLARE:Is,DEPLOY:ks,DEPLOY_ACCOUNT:Cs,INVOKE:Bs,L1_HANDLER:Ns},zr={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},Qt={RECEIVED:Ss,CANDIDATE:vs,PRE_CONFIRMED:hr,ACCEPTED_ON_L2:_i,ACCEPTED_ON_L1:pi},fn={PRE_CONFIRMED:hr,ACCEPTED_ON_L2:_i,ACCEPTED_ON_L1:pi},Os={SUCCEEDED:As,REVERTED:Ts},Vu={LATEST:"latest",PRE_CONFIRMED:xs,L1_ACCEPTED:"l1_accepted"},Mu={PRE_CONFIRMED:hr,ACCEPTED_ON_L2:_i,ACCEPTED_ON_L1:pi},Hu={L1:"L1",L2:"L2"},Fu={L1:0,L2:1},Tt={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},zu={V0:Tt.V0,V1:Tt.V1,V2:Tt.V2,F0:Tt.F0,F1:Tt.F1,F2:Tt.F2},ju={V3:Tt.V3,F3:Tt.F3},n0=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:Bu,ABI_TYPE_ENUM:Ru,ABI_TYPE_FUNCTION:Cu,ABI_TYPE_L1_HANDLER:Nu,CALL_TYPE:$u,CONTRACT:xu,EBlockStatus:Mu,EBlockTag:Vu,EDAMode:Fu,EDataAvailabilityMode:Hu,ESimulationFlag:zr,ETransactionExecutionStatus:Os,ETransactionFinalityStatus:fn,ETransactionStatus:Qt,ETransactionType:Rs,ETransactionVersion:Tt,ETransactionVersion2:zu,ETransactionVersion3:ju,EVENT_ABI_TYPE:ku,L1_DA_MODE:Uu,PRICE_UNIT_FRI:Pu,PRICE_UNIT_WEI:Lu,STATE_MUTABILITY_EXTERNAL:Du,STATE_MUTABILITY_VIEW:Ou,STATUS_ACCEPTED_ON_L1:pi,STATUS_ACCEPTED_ON_L2:_i,STATUS_CANDIDATE:vs,STATUS_PRE_CONFIRMED:hr,STATUS_PRE_CONFIRMED_LOWERCASE:xs,STATUS_RECEIVED:Ss,STATUS_REVERTED:Ts,STATUS_SUCCEEDED:As,STRUCT_ABI_TYPE:Iu,TXN_TYPE_DECLARE:Is,TXN_TYPE_DEPLOY:ks,TXN_TYPE_DEPLOY_ACCOUNT:Cs,TXN_TYPE_INVOKE:Bs,TXN_TYPE_L1_HANDLER:Ns},Symbol.toStringTag,{value:"Module"})),qu={ACCOUNTS:"accounts"},Yu={ACTIVE:"1",LEGACY:"0"},r0=Object.freeze(Object.defineProperty({__proto__:null,Permission:qu,TypedDataRevision:Yu},Symbol.toStringTag,{value:"Module"})),i0=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),gr=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:Bu,ABI_TYPE_ENUM:Ru,ABI_TYPE_FUNCTION:Cu,ABI_TYPE_L1_HANDLER:Nu,API:n0,CALL_TYPE:$u,CONTRACT:xu,EBlockStatus:Mu,EBlockTag:Vu,EDAMode:Fu,EDataAvailabilityMode:Hu,ESimulationFlag:zr,ETransactionExecutionStatus:Os,ETransactionFinalityStatus:fn,ETransactionStatus:Qt,ETransactionType:Rs,ETransactionVersion:Tt,ETransactionVersion2:zu,ETransactionVersion3:ju,EVENT_ABI_TYPE:ku,L1_DA_MODE:Uu,PAYMASTER_API:i0,PRICE_UNIT_FRI:Pu,PRICE_UNIT_WEI:Lu,Permission:qu,STATE_MUTABILITY_EXTERNAL:Du,STATE_MUTABILITY_VIEW:Ou,STATUS_ACCEPTED_ON_L1:pi,STATUS_ACCEPTED_ON_L2:_i,STATUS_CANDIDATE:vs,STATUS_PRE_CONFIRMED:hr,STATUS_PRE_CONFIRMED_LOWERCASE:xs,STATUS_RECEIVED:Ss,STATUS_REVERTED:Ts,STATUS_SUCCEEDED:As,STRUCT_ABI_TYPE:Iu,TXN_TYPE_DECLARE:Is,TXN_TYPE_DEPLOY:ks,TXN_TYPE_DEPLOY_ACCOUNT:Cs,TXN_TYPE_INVOKE:Bs,TXN_TYPE_L1_HANDLER:Ns,TypedDataRevision:Yu,WALLET_API:r0},Symbol.toStringTag,{value:"Module"}));/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Zu(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function a0(e,...t){if(!Zu(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ku(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function Gr(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function Ds(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function Ro(e){if(!Array.isArray(e))throw new Error("array expected")}function na(e,t){if(!Ku(!0,t))throw new Error(`${e}: array of strings expected`)}function o0(e,t){if(!Ku(!1,t))throw new Error(`${e}: array of numbers expected`)}function s0(...e){const t=a=>a,n=(a,o)=>s=>a(o(s)),r=e.map(a=>a.encode).reduceRight(n,t),i=e.map(a=>a.decode).reduce(n,t);return{encode:r,decode:i}}function c0(e){const t=typeof e=="string"?e.split(""):e,n=t.length;na("alphabet",t);const r=new Map(t.map((i,a)=>[i,a]));return{encode:i=>(Ro(i),i.map(a=>{if(!Number.isSafeInteger(a)||a<0||a>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${a}". Allowed: ${e}`);return t[a]})),decode:i=>(Ro(i),i.map(a=>{Gr("alphabet.decode",a);const o=r.get(a);if(o===void 0)throw new Error(`Unknown letter: "${a}". Allowed: ${e}`);return o}))}}function l0(e=""){return Gr("join",e),{encode:t=>(na("join.decode",t),t.join(e)),decode:t=>(Gr("join.decode",t),t.split(e))}}function u0(e,t="="){return Ds(e),Gr("padding",t),{encode(n){for(na("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){na("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const Gu=(e,t)=>t===0?e:Gu(t,e%t),ra=(e,t)=>e+(t-Gu(e,t)),eo=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function xc(e,t,n,r){if(Ro(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(ra(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${ra(t,n)}`);let i=0,a=0;const o=eo[t],s=eo[n]-1,l=[];for(const c of e){if(Ds(c),c>=o)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)l.push((i>>a-n&s)>>>0);const u=eo[a];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<n-a&s,!r&&a>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&a>0&&l.push(i>>>0),l}function d0(e,t=!1){if(Ds(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(ra(8,e)>32||ra(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!Zu(n))throw new Error("radix2.encode input should be Uint8Array");return xc(Array.from(n),8,e,!t)},decode:n=>(o0("radix2.decode",n),Uint8Array.from(xc(n,e,8,t)))}}const f0=typeof Uint8Array.from([]).toBase64=="function"&&typeof Uint8Array.fromBase64=="function",Wu=f0?{encode(e){return a0(e),e.toBase64()},decode(e){return Gr("base64",e),Uint8Array.fromBase64(e,{lastChunkHandling:"strict"})}}:s0(d0(6),c0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),u0(6),l0(""));function yi(e){return h0.test(e)}const h0=/^-?[0-9]+$/;function Xu(e){return g0.test(e)}const g0=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function _0(e,t){if(yi(e))return Number.isSafeInteger(Number.parseInt(e,10));const n=Number.parseFloat(e),r=String(n);if(e===r)return!0;const i=Ic(e),a=Ic(r);return i===a}let vr=function(e){return e.underflow="underflow",e.overflow="overflow",e.truncate_integer="truncate_integer",e.truncate_float="truncate_float",e}({});function p0(e){if(_0(e))return;if(yi(e))return vr.truncate_integer;const t=Number.parseFloat(e);return Number.isFinite(t)?t===0?vr.underflow:vr.truncate_float:vr.overflow}function Ic(e){const{start:t,end:n}=y0(e),r=e.substring(t,n),i=r.indexOf(".");return i===-1?r:r.substring(0,i)+r.substring(i+1)}function y0(e){let t=0;for(e[0]==="-"&&t++;e[t]==="0"||e[t]===".";)t++;let n=e.lastIndexOf("e");for(n===-1&&(n=e.lastIndexOf("E")),n===-1&&(n=e.length);(e[n-1]==="0"||e[n-1]===".")&&n>t;)n--;return{start:t,end:n}}class b0{constructor(t){w(this,"isLosslessNumber",!0);if(!Xu(t))throw new Error(`Invalid number (value: "${t}")`);this.value=t}valueOf(){const t=p0(this.value);if(t===void 0||t===vr.truncate_float)return Number.parseFloat(this.value);if(yi(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${t} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function m0(e){return e&&typeof e=="object"&&e.isLosslessNumber||!1}function w0(e){return new b0(e)}function E0(e){return yi(e)?BigInt(e):Number.parseFloat(e)}function A0(e,t){return Ls({"":e},"",e,t)}function Ls(e,t,n,r){return Array.isArray(n)?r.call(e,t,S0(n,r)):n&&typeof n=="object"&&!m0(n)?r.call(e,t,T0(n,r)):r.call(e,t,n)}function T0(e,t){for(const n of Object.keys(e)){const r=Ls(e,n,e[n],t);r!==void 0?e[n]=r:delete e[n]}return e}function S0(e,t){for(let n=0;n<e.length;n++)e[n]=Ls(e,String(n),e[n],t);return e}function Ju(e,t,n){const r=typeof n=="function"?{parseNumber:n}:n,i=(r==null?void 0:r.parseNumber)??w0,a=(r==null?void 0:r.onDuplicateKey)??T;let o=0;const s=u();return p(s),E(),t?A0(s,t):s;function l(){if(e.charCodeAt(o)===B0){o++,d();const x={};let P=!0;for(;o<e.length&&e.charCodeAt(o)!==Cc;){P?P=!1:(y(),d());const q=o,J=f();if(J===void 0){N();return}d(),g();const ne=u();if(ne===void 0){$();return}if(Object.prototype.hasOwnProperty.call(x,J)&&!Oo(ne,x[J])){const ze=a({key:J,position:q+1,oldValue:x[J],newValue:ne});ze!==void 0&&(x[J]=ze)}else x[J]=ne}return e.charCodeAt(o)!==Cc&&k(),o++,x}}function c(){if(e.charCodeAt(o)===N0){o++,d();const x=[];let P=!0;for(;o<e.length&&e.charCodeAt(o)!==Bc;){P?P=!1:y();const q=u();A(q),x.push(q)}return e.charCodeAt(o)!==Bc&&v(),o++,x}}function u(){d();const x=f()??_()??l()??c()??h("true",!0)??h("false",!1)??h("null",null);return d(),x}function h(x,P){if(e.slice(o,o+x.length)===x)return o+=x.length,P}function d(){for(;v0(e.charCodeAt(o));)o++}function f(){if(e.charCodeAt(o)===to){o++;let x="";for(;o<e.length&&e.charCodeAt(o)!==to;){if(e.charCodeAt(o)===C0){const P=e[o+1],q=k0[P];q!==void 0?(x+=q,o++):P==="u"?Oi(e.charCodeAt(o+2))&&Oi(e.charCodeAt(o+3))&&Oi(e.charCodeAt(o+4))&&Oi(e.charCodeAt(o+5))?(x+=String.fromCharCode(Number.parseInt(e.slice(o+2,o+6),16)),o+=5):Q(o):O(o)}else I0(e.charCodeAt(o))?x+=e[o]:R(e[o]);o++}return C(),o++,x}}function _(){const x=o;if(e.charCodeAt(o)===Nc&&(o++,b(x)),e.charCodeAt(o)===Ps)o++;else if(x0(e.charCodeAt(o)))for(o++;Di(e.charCodeAt(o));)o++;if(e.charCodeAt(o)===V0)for(o++,b(x);Di(e.charCodeAt(o));)o++;if(e.charCodeAt(o)===j0||e.charCodeAt(o)===z0)for(o++,(e.charCodeAt(o)===Nc||e.charCodeAt(o)===P0)&&o++,b(x);Di(e.charCodeAt(o));)o++;if(o>x)return i(e.slice(x,o))}function y(){if(e.charCodeAt(o)!==$0)throw new SyntaxError(`Comma ',' expected after value ${B()}`);o++}function g(){if(e.charCodeAt(o)!==M0)throw new SyntaxError(`Colon ':' expected after property name ${B()}`);o++}function p(x){if(x===void 0)throw new SyntaxError(`JSON value expected ${B()}`)}function A(x){if(x===void 0)throw new SyntaxError(`Array item expected ${B()}`)}function E(){if(o<e.length)throw new SyntaxError(`Expected end of input ${B()}`)}function b(x){if(!Di(e.charCodeAt(o))){const P=e.slice(x,o);throw new SyntaxError(`Invalid number '${P}', expecting a digit ${B()}`)}}function C(){if(e.charCodeAt(o)!==to)throw new SyntaxError(`End of string '"' expected ${B()}`)}function N(){throw new SyntaxError(`Quoted object key expected ${B()}`)}function T(x){let{key:P,position:q}=x;throw new SyntaxError(`Duplicate key '${P}' encountered at position ${q}`)}function k(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${B()}`)}function v(){throw new SyntaxError(`Array item or end of array ']' expected ${B()}`)}function R(x){throw new SyntaxError(`Invalid character '${x}' ${I()}`)}function O(x){const P=e.slice(x,x+2);throw new SyntaxError(`Invalid escape character '${P}' ${I()}`)}function $(){throw new SyntaxError(`Object value expected after ':' ${I()}`)}function Q(x){const P=e.slice(x,x+6);throw new SyntaxError(`Invalid unicode character '${P}' ${I()}`)}function I(){return`at position ${o}`}function D(){return o<e.length?`but got '${e[o]}'`:"but reached end of input"}function B(){return`${D()} ${I()}`}}function v0(e){return e===R0||e===O0||e===D0||e===L0}function Oi(e){return e>=Ps&&e<=Us||e>=H0&&e<=q0||e>=F0&&e<=Y0}function Di(e){return e>=Ps&&e<=Us}function x0(e){return e>=U0&&e<=Us}function I0(e){return e>=32&&e<=1114111}function Oo(e,t){return e===t?!0:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((n,r)=>Oo(n,t[r])):kc(e)&&kc(t)?[...new Set([...Object.keys(e),...Object.keys(t)])].every(r=>Oo(e[r],t[r])):!1}function kc(e){return typeof e=="object"&&e!==null}const k0={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},C0=92,B0=123,Cc=125,N0=91,Bc=93,R0=32,O0=10,D0=9,L0=13,to=34,P0=43,Nc=45,Ps=48,U0=49,Us=57,$0=44,V0=46,M0=58,H0=65,F0=97,z0=69,j0=101,q0=70,Y0=102;function Qu(e,t,n,r){const i=Z0(n),a=typeof t=="function"?t.call({"":e},"",e):e;return o(a,"");function o(u,h){if(Array.isArray(r)){const d=r.find(f=>f.test(u));if(d){const f=d.stringify(u);if(typeof f!="string"||!Xu(f))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${f})`);return f}}if(typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u===null||u instanceof Date||u instanceof Boolean||u instanceof Number||u instanceof String)return JSON.stringify(u);if(u!=null&&u.isLosslessNumber||typeof u=="bigint")return u.toString();if(Array.isArray(u))return s(u,h);if(u&&typeof u=="object")return l(u,h)}function s(u,h){if(u.length===0)return"[]";const d=i?h+i:void 0;let f=i?`[
`:"[";for(let _=0;_<u.length;_++){const y=typeof t=="function"?t.call(u,String(_),u[_]):u[_];i&&(f+=d),typeof y<"u"&&typeof y!="function"?f+=o(y,d):f+="null",_<u.length-1&&(f+=i?`,
`:",")}return f+=i?`
${h}]`:"]",f}function l(u,h){if(typeof u.toJSON=="function")return Qu(u.toJSON(),t,n,void 0);const d=Array.isArray(t)?t.map(String):Object.keys(u);if(d.length===0)return"{}";const f=i?h+i:void 0;let _=!0,y=i?`{
`:"{";for(const g of d){const p=typeof t=="function"?t.call(u,g,u[g]):u[g];if(c(g,p)){_?_=!1:y+=i?`,
`:",";const A=JSON.stringify(g);y+=i?`${f+A}: `:`${A}:`,y+=o(p,f)}}return y+=i?`
${h}}`:"}",y}function c(u,h){return typeof h<"u"&&typeof h!="function"&&typeof h!="symbol"}}function Z0(e){if(typeof e=="number")return" ".repeat(e);if(typeof e=="string"&&e!=="")return e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const va=BigInt(0),xa=BigInt(1),K0=BigInt(2);function xn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function bi(e){if(!xn(e))throw new Error("Uint8Array expected")}function tr(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const G0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ht(e){bi(e);let t="";for(let n=0;n<e.length;n++)t+=G0[e[n]];return t}function Kn(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Ia(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?va:BigInt("0x"+e)}const Ot={_0:48,_9:57,A:65,F:70,a:97,f:102};function Rc(e){if(e>=Ot._0&&e<=Ot._9)return e-Ot._0;if(e>=Ot.A&&e<=Ot.F)return e-(Ot.A-10);if(e>=Ot.a&&e<=Ot.f)return e-(Ot.a-10)}function Ft(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,a=0;i<n;i++,a+=2){const o=Rc(e.charCodeAt(a)),s=Rc(e.charCodeAt(a+1));if(o===void 0||s===void 0){const l=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+a)}r[i]=o*16+s}return r}function Se(e){return Ia(Ht(e))}function $s(e){return bi(e),Ia(Ht(Uint8Array.from(e).reverse()))}function nr(e,t){return Ft(e.toString(16).padStart(t*2,"0"))}function Vs(e,t){return nr(e,t).reverse()}function Ms(e){return Ft(Kn(e))}function qe(e,t,n){let r;if(typeof t=="string")try{r=Ft(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else if(xn(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function rr(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];bi(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const a=e[r];n.set(a,i),i+=a.length}return n}function W0(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function X0(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const no=e=>typeof e=="bigint"&&va<=e;function ka(e,t,n){return no(e)&&no(t)&&no(n)&&t<=e&&e<n}function wn(e,t,n,r){if(!ka(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function ed(e){let t;for(t=0;e>va;e>>=xa,t+=1);return t}function J0(e,t){return e>>BigInt(t)&xa}function Q0(e,t,n){return e|(n?xa:va)<<BigInt(t)}const Ca=e=>(K0<<BigInt(e-1))-xa,ro=e=>new Uint8Array(e),Oc=e=>Uint8Array.from(e);function td(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=ro(e),i=ro(e),a=0;const o=()=>{r.fill(1),i.fill(0),a=0},s=(...h)=>n(i,r,...h),l=(h=ro())=>{i=s(Oc([0]),h),r=s(),h.length!==0&&(i=s(Oc([1]),h),r=s())},c=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const d=[];for(;h<t;){r=s();const f=r.slice();d.push(f),h+=r.length}return rr(...d)};return(h,d)=>{o(),l(h);let f;for(;!(f=d(c()));)l();return o(),f}}const eg={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||xn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function mi(e,t,n={}){const r=(i,a,o)=>{const s=eg[a];if(typeof s!="function")throw new Error("invalid validator function");const l=e[i];if(!(o&&l===void 0)&&!s(l,e))throw new Error("param "+String(i)+" is invalid. Expected "+a+", got "+l)};for(const[i,a]of Object.entries(t))r(i,a,!1);for(const[i,a]of Object.entries(n))r(i,a,!0);return e}const tg=()=>{throw new Error("not implemented")};function Do(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const a=e(n,...r);return t.set(n,a),a}}const ng=Object.freeze(Object.defineProperty({__proto__:null,aInRange:wn,abool:tr,abytes:bi,bitGet:J0,bitLen:ed,bitMask:Ca,bitSet:Q0,bytesToHex:Ht,bytesToNumberBE:Se,bytesToNumberLE:$s,concatBytes:rr,createHmacDrbg:td,ensureBytes:qe,equalBytes:W0,hexToBytes:Ft,hexToNumber:Ia,inRange:ka,isBytes:xn,memoized:Do,notImplemented:tg,numberToBytesBE:nr,numberToBytesLE:Vs,numberToHexUnpadded:Kn,numberToVarBytesBE:Ms,utf8ToBytes:X0,validateObject:mi},Symbol.toStringTag,{value:"Module"}));function ia(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function rg(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function wi(e,...t){if(!rg(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ig(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ia(e.outputLen),ia(e.blockLen)}function ir(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function nd(e,t){wi(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const zn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ag=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),io=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),mt=(e,t)=>e<<32-t|e>>>t,Dc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,og=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function Lc(e){for(let t=0;t<e.length;t++)e[t]=og(e[t])}function rd(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Ba(e){return typeof e=="string"&&(e=rd(e)),wi(e),e}function sg(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];wi(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const a=e[r];n.set(a,i),i+=a.length}return n}class Hs{clone(){return this._cloneInto()}}function id(e){const t=r=>e().update(Ba(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function cg(e=32){if(zn&&typeof zn.getRandomValues=="function")return zn.getRandomValues(new Uint8Array(e));if(zn&&typeof zn.randomBytes=="function")return zn.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function lg(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),o=Number(n>>i&a),s=Number(n&a),l=r?4:0,c=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+c,s,r)}const ug=(e,t,n)=>e&t^~e&n,dg=(e,t,n)=>e&t^e&n^t&n;class fg extends Hs{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=io(this.buffer)}update(t){ir(this);const{view:n,buffer:r,blockLen:i}=this;t=Ba(t);const a=t.length;for(let o=0;o<a;){const s=Math.min(i-this.pos,a-o);if(s===i){const l=io(t);for(;i<=a-o;o+=i)this.process(l,o);continue}r.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ir(this),nd(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:a}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;lg(r,i-8,BigInt(this.length*8),a),this.process(r,0);const s=io(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)s.setUint32(4*h,u[h],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:a,destroyed:o,pos:s}=this;return t.length=i,t.pos=s,t.finished=a,t.destroyed=o,i%n&&t.buffer.set(r),t}}const hg=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yt=new Uint32Array(64);class gg extends fg{constructor(){super(64,32,8,!1),this.A=qt[0]|0,this.B=qt[1]|0,this.C=qt[2]|0,this.D=qt[3]|0,this.E=qt[4]|0,this.F=qt[5]|0,this.G=qt[6]|0,this.H=qt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:a,F:o,G:s,H:l}=this;return[t,n,r,i,a,o,s,l]}set(t,n,r,i,a,o,s,l){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=a|0,this.F=o|0,this.G=s|0,this.H=l|0}process(t,n){for(let h=0;h<16;h++,n+=4)Yt[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){const d=Yt[h-15],f=Yt[h-2],_=mt(d,7)^mt(d,18)^d>>>3,y=mt(f,17)^mt(f,19)^f>>>10;Yt[h]=y+Yt[h-7]+_+Yt[h-16]|0}let{A:r,B:i,C:a,D:o,E:s,F:l,G:c,H:u}=this;for(let h=0;h<64;h++){const d=mt(s,6)^mt(s,11)^mt(s,25),f=u+d+ug(s,l,c)+hg[h]+Yt[h]|0,y=(mt(r,2)^mt(r,13)^mt(r,22))+dg(r,i,a)|0;u=c,c=l,l=s,s=o+f|0,o=a,a=i,i=r,r=f+y|0}r=r+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,s=s+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,a,o,s,l,c,u)}roundClean(){Yt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ei=id(()=>new gg),Li=BigInt(2**32-1),Pc=BigInt(32);function _g(e,t=!1){return t?{h:Number(e&Li),l:Number(e>>Pc&Li)}:{h:Number(e>>Pc&Li)|0,l:Number(e&Li)|0}}function pg(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:o}=_g(e[i],t);[n[i],r[i]]=[a,o]}return[n,r]}const yg=(e,t,n)=>e<<n|t>>>32-n,bg=(e,t,n)=>t<<n|e>>>32-n,mg=(e,t,n)=>t<<n-32|e>>>64-n,wg=(e,t,n)=>e<<n-32|t>>>64-n,ad=[],od=[],sd=[],Eg=BigInt(0),Tr=BigInt(1),Ag=BigInt(2),Tg=BigInt(7),Sg=BigInt(256),vg=BigInt(113);for(let e=0,t=Tr,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],ad.push(2*(5*r+n)),od.push((e+1)*(e+2)/2%64);let i=Eg;for(let a=0;a<7;a++)t=(t<<Tr^(t>>Tg)*vg)%Sg,t&Ag&&(i^=Tr<<(Tr<<BigInt(a))-Tr);sd.push(i)}const[xg,Ig]=pg(sd,!0),Uc=(e,t,n)=>n>32?mg(e,t,n):yg(e,t,n),$c=(e,t,n)=>n>32?wg(e,t,n):bg(e,t,n);function kg(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const s=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],h=Uc(c,u,1)^n[s],d=$c(c,u,1)^n[s+1];for(let f=0;f<50;f+=10)e[o+f]^=h,e[o+f+1]^=d}let i=e[2],a=e[3];for(let o=0;o<24;o++){const s=od[o],l=Uc(i,a,s),c=$c(i,a,s),u=ad[o];i=e[u],a=e[u+1],e[u]=l,e[u+1]=c}for(let o=0;o<50;o+=10){for(let s=0;s<10;s++)n[s]=e[o+s];for(let s=0;s<10;s++)e[o+s]^=~n[(s+2)%10]&n[(s+4)%10]}e[0]^=xg[r],e[1]^=Ig[r]}n.fill(0)}class Fs extends Hs{constructor(t,n,r,i=!1,a=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,ia(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ag(this.state)}keccak(){Dc||Lc(this.state32),kg(this.state32,this.rounds),Dc||Lc(this.state32),this.posOut=0,this.pos=0}update(t){ir(this);const{blockLen:n,state:r}=this;t=Ba(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(n-this.pos,i-a);for(let s=0;s<o;s++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){ir(this,!1),wi(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,a=t.length;i<a;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,a-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ia(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(nd(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:a,enableXOF:o}=this;return t||(t=new Fs(n,r,i,o,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Cg=(e,t,n)=>id(()=>new Fs(t,e,n)),cd=Cg(1,136,256/8);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ce=BigInt(0),te=BigInt(1),hn=BigInt(2),Bg=BigInt(3),Lo=BigInt(4),Vc=BigInt(5),Mc=BigInt(8);function he(e,t){const n=e%t;return n>=ce?n:t+n}function Ng(e,t,n){if(t<ce)throw new Error("invalid exponent, negatives unsupported");if(n<=ce)throw new Error("invalid modulus");if(n===te)return ce;let r=te;for(;t>ce;)t&te&&(r=r*e%n),e=e*e%n,t>>=te;return r}function je(e,t,n){let r=e;for(;t-- >ce;)r*=r,r%=n;return r}function aa(e,t){if(e===ce)throw new Error("invert: expected non-zero number");if(t<=ce)throw new Error("invert: expected positive modulus, got "+t);let n=he(e,t),r=t,i=ce,a=te;for(;n!==ce;){const s=r/n,l=r%n,c=i-a*s;r=n,n=l,i=a,a=c}if(r!==te)throw new Error("invert: does not exist");return he(i,t)}function Rg(e){const t=(e-te)/hn;let n,r,i;for(n=e-te,r=0;n%hn===ce;n/=hn,r++);for(i=hn;i<e&&Ng(i,t,e)!==e-te;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(e+te)/Lo;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const a=(n+te)/hn;return function(s,l){if(s.pow(l,t)===s.neg(s.ONE))throw new Error("Cannot find square root");let c=r,u=s.pow(s.mul(s.ONE,i),n),h=s.pow(l,a),d=s.pow(l,n);for(;!s.eql(d,s.ONE);){if(s.eql(d,s.ZERO))return s.ZERO;let f=1;for(let y=s.sqr(d);f<c&&!s.eql(y,s.ONE);f++)y=s.sqr(y);const _=s.pow(u,te<<BigInt(c-f-1));u=s.sqr(_),h=s.mul(h,_),d=s.mul(d,u),c=f}return h}}function Og(e){if(e%Lo===Bg){const t=(e+te)/Lo;return function(r,i){const a=r.pow(i,t);if(!r.eql(r.sqr(a),i))throw new Error("Cannot find square root");return a}}if(e%Mc===Vc){const t=(e-Vc)/Mc;return function(r,i){const a=r.mul(i,hn),o=r.pow(a,t),s=r.mul(i,o),l=r.mul(r.mul(s,hn),o),c=r.mul(s,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return Rg(e)}const Dg=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Na(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Dg.reduce((r,i)=>(r[i]="function",r),t);return mi(e,n)}function ld(e,t,n){if(n<ce)throw new Error("invalid exponent, negatives unsupported");if(n===ce)return e.ONE;if(n===te)return t;let r=e.ONE,i=t;for(;n>ce;)n&te&&(r=e.mul(r,i)),i=e.sqr(i),n>>=te;return r}function Lg(e,t){const n=new Array(t.length),r=t.reduce((a,o,s)=>e.is0(o)?a:(n[s]=a,e.mul(a,o)),e.ONE),i=e.inv(r);return t.reduceRight((a,o,s)=>e.is0(o)?a:(n[s]=e.mul(a,n[s]),e.mul(a,o)),i),n}function ud(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Ra(e,t,n=!1,r={}){if(e<=ce)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:a}=ud(e,t);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const s=Object.freeze({ORDER:e,BITS:i,BYTES:a,MASK:Ca(i),ZERO:ce,ONE:te,create:l=>he(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return ce<=l&&l<e},is0:l=>l===ce,isOdd:l=>(l&te)===te,neg:l=>he(-l,e),eql:(l,c)=>l===c,sqr:l=>he(l*l,e),add:(l,c)=>he(l+c,e),sub:(l,c)=>he(l-c,e),mul:(l,c)=>he(l*c,e),pow:(l,c)=>ld(s,l,c),div:(l,c)=>he(l*aa(c,e),e),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>aa(l,e),sqrt:r.sqrt||(l=>(o||(o=Og(e)),o(s,l))),invertBatch:l=>Lg(s,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?Vs(l,a):nr(l,a),fromBytes:l=>{if(l.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+l.length);return n?$s(l):Se(l)}});return Object.freeze(s)}function dd(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function fd(e){const t=dd(e);return t+Math.ceil(t/2)}function Pg(e,t,n=!1){const r=e.length,i=dd(t),a=fd(t);if(r<16||r<a||r>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+r);const o=n?Se(e):$s(e),s=he(o,t-te)+te;return n?Vs(s,i):nr(s,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function hd(e){const{Fp:t,mds:n,reversePartialPowIdx:r,roundConstants:i}=e,{roundsFull:a,roundsPartial:o,sboxPower:s,t:l}=e;Na(t);for(const _ of["t","roundsFull","roundsPartial"])if(typeof e[_]!="number"||!Number.isSafeInteger(e[_]))throw new Error("invalid number "+_);if(!Array.isArray(n)||n.length!==l)throw new Error("Poseidon: invalid MDS matrix");const c=n.map(_=>{if(!Array.isArray(_)||_.length!==l)throw new Error("invalid MDS matrix row: "+_);return _.map(y=>{if(typeof y!="bigint")throw new Error("invalid MDS matrix bigint: "+y);return t.create(y)})});if(r!==void 0&&typeof r!="boolean")throw new Error("invalid param reversePartialPowIdx="+r);if(a&1)throw new Error("roundsFull is not even"+a);const u=a+o;if(!Array.isArray(i)||i.length!==u)throw new Error("Poseidon: invalid round constants");const h=i.map(_=>{if(!Array.isArray(_)||_.length!==l)throw new Error("invalid round constants");return _.map(y=>{if(typeof y!="bigint"||!t.isValid(y))throw new Error("invalid round constant");return t.create(y)})});if(!s||![3,5,7].includes(s))throw new Error("invalid sboxPower");const d=BigInt(s);let f=_=>ld(t,_,d);return s===3?f=_=>t.mul(t.sqrN(_),_):s===5&&(f=_=>t.mul(t.sqrN(t.sqrN(_)),_)),Object.freeze({...e,rounds:u,sboxFn:f,roundConstants:h,mds:c})}function Ug(e,t){if(typeof t!="number")throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(e)||e.length%t)throw new Error("poseidonSplitConstants: invalid rc");const n=[];let r=[];for(let i=0;i<e.length;i++)r.push(e[i]),r.length===t&&(n.push(r),r=[]);return n}function gd(e){const t=hd(e),{Fp:n,mds:r,roundConstants:i,rounds:a,roundsPartial:o,sboxFn:s,t:l}=t,c=t.roundsFull/2,u=t.reversePartialPowIdx?l-1:0,h=(f,_,y)=>(f=f.map((g,p)=>n.add(g,i[y][p])),_?f=f.map(g=>s(g)):f[u]=s(f[u]),f=r.map(g=>g.reduce((p,A,E)=>n.add(p,n.mulN(A,f[E])),n.ZERO)),f),d=function(_){if(!Array.isArray(_)||_.length!==l)throw new Error("invalid values, expected array of bigints with length "+l);_=_.map(g=>{if(typeof g!="bigint")throw new Error("invalid bigint="+g);return n.create(g)});let y=0;for(let g=0;g<c;g++)_=h(_,!0,y++);for(let g=0;g<o;g++)_=h(_,!1,y++);for(let g=0;g<c;g++)_=h(_,!0,y++);if(y!==a)throw new Error("invalid number of rounds");return _};return d.roundConstants=i,d}const $g=Object.freeze(Object.defineProperty({__proto__:null,poseidon:gd,splitConstants:Ug,validateOpts:hd},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hc=BigInt(0),Pi=BigInt(1);function ao(e,t){const n=t.negate();return e?n:t}function _d(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function oo(e,t){_d(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function Vg(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Mg(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const so=new WeakMap,pd=new WeakMap;function co(e){return pd.get(e)||1}function Hg(e,t){return{constTimeNegate:ao,hasPrecomputes(n){return co(n)!==1},unsafeLadder(n,r,i=e.ZERO){let a=n;for(;r>Hc;)r&Pi&&(i=i.add(a)),a=a.double(),r>>=Pi;return i},precomputeWindow(n,r){const{windows:i,windowSize:a}=oo(r,t),o=[];let s=n,l=s;for(let c=0;c<i;c++){l=s,o.push(l);for(let u=1;u<a;u++)l=l.add(s),o.push(l);s=l.double()}return o},wNAF(n,r,i){const{windows:a,windowSize:o}=oo(n,t);let s=e.ZERO,l=e.BASE;const c=BigInt(2**n-1),u=2**n,h=BigInt(n);for(let d=0;d<a;d++){const f=d*o;let _=Number(i&c);i>>=h,_>o&&(_-=u,i+=Pi);const y=f,g=f+Math.abs(_)-1,p=d%2!==0,A=_<0;_===0?l=l.add(ao(p,r[y])):s=s.add(ao(A,r[g]))}return{p:s,f:l}},wNAFUnsafe(n,r,i,a=e.ZERO){const{windows:o,windowSize:s}=oo(n,t),l=BigInt(2**n-1),c=2**n,u=BigInt(n);for(let h=0;h<o;h++){const d=h*s;if(i===Hc)break;let f=Number(i&l);if(i>>=u,f>s&&(f-=c,i+=Pi),f===0)continue;let _=r[d+Math.abs(f)-1];f<0&&(_=_.negate()),a=a.add(_)}return a},getPrecomputes(n,r,i){let a=so.get(r);return a||(a=this.precomputeWindow(r,n),n!==1&&so.set(r,i(a))),a},wNAFCached(n,r,i){const a=co(n);return this.wNAF(a,this.getPrecomputes(a,n,i),r)},wNAFCachedUnsafe(n,r,i,a){const o=co(n);return o===1?this.unsafeLadder(n,r,a):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,a)},setWindowSize(n,r){_d(r,t),pd.set(n,r),so.delete(n)}}}function Fg(e,t,n,r){if(Vg(n,e),Mg(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=ed(BigInt(n.length)),o=a>12?a-3:a>4?a-2:a?2:1,s=(1<<o)-1,l=new Array(s+1).fill(i),c=Math.floor((t.BITS-1)/o)*o;let u=i;for(let h=c;h>=0;h-=o){l.fill(i);for(let f=0;f<r.length;f++){const _=r[f],y=Number(_>>BigInt(h)&BigInt(s));l[y]=l[y].add(n[f])}let d=i;for(let f=l.length-1,_=i;f>0;f--)_=_.add(l[f]),d=d.add(_);if(u=u.add(d),h!==0)for(let f=0;f<o;f++)u=u.double()}return u}function yd(e){return Na(e.Fp),mi(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ud(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fc(e){e.lowS!==void 0&&tr("lowS",e.lowS),e.prehash!==void 0&&tr("prehash",e.prehash)}function zg(e){const t=yd(e);mi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:jg,hexToBytes:qg}=ng,gt={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(e,t)=>{const{Err:n}=gt;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=Kn(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const a=r>127?Kn(i.length/2|128):"";return Kn(e)+a+i+t},decode(e,t){const{Err:n}=gt;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],a=!!(i&128);let o=0;if(!a)o=i;else{const l=i&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=t.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of c)o=o<<8|u;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const s=t.subarray(r,r+o);if(s.length!==o)throw new n("tlv.decode: wrong value length");return{v:s,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=gt;if(e<_t)throw new t("integer: negative integers are not allowed");let n=Kn(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=gt;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return jg(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=gt,i=typeof e=="string"?qg(e):e;bi(i);const{v:a,l:o}=r.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:s,l}=r.decode(2,a),{v:c,l:u}=r.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(s),s:n.decode(c)}},hexFromSig(e){const{_tlv:t,_int:n}=gt,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),a=r+i;return t.encode(48,a)}},_t=BigInt(0),Y=BigInt(1),Zt=BigInt(2),oa=BigInt(3),zc=BigInt(4);function bd(e){const t=zg(e),{Fp:n}=t,r=Ra(t.n,t.nBitLength),i=t.toBytes||((y,g,p)=>{const A=g.toAffine();return rr(Uint8Array.from([4]),n.toBytes(A.x),n.toBytes(A.y))}),a=t.fromBytes||(y=>{const g=y.subarray(1),p=n.fromBytes(g.subarray(0,n.BYTES)),A=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:p,y:A}});function o(y){const{a:g,b:p}=t,A=n.sqr(y),E=n.mul(A,y);return n.add(n.add(E,n.mul(y,g)),p)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(y){return ka(y,Y,t.n)}function l(y){const{allowedPrivateKeyLengths:g,nByteLength:p,wrapPrivateKey:A,n:E}=t;if(g&&typeof y!="bigint"){if(xn(y)&&(y=Ht(y)),typeof y!="string"||!g.includes(y.length))throw new Error("invalid private key");y=y.padStart(p*2,"0")}let b;try{b=typeof y=="bigint"?y:Se(qe("private key",y,p))}catch{throw new Error("invalid private key, expected hex or "+p+" bytes, got "+typeof y)}return A&&(b=he(b,E)),wn("private key",b,Y,E),b}function c(y){if(!(y instanceof d))throw new Error("ProjectivePoint expected")}const u=Do((y,g)=>{const{px:p,py:A,pz:E}=y;if(n.eql(E,n.ONE))return{x:p,y:A};const b=y.is0();g==null&&(g=b?n.ONE:n.inv(E));const C=n.mul(p,g),N=n.mul(A,g),T=n.mul(E,g);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(T,n.ONE))throw new Error("invZ was invalid");return{x:C,y:N}}),h=Do(y=>{if(y.is0()){if(t.allowInfinityPoint&&!n.is0(y.py))return;throw new Error("bad point: ZERO")}const{x:g,y:p}=y.toAffine();if(!n.isValid(g)||!n.isValid(p))throw new Error("bad point: x or y not FE");const A=n.sqr(p),E=o(g);if(!n.eql(A,E))throw new Error("bad point: equation left != right");if(!y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(g,p,A){if(this.px=g,this.py=p,this.pz=A,g==null||!n.isValid(g))throw new Error("x required");if(p==null||!n.isValid(p))throw new Error("y required");if(A==null||!n.isValid(A))throw new Error("z required");Object.freeze(this)}static fromAffine(g){const{x:p,y:A}=g||{};if(!g||!n.isValid(p)||!n.isValid(A))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const E=b=>n.eql(b,n.ZERO);return E(p)&&E(A)?d.ZERO:new d(p,A,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const p=n.invertBatch(g.map(A=>A.pz));return g.map((A,E)=>A.toAffine(p[E])).map(d.fromAffine)}static fromHex(g){const p=d.fromAffine(a(qe("pointHex",g)));return p.assertValidity(),p}static fromPrivateKey(g){return d.BASE.multiply(l(g))}static msm(g,p){return Fg(d,r,g,p)}_setWindowSize(g){_.setWindowSize(this,g)}assertValidity(){h(this)}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){c(g);const{px:p,py:A,pz:E}=this,{px:b,py:C,pz:N}=g,T=n.eql(n.mul(p,N),n.mul(b,E)),k=n.eql(n.mul(A,N),n.mul(C,E));return T&&k}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:p}=t,A=n.mul(p,oa),{px:E,py:b,pz:C}=this;let N=n.ZERO,T=n.ZERO,k=n.ZERO,v=n.mul(E,E),R=n.mul(b,b),O=n.mul(C,C),$=n.mul(E,b);return $=n.add($,$),k=n.mul(E,C),k=n.add(k,k),N=n.mul(g,k),T=n.mul(A,O),T=n.add(N,T),N=n.sub(R,T),T=n.add(R,T),T=n.mul(N,T),N=n.mul($,N),k=n.mul(A,k),O=n.mul(g,O),$=n.sub(v,O),$=n.mul(g,$),$=n.add($,k),k=n.add(v,v),v=n.add(k,v),v=n.add(v,O),v=n.mul(v,$),T=n.add(T,v),O=n.mul(b,C),O=n.add(O,O),v=n.mul(O,$),N=n.sub(N,v),k=n.mul(O,R),k=n.add(k,k),k=n.add(k,k),new d(N,T,k)}add(g){c(g);const{px:p,py:A,pz:E}=this,{px:b,py:C,pz:N}=g;let T=n.ZERO,k=n.ZERO,v=n.ZERO;const R=t.a,O=n.mul(t.b,oa);let $=n.mul(p,b),Q=n.mul(A,C),I=n.mul(E,N),D=n.add(p,A),B=n.add(b,C);D=n.mul(D,B),B=n.add($,Q),D=n.sub(D,B),B=n.add(p,E);let x=n.add(b,N);return B=n.mul(B,x),x=n.add($,I),B=n.sub(B,x),x=n.add(A,E),T=n.add(C,N),x=n.mul(x,T),T=n.add(Q,I),x=n.sub(x,T),v=n.mul(R,B),T=n.mul(O,I),v=n.add(T,v),T=n.sub(Q,v),v=n.add(Q,v),k=n.mul(T,v),Q=n.add($,$),Q=n.add(Q,$),I=n.mul(R,I),B=n.mul(O,B),Q=n.add(Q,I),I=n.sub($,I),I=n.mul(R,I),B=n.add(B,I),$=n.mul(Q,B),k=n.add(k,$),$=n.mul(x,B),T=n.mul(D,T),T=n.sub(T,$),$=n.mul(D,Q),v=n.mul(x,v),v=n.add(v,$),new d(T,k,v)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return _.wNAFCached(this,g,d.normalizeZ)}multiplyUnsafe(g){const{endo:p,n:A}=t;wn("scalar",g,_t,A);const E=d.ZERO;if(g===_t)return E;if(this.is0()||g===Y)return this;if(!p||_.hasPrecomputes(this))return _.wNAFCachedUnsafe(this,g,d.normalizeZ);let{k1neg:b,k1:C,k2neg:N,k2:T}=p.splitScalar(g),k=E,v=E,R=this;for(;C>_t||T>_t;)C&Y&&(k=k.add(R)),T&Y&&(v=v.add(R)),R=R.double(),C>>=Y,T>>=Y;return b&&(k=k.negate()),N&&(v=v.negate()),v=new d(n.mul(v.px,p.beta),v.py,v.pz),k.add(v)}multiply(g){const{endo:p,n:A}=t;wn("scalar",g,Y,A);let E,b;if(p){const{k1neg:C,k1:N,k2neg:T,k2:k}=p.splitScalar(g);let{p:v,f:R}=this.wNAF(N),{p:O,f:$}=this.wNAF(k);v=_.constTimeNegate(C,v),O=_.constTimeNegate(T,O),O=new d(n.mul(O.px,p.beta),O.py,O.pz),E=v.add(O),b=R.add($)}else{const{p:C,f:N}=this.wNAF(g);E=C,b=N}return d.normalizeZ([E,b])[0]}multiplyAndAddUnsafe(g,p,A){const E=d.BASE,b=(N,T)=>T===_t||T===Y||!N.equals(E)?N.multiplyUnsafe(T):N.multiply(T),C=b(this,p).add(b(g,A));return C.is0()?void 0:C}toAffine(g){return u(this,g)}isTorsionFree(){const{h:g,isTorsionFree:p}=t;if(g===Y)return!0;if(p)return p(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:p}=t;return g===Y?this:p?p(d,this):this.multiplyUnsafe(t.h)}toRawBytes(g=!0){return tr("isCompressed",g),this.assertValidity(),i(d,this,g)}toHex(g=!0){return tr("isCompressed",g),Ht(this.toRawBytes(g))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,_=Hg(d,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:s}}function Yg(e){const t=yd(e);return mi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function zs(e){const t=Yg(e),{Fp:n,n:r}=t,i=n.BYTES+1,a=2*n.BYTES+1;function o(I){return he(I,r)}function s(I){return aa(I,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:h}=bd({...t,toBytes(I,D,B){const x=D.toAffine(),P=n.toBytes(x.x),q=rr;return tr("isCompressed",B),B?q(Uint8Array.from([D.hasEvenY()?2:3]),P):q(Uint8Array.from([4]),P,n.toBytes(x.y))},fromBytes(I){const D=I.length,B=I[0],x=I.subarray(1);if(D===i&&(B===2||B===3)){const P=Se(x);if(!ka(P,Y,n.ORDER))throw new Error("Point is not on curve");const q=u(P);let J;try{J=n.sqrt(q)}catch(ht){const ve=ht instanceof Error?": "+ht.message:"";throw new Error("Point is not on curve"+ve)}const ne=(J&Y)===Y;return(B&1)===1!==ne&&(J=n.neg(J)),{x:P,y:J}}else if(D===a&&B===4){const P=n.fromBytes(x.subarray(0,n.BYTES)),q=n.fromBytes(x.subarray(n.BYTES,2*n.BYTES));return{x:P,y:q}}else{const P=i,q=a;throw new Error("invalid Point, expected length of "+P+", or uncompressed "+q+", got "+D)}}}),d=I=>Ht(nr(I,t.nByteLength));function f(I){const D=r>>Y;return I>D}function _(I){return f(I)?o(-I):I}const y=(I,D,B)=>Se(I.slice(D,B));class g{constructor(D,B,x){this.r=D,this.s=B,this.recovery=x,this.assertValidity()}static fromCompact(D){const B=t.nByteLength;return D=qe("compactSignature",D,B*2),new g(y(D,0,B),y(D,B,2*B))}static fromDER(D){const{r:B,s:x}=gt.toSig(qe("DER",D));return new g(B,x)}assertValidity(){wn("r",this.r,Y,r),wn("s",this.s,Y,r)}addRecoveryBit(D){return new g(this.r,this.s,D)}recoverPublicKey(D){const{r:B,s:x,recovery:P}=this,q=N(qe("msgHash",D));if(P==null||![0,1,2,3].includes(P))throw new Error("recovery id invalid");const J=P===2||P===3?B+t.n:B;if(J>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const ne=(P&1)===0?"02":"03",ze=l.fromHex(ne+d(J)),ht=s(J),ve=o(-q*ht),Mn=o(x*ht),jt=l.BASE.multiplyAndAddUnsafe(ze,ve,Mn);if(!jt)throw new Error("point at infinify");return jt.assertValidity(),jt}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Ft(this.toDERHex())}toDERHex(){return gt.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ft(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const p={isValidPrivateKey(I){try{return c(I),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const I=fd(t.n);return Pg(t.randomBytes(I),t.n)},precompute(I=8,D=l.BASE){return D._setWindowSize(I),D.multiply(BigInt(3)),D}};function A(I,D=!0){return l.fromPrivateKey(I).toRawBytes(D)}function E(I){const D=xn(I),B=typeof I=="string",x=(D||B)&&I.length;return D?x===i||x===a:B?x===2*i||x===2*a:I instanceof l}function b(I,D,B=!0){if(E(I))throw new Error("first arg must be private key");if(!E(D))throw new Error("second arg must be public key");return l.fromHex(D).multiply(c(I)).toRawBytes(B)}const C=t.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const D=Se(I),B=I.length*8-t.nBitLength;return B>0?D>>BigInt(B):D},N=t.bits2int_modN||function(I){return o(C(I))},T=Ca(t.nBitLength);function k(I){return wn("num < 2^"+t.nBitLength,I,_t,T),nr(I,t.nByteLength)}function v(I,D,B=R){if(["recovered","canonical"].some(un=>un in B))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:P}=t;let{lowS:q,prehash:J,extraEntropy:ne}=B;q==null&&(q=!0),I=qe("msgHash",I),Fc(B),J&&(I=qe("prehashed msgHash",x(I)));const ze=N(I),ht=c(D),ve=[k(ht),k(ze)];if(ne!=null&&ne!==!1){const un=ne===!0?P(n.BYTES):ne;ve.push(qe("extraEntropy",un))}const Mn=rr(...ve),jt=ze;function Ja(un){const Hn=C(un);if(!h(Hn))return;const Qa=s(Hn),wr=l.BASE.multiply(Hn).toAffine(),dn=o(wr.x);if(dn===_t)return;const Er=o(Qa*o(jt+dn*ht));if(Er===_t)return;let Ar=(wr.x===dn?0:2)|Number(wr.y&Y),Fn=Er;return q&&f(Er)&&(Fn=_(Er),Ar^=1),new g(dn,Fn,Ar)}return{seed:Mn,k2sig:Ja}}const R={lowS:t.lowS,prehash:!1},O={lowS:t.lowS,prehash:!1};function $(I,D,B=R){const{seed:x,k2sig:P}=v(I,D,B),q=t;return td(q.hash.outputLen,q.nByteLength,q.hmac)(x,P)}l.BASE._setWindowSize(8);function Q(I,D,B,x=O){var Ar;const P=I;D=qe("msgHash",D),B=qe("publicKey",B);const{lowS:q,prehash:J,format:ne}=x;if(Fc(x),"strict"in x)throw new Error("options.strict was renamed to lowS");if(ne!==void 0&&ne!=="compact"&&ne!=="der")throw new Error("format must be compact or der");const ze=typeof P=="string"||xn(P),ht=!ze&&!ne&&typeof P=="object"&&P!==null&&typeof P.r=="bigint"&&typeof P.s=="bigint";if(!ze&&!ht)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ve,Mn;try{if(ht&&(ve=new g(P.r,P.s)),ze){try{ne!=="compact"&&(ve=g.fromDER(P))}catch(Fn){if(!(Fn instanceof gt.Err))throw Fn}!ve&&ne!=="der"&&(ve=g.fromCompact(P))}Mn=l.fromHex(B)}catch{return!1}if(!ve||q&&ve.hasHighS())return!1;J&&(D=t.hash(D));const{r:jt,s:Ja}=ve,un=N(D),Hn=s(Ja),Qa=o(un*Hn),wr=o(jt*Hn),dn=(Ar=l.BASE.multiplyAndAddUnsafe(Mn,Qa,wr))==null?void 0:Ar.toAffine();return dn?o(dn.x)===jt:!1}return{CURVE:t,getPublicKey:A,getSharedSecret:b,sign:$,verify:Q,ProjectivePoint:l,Signature:g,utils:p}}function md(e,t){const n=e.ORDER;let r=_t;for(let _=n-Y;_%Zt===_t;_/=Zt)r+=Y;const i=r,a=Zt<<i-Y-Y,o=a*Zt,s=(n-Y)/o,l=(s-Y)/Zt,c=o-Y,u=a,h=e.pow(t,s),d=e.pow(t,(s+Y)/Zt);let f=(_,y)=>{let g=h,p=e.pow(y,c),A=e.sqr(p);A=e.mul(A,y);let E=e.mul(_,A);E=e.pow(E,l),E=e.mul(E,p),p=e.mul(E,y),A=e.mul(E,_);let b=e.mul(A,p);E=e.pow(b,u);let C=e.eql(E,e.ONE);p=e.mul(A,d),E=e.mul(b,g),A=e.cmov(p,A,C),b=e.cmov(E,b,C);for(let N=i;N>Y;N--){let T=N-Zt;T=Zt<<T-Y;let k=e.pow(b,T);const v=e.eql(k,e.ONE);p=e.mul(A,g),g=e.mul(g,g),k=e.mul(b,g),A=e.cmov(p,A,v),b=e.cmov(k,b,v)}return{isValid:C,value:A}};if(e.ORDER%zc===oa){const _=(e.ORDER-oa)/zc,y=e.sqrt(e.neg(t));f=(g,p)=>{let A=e.sqr(p);const E=e.mul(g,p);A=e.mul(A,E);let b=e.pow(A,_);b=e.mul(b,E);const C=e.mul(b,y),N=e.mul(e.sqr(b),p),T=e.eql(N,g);let k=e.cmov(C,b,T);return{isValid:T,value:k}}}return f}function Zg(e,t){if(Na(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=md(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,a,o,s,l,c,u,h;i=e.sqr(r),i=e.mul(i,t.Z),a=e.sqr(i),a=e.add(a,i),o=e.add(a,e.ONE),o=e.mul(o,t.B),s=e.cmov(t.Z,e.neg(a),!e.eql(a,e.ZERO)),s=e.mul(s,t.A),a=e.sqr(o),c=e.sqr(s),l=e.mul(c,t.A),a=e.add(a,l),a=e.mul(a,o),c=e.mul(c,s),l=e.mul(c,t.B),a=e.add(a,l),u=e.mul(i,o);const{isValid:d,value:f}=n(a,c);h=e.mul(i,r),h=e.mul(h,f),u=e.cmov(u,o,d),h=e.cmov(h,f,d);const _=e.isOdd(r)===e.isOdd(h);return h=e.cmov(e.neg(h),h,_),u=e.div(u,s),{x:u,y:h}}}const Kg=Object.freeze(Object.defineProperty({__proto__:null,DER:gt,SWUFpSqrtRatio:md,mapToCurveSimpleSWU:Zg,weierstrass:zs,weierstrassPoints:bd},Symbol.toStringTag,{value:"Module"}));class wd extends Hs{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,ig(t);const r=Ba(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<a.length;o++)a[o]^=54;this.iHash.update(a),this.oHash=t.create();for(let o=0;o<a.length;o++)a[o]^=106;this.oHash.update(a),a.fill(0)}update(t){return ir(this),this.iHash.update(t),this}digestInto(t){ir(this),wi(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:a,blockLen:o,outputLen:s}=this;return t=t,t.finished=i,t.destroyed=a,t.blockLen=o,t.outputLen=s,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ed=(e,t,n)=>new wd(e,t).update(n).digest();Ed.create=(e,t)=>new wd(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ad(e){return{hash:e,hmac:(t,...n)=>Ed(e,t,sg(...n)),randomBytes:cg}}function Gg(e,t){const n=r=>zs({...e,...Ad(r)});return Object.freeze({...n(t),create:n})}/*! scure-starknet - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wr=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),gn=BigInt("0x800000000000000000000000000000000000000000000000000000000000000"),Td=252;function jc(e){for(;e[0]===0;)e=e.subarray(1);const t=e.length*8-Td,n=Se(e);return t>0?n>>BigInt(t):n}function Sd(e){return typeof e=="string"&&(e=qs(e),e.length&1&&(e="0"+e)),Ft(e)}const On=zs({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:Ra(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:Wr,nBitLength:Td,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...Ad(Ei),bits2int:jc,bits2int_modN:e=>{const t=Se(e).toString(16);return t.length===63&&(e=Sd(t+"0")),he(jc(e),Wr)}}),Wg=On;function ar(e){return qe("",typeof e=="string"?Sd(e):e)}function Oa(e){return Ht(ar(e)).padStart(64,"0")}function js(e,t=!1){return On.getPublicKey(Oa(e),t)}function Xg(e,t){return On.getSharedSecret(Oa(e),t)}function vd(e){const{r:t,s:n}=e;if(t<0n||t>=gn)throw new Error(`Signature.r should be [1, ${gn})`);const r=aa(n,Wr);if(r<0n||r>=gn)throw new Error(`inv(Signature.s) should be [1, ${gn})`)}function xd(e){const t=ar(e);if(Se(t)>=gn)throw new Error(`msgHash should be [0, ${gn})`);return t}function Jg(e,t,n){const r=On.sign(xd(e),Oa(t),n);return vd(r),r}function Id(e,t,n){if(!(e instanceof jr)){const r=ar(e);try{e=jr.fromDER(r)}catch(i){if(!(i instanceof gt.Err))throw i;e=jr.fromCompact(r)}}return vd(e),On.verify(e,xd(t),ar(n))}const{CURVE:Qg,ProjectivePoint:Yn,Signature:jr,utils:kd}=On;function Cd(e){return`0x${Ht(e.subarray(1)).replace(/^0+/gm,"")}`}function qs(e){return e.replace(/^0x/i,"")}function Bd(e){const t=ar(e),n=2n**256n,r=n-he(n,Wr);for(let i=0;;i++){const a=Po(rr(t,Ms(BigInt(i))));if(a<r)return he(a,Wr).toString(16);if(i===1e5)throw new Error("grindKey is broken: tried 100k vals")}}function Nd(e){return Cd(js(e,!0))}function e_(e){if(e=qs(e),e.length!==130)throw new Error("Wrong ethereum signature");return Bd(e.substring(0,64))}const t_=2n**31n-1n,Ui=e=>Number(e&t_);function n_(e,t,n,r){const i=Ui(Po(e)),a=Ui(Po(t)),o=Ia(qs(n));return`m/2645'/${i}'/${a}'/${Ui(o)}'/${Ui(o>>31n)}'/${r}`}const Xr=[new Yn(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new Yn(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new Yn(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new Yn(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new Yn(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function Rd(e,t){const n=[];let r=e;for(let i=0;i<248;i++)n.push(r),r=r.double();r=t;for(let i=0;i<4;i++)n.push(r),r=r.double();return n}const r_=Rd(Xr[1],Xr[2]),i_=Rd(Xr[3],Xr[4]);function a_(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"){if(!Number.isSafeInteger(e))throw new Error(`Invalid pedersenArg: ${e}`);t=BigInt(e)}else t=Se(ar(e));if(!(0n<=t&&t<On.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${t}`);return t}function qc(e,t,n){let r=a_(t);for(let i=0;i<252;i++){const a=n[i];if(!a)throw new Error("invalid constant index");if(a.equals(e))throw new Error("Same point");(r&1n)!==0n&&(e=e.add(a)),r>>=1n}return e}function Ai(e,t){let n=Xr[0];return n=qc(n,e,r_),n=qc(n,t,i_),Cd(n.toRawBytes(!0))}const o_=(e,t=Ai)=>[0,...e,e.length].reduce((n,r)=>t(n,r)),s_=Ca(250),on=e=>Se(cd(e))&s_,Po=e=>Se(Ei(e)),Od=Ra(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function Uo(e,t,n){const r=e.fromBytes(Ei(rd(`${t}${n}`)));return e.create(r)}function Dd(e,t,n,r=0){const i=[],a=[];for(let o=0;o<n;o++)i.push(Uo(e,`${t}x`,r*n+o)),a.push(Uo(e,`${t}y`,r*n+o));if(new Set([...i,...a]).size!==2*n)throw new Error("X and Y values are not distinct");return i.map(o=>a.map(s=>e.inv(e.sub(o,s))))}const c_=[[3,1,1],[1,-1,1],[1,1,-2]].map(e=>e.map(BigInt));function Ys(e,t){if(Na(e.Fp),!Number.isSafeInteger(e.rate)||!Number.isSafeInteger(e.capacity))throw new Error(`Wrong poseidon opts: ${e}`);const n=e.rate+e.capacity,r=e.roundsFull+e.roundsPartial,i=[];for(let o=0;o<r;o++){const s=[];for(let l=0;l<n;l++)s.push(Uo(e.Fp,"Hades",n*o+l));i.push(s)}const a=gd({...e,t:n,sboxPower:3,reversePartialPowIdx:!0,mds:t,roundConstants:i});return a.m=n,a.rate=e.rate,a.capacity=e.capacity,a}function l_(e,t=0){const n=e.rate+e.capacity;if(!Number.isSafeInteger(t))throw new Error(`Wrong mdsAttempt=${t}`);return Ys(e,Dd(e.Fp,"HadesMDS",n,t))}const Ti=Ys({Fp:Od,rate:2,capacity:1,roundsFull:8,roundsPartial:83},c_);function Zs(e,t,n=Ti){return n([e,t,2n])[0]}function u_(e,t,n=Ti){return Ms(Zs(Se(e),Se(t),n))}function d_(e,t=Ti){return t([e,0n,1n])[0]}function ue(e,t=Ti){const{m:n,rate:r}=t;if(!Array.isArray(e))throw new Error("bigint array expected in values");const i=Array.from(e);for(i.push(1n);i.length%r!==0;)i.push(0n);let a=new Array(n).fill(0n);for(let o=0;o<i.length;o+=r){for(let s=0;s<r;s++){const l=i[o+s];if(typeof l>"u")throw new Error("invalid index");if(typeof a[s]>"u")throw new Error("state[j] is undefined");a[s]=a[s]+l}a=t(a)}return a[0]}const f_=Object.freeze(Object.defineProperty({__proto__:null,CURVE:Qg,Fp251:Od,MAX_VALUE:gn,ProjectivePoint:Yn,Signature:jr,_poseidonMDS:Dd,_starkCurve:Wg,computeHashOnElements:o_,ethSigToPrivate:e_,getAccountPath:n_,getPublicKey:js,getSharedSecret:Xg,getStarkKey:Nd,grindKey:Bd,keccak:on,normalizePrivateKey:Oa,pedersen:Ai,poseidonBasic:Ys,poseidonCreate:l_,poseidonHash:Zs,poseidonHashFunc:u_,poseidonHashMany:ue,poseidonHashSingle:d_,poseidonSmall:Ti,sign:Jg,utils:kd,verify:Id},Symbol.toStringTag,{value:"Module"}));/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const h_=4,Yc=0,Zc=1,g_=2;function _r(e){let t=e.length;for(;--t>=0;)e[t]=0}const __=0,Ld=1,p_=2,y_=3,b_=258,Ks=29,Si=256,Jr=Si+1+Ks,Qn=30,Gs=19,Pd=2*Jr+1,_n=15,lo=16,m_=7,Ws=256,Ud=16,$d=17,Vd=18,$o=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Zi=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),w_=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Md=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),E_=512,Pt=new Array((Jr+2)*2);_r(Pt);const qr=new Array(Qn*2);_r(qr);const Qr=new Array(E_);_r(Qr);const ei=new Array(b_-y_+1);_r(ei);const Xs=new Array(Ks);_r(Xs);const sa=new Array(Qn);_r(sa);function uo(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let Hd,Fd,zd;function fo(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const jd=e=>e<256?Qr[e]:Qr[256+(e>>>7)],ti=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},xe=(e,t,n)=>{e.bi_valid>lo-n?(e.bi_buf|=t<<e.bi_valid&65535,ti(e,e.bi_buf),e.bi_buf=t>>lo-e.bi_valid,e.bi_valid+=n-lo):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},vt=(e,t,n)=>{xe(e,n[t*2],n[t*2+1])},qd=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},A_=e=>{e.bi_valid===16?(ti(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},T_=(e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,h,d,f,_,y=0;for(d=0;d<=_n;d++)e.bl_count[d]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<Pd;c++)u=e.heap[c],d=n[n[u*2+1]*2+1]+1,d>l&&(d=l,y++),n[u*2+1]=d,!(u>r)&&(e.bl_count[d]++,f=0,u>=s&&(f=o[u-s]),_=n[u*2],e.opt_len+=_*(d+f),a&&(e.static_len+=_*(i[u*2+1]+f)));if(y!==0){do{for(d=l-1;e.bl_count[d]===0;)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,y-=2}while(y>0);for(d=l;d!==0;d--)for(u=e.bl_count[d];u!==0;)h=e.heap[--c],!(h>r)&&(n[h*2+1]!==d&&(e.opt_len+=(d-n[h*2+1])*n[h*2],n[h*2+1]=d),u--)}},Yd=(e,t,n)=>{const r=new Array(_n+1);let i=0,a,o;for(a=1;a<=_n;a++)i=i+n[a-1]<<1,r[a]=i;for(o=0;o<=t;o++){let s=e[o*2+1];s!==0&&(e[o*2]=qd(r[s]++,s))}},S_=()=>{let e,t,n,r,i;const a=new Array(_n+1);for(n=0,r=0;r<Ks-1;r++)for(Xs[r]=n,e=0;e<1<<$o[r];e++)ei[n++]=r;for(ei[n-1]=r,i=0,r=0;r<16;r++)for(sa[r]=i,e=0;e<1<<Zi[r];e++)Qr[i++]=r;for(i>>=7;r<Qn;r++)for(sa[r]=i<<7,e=0;e<1<<Zi[r]-7;e++)Qr[256+i++]=r;for(t=0;t<=_n;t++)a[t]=0;for(e=0;e<=143;)Pt[e*2+1]=8,e++,a[8]++;for(;e<=255;)Pt[e*2+1]=9,e++,a[9]++;for(;e<=279;)Pt[e*2+1]=7,e++,a[7]++;for(;e<=287;)Pt[e*2+1]=8,e++,a[8]++;for(Yd(Pt,Jr+1,a),e=0;e<Qn;e++)qr[e*2+1]=5,qr[e*2]=qd(e,5);Hd=new uo(Pt,$o,Si+1,Jr,_n),Fd=new uo(qr,Zi,0,Qn,_n),zd=new uo(new Array(0),w_,0,Gs,m_)},Zd=e=>{let t;for(t=0;t<Jr;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Qn;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Gs;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Ws*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Kd=e=>{e.bi_valid>8?ti(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Kc=(e,t,n,r)=>{const i=t*2,a=n*2;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},ho=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Kc(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Kc(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},Gc=(e,t,n)=>{let r,i,a=0,o,s;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+a++]&255,r+=(e.pending_buf[e.sym_buf+a++]&255)<<8,i=e.pending_buf[e.sym_buf+a++],r===0?vt(e,i,t):(o=ei[i],vt(e,o+Si+1,t),s=$o[o],s!==0&&(i-=Xs[o],xe(e,i,s)),r--,o=jd(r),vt(e,o,n),s=Zi[o],s!==0&&(r-=sa[o],xe(e,r,s)));while(a<e.sym_next);vt(e,Ws,t)},Vo=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,l=-1,c;for(e.heap_len=0,e.heap_max=Pd,o=0;o<a;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[c*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)ho(e,n,o);c=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ho(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[c*2]=n[o*2]+n[s*2],e.depth[c]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[o*2+1]=n[s*2+1]=c,e.heap[1]=c++,ho(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],T_(e,t),Yd(n,l,e.bl_count)},Wc=(e,t,n)=>{let r,i=-1,a,o=t[0*2+1],s=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)a=o,o=t[(r+1)*2+1],!(++s<l&&a===o)&&(s<c?e.bl_tree[a*2]+=s:a!==0?(a!==i&&e.bl_tree[a*2]++,e.bl_tree[Ud*2]++):s<=10?e.bl_tree[$d*2]++:e.bl_tree[Vd*2]++,s=0,i=a,o===0?(l=138,c=3):a===o?(l=6,c=3):(l=7,c=4))},Xc=(e,t,n)=>{let r,i=-1,a,o=t[0*2+1],s=0,l=7,c=4;for(o===0&&(l=138,c=3),r=0;r<=n;r++)if(a=o,o=t[(r+1)*2+1],!(++s<l&&a===o)){if(s<c)do vt(e,a,e.bl_tree);while(--s!==0);else a!==0?(a!==i&&(vt(e,a,e.bl_tree),s--),vt(e,Ud,e.bl_tree),xe(e,s-3,2)):s<=10?(vt(e,$d,e.bl_tree),xe(e,s-3,3)):(vt(e,Vd,e.bl_tree),xe(e,s-11,7));s=0,i=a,o===0?(l=138,c=3):a===o?(l=6,c=3):(l=7,c=4)}},v_=e=>{let t;for(Wc(e,e.dyn_ltree,e.l_desc.max_code),Wc(e,e.dyn_dtree,e.d_desc.max_code),Vo(e,e.bl_desc),t=Gs-1;t>=3&&e.bl_tree[Md[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},x_=(e,t,n,r)=>{let i;for(xe(e,t-257,5),xe(e,n-1,5),xe(e,r-4,4),i=0;i<r;i++)xe(e,e.bl_tree[Md[i]*2+1],3);Xc(e,e.dyn_ltree,t-1),Xc(e,e.dyn_dtree,n-1)},I_=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Yc;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Zc;for(n=32;n<Si;n++)if(e.dyn_ltree[n*2]!==0)return Zc;return Yc};let Jc=!1;const k_=e=>{Jc||(S_(),Jc=!0),e.l_desc=new fo(e.dyn_ltree,Hd),e.d_desc=new fo(e.dyn_dtree,Fd),e.bl_desc=new fo(e.bl_tree,zd),e.bi_buf=0,e.bi_valid=0,Zd(e)},Gd=(e,t,n,r)=>{xe(e,(__<<1)+(r?1:0),3),Kd(e),ti(e,n),ti(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},C_=e=>{xe(e,Ld<<1,3),vt(e,Ws,Pt),A_(e)},B_=(e,t,n,r)=>{let i,a,o=0;e.level>0?(e.strm.data_type===g_&&(e.strm.data_type=I_(e)),Vo(e,e.l_desc),Vo(e,e.d_desc),o=v_(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&t!==-1?Gd(e,t,n,r):e.strategy===h_||a===i?(xe(e,(Ld<<1)+(r?1:0),3),Gc(e,Pt,qr)):(xe(e,(p_<<1)+(r?1:0),3),x_(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Gc(e,e.dyn_ltree,e.dyn_dtree)),Zd(e),r&&Kd(e)},N_=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(ei[n]+Si+1)*2]++,e.dyn_dtree[jd(t)*2]++),e.sym_next===e.sym_end);var R_=k_,O_=Gd,D_=B_,L_=N_,P_=C_,U_={_tr_init:R_,_tr_stored_block:O_,_tr_flush_block:D_,_tr_tally:L_,_tr_align:P_};const $_=(e,t,n,r)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var ni=$_;const V_=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},M_=new Uint32Array(V_()),H_=(e,t,n,r)=>{const i=M_,a=r+n;e^=-1;for(let o=r;o<a;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var ae=H_,In={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Da={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:F_,_tr_stored_block:Mo,_tr_flush_block:z_,_tr_tally:en,_tr_align:j_}=U_,{Z_NO_FLUSH:tn,Z_PARTIAL_FLUSH:q_,Z_FULL_FLUSH:Y_,Z_FINISH:ct,Z_BLOCK:Qc,Z_OK:fe,Z_STREAM_END:el,Z_STREAM_ERROR:Ct,Z_DATA_ERROR:Z_,Z_BUF_ERROR:go,Z_DEFAULT_COMPRESSION:K_,Z_FILTERED:G_,Z_HUFFMAN_ONLY:$i,Z_RLE:W_,Z_FIXED:X_,Z_DEFAULT_STRATEGY:J_,Z_UNKNOWN:Q_,Z_DEFLATED:La}=Da,ep=9,tp=15,np=8,rp=29,ip=256,Ho=ip+1+rp,ap=30,op=19,sp=2*Ho+1,cp=15,H=3,Gt=258,Bt=Gt+H+1,lp=32,or=42,Js=57,Fo=69,zo=73,jo=91,qo=103,pn=113,xr=666,Te=1,pr=2,kn=3,yr=4,up=3,yn=(e,t)=>(e.msg=In[t],t),tl=e=>e*2-(e>4?9:0),Kt=e=>{let t=e.length;for(;--t>=0;)e[t]=0},dp=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)};let fp=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,nn=fp;const Ne=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Ve=(e,t)=>{z_(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ne(e.strm)},j=(e,t)=>{e.pending_buf[e.pending++]=t},Sr=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Yo=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=ni(e.adler,t,i,n):e.state.wrap===2&&(e.adler=ae(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Wd=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,a,o=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-Bt?e.strstart-(e.w_size-Bt):0,c=e.window,u=e.w_mask,h=e.prev,d=e.strstart+Gt;let f=c[r+o-1],_=c[r+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,!(c[i+o]!==_||c[i+o-1]!==f||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<d);if(a=Gt-(d-r),r=d-Gt,a>o){if(e.match_start=t,o=a,a>=s)break;f=c[r+o-1],_=c[r+o]}}while((t=h[t&u])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},sr=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Bt)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),dp(e),r+=t),e.strm.avail_in===0)break;if(n=Yo(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=H)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=nn(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=nn(e,e.ins_h,e.window[i+H-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<H)););}while(e.lookahead<Bt&&e.strm.avail_in!==0)},Xd=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,a,o=0,s=e.strm.avail_in;do{if(r=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>a&&(r=a),r<n&&(r===0&&t!==ct||t===tn||r!==i+e.strm.avail_in)))break;o=t===ct&&r===i+e.strm.avail_in?1:0,Mo(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,Ne(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(Yo(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(o===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?yr:t!==tn&&t!==ct&&e.strm.avail_in===0&&e.strstart===e.block_start?pr:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Yo(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,n=a>e.w_size?e.w_size:a,i=e.strstart-e.block_start,(i>=n||(i||t===ct)&&t!==tn&&e.strm.avail_in===0&&i<=a)&&(r=i>a?a:i,o=t===ct&&e.strm.avail_in===0&&r===i?1:0,Mo(e,e.block_start,r,o),e.block_start+=r,Ne(e.strm)),o?kn:Te)},_o=(e,t)=>{let n,r;for(;;){if(e.lookahead<Bt){if(sr(e),e.lookahead<Bt&&t===tn)return Te;if(e.lookahead===0)break}if(n=0,e.lookahead>=H&&(e.ins_h=nn(e,e.ins_h,e.window[e.strstart+H-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Bt&&(e.match_length=Wd(e,n)),e.match_length>=H)if(r=en(e,e.strstart-e.match_start,e.match_length-H),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=H){e.match_length--;do e.strstart++,e.ins_h=nn(e,e.ins_h,e.window[e.strstart+H-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=nn(e,e.ins_h,e.window[e.strstart+1]);else r=en(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Ve(e,!1),e.strm.avail_out===0))return Te}return e.insert=e.strstart<H-1?e.strstart:H-1,t===ct?(Ve(e,!0),e.strm.avail_out===0?kn:yr):e.sym_next&&(Ve(e,!1),e.strm.avail_out===0)?Te:pr},jn=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Bt){if(sr(e),e.lookahead<Bt&&t===tn)return Te;if(e.lookahead===0)break}if(n=0,e.lookahead>=H&&(e.ins_h=nn(e,e.ins_h,e.window[e.strstart+H-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=H-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Bt&&(e.match_length=Wd(e,n),e.match_length<=5&&(e.strategy===G_||e.match_length===H&&e.strstart-e.match_start>4096)&&(e.match_length=H-1)),e.prev_length>=H&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-H,r=en(e,e.strstart-1-e.prev_match,e.prev_length-H),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=nn(e,e.ins_h,e.window[e.strstart+H-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=H-1,e.strstart++,r&&(Ve(e,!1),e.strm.avail_out===0))return Te}else if(e.match_available){if(r=en(e,0,e.window[e.strstart-1]),r&&Ve(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Te}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=en(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<H-1?e.strstart:H-1,t===ct?(Ve(e,!0),e.strm.avail_out===0?kn:yr):e.sym_next&&(Ve(e,!1),e.strm.avail_out===0)?Te:pr},hp=(e,t)=>{let n,r,i,a;const o=e.window;for(;;){if(e.lookahead<=Gt){if(sr(e),e.lookahead<=Gt&&t===tn)return Te;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=H&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+Gt;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=Gt-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=H?(n=en(e,1,e.match_length-H),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=en(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Ve(e,!1),e.strm.avail_out===0))return Te}return e.insert=0,t===ct?(Ve(e,!0),e.strm.avail_out===0?kn:yr):e.sym_next&&(Ve(e,!1),e.strm.avail_out===0)?Te:pr},gp=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(sr(e),e.lookahead===0)){if(t===tn)return Te;break}if(e.match_length=0,n=en(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Ve(e,!1),e.strm.avail_out===0))return Te}return e.insert=0,t===ct?(Ve(e,!0),e.strm.avail_out===0?kn:yr):e.sym_next&&(Ve(e,!1),e.strm.avail_out===0)?Te:pr};function wt(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Ir=[new wt(0,0,0,0,Xd),new wt(4,4,8,4,_o),new wt(4,5,16,8,_o),new wt(4,6,32,32,_o),new wt(4,4,16,16,jn),new wt(8,16,32,32,jn),new wt(8,16,128,128,jn),new wt(8,32,128,256,jn),new wt(32,128,258,1024,jn),new wt(32,258,258,4096,jn)],_p=e=>{e.window_size=2*e.w_size,Kt(e.head),e.max_lazy_match=Ir[e.level].max_lazy,e.good_match=Ir[e.level].good_length,e.nice_match=Ir[e.level].nice_length,e.max_chain_length=Ir[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=H-1,e.match_available=0,e.ins_h=0};function pp(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=La,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(sp*2),this.dyn_dtree=new Uint16Array((2*ap+1)*2),this.bl_tree=new Uint16Array((2*op+1)*2),Kt(this.dyn_ltree),Kt(this.dyn_dtree),Kt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(cp+1),this.heap=new Uint16Array(2*Ho+1),Kt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ho+1),Kt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const vi=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==or&&t.status!==Js&&t.status!==Fo&&t.status!==zo&&t.status!==jo&&t.status!==qo&&t.status!==pn&&t.status!==xr?1:0},Jd=e=>{if(vi(e))return yn(e,Ct);e.total_in=e.total_out=0,e.data_type=Q_;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Js:t.wrap?or:pn,e.adler=t.wrap===2?0:1,t.last_flush=-2,F_(t),fe},Qd=e=>{const t=Jd(e);return t===fe&&_p(e.state),t},yp=(e,t)=>vi(e)||e.state.wrap!==2?Ct:(e.state.gzhead=t,fe),ef=(e,t,n,r,i,a)=>{if(!e)return Ct;let o=1;if(t===K_&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>ep||n!==La||r<8||r>15||t<0||t>9||a<0||a>X_||r===8&&o!==1)return yn(e,Ct);r===8&&(r=9);const s=new pp;return e.state=s,s.strm=e,s.status=or,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+H-1)/H),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=a,s.method=n,Qd(e)},bp=(e,t)=>ef(e,t,La,tp,np,J_),mp=(e,t)=>{if(vi(e)||t>Qc||t<0)return e?yn(e,Ct):Ct;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===xr&&t!==ct)return yn(e,e.avail_out===0?go:Ct);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(Ne(e),e.avail_out===0)return n.last_flush=-1,fe}else if(e.avail_in===0&&tl(t)<=tl(r)&&t!==ct)return yn(e,go);if(n.status===xr&&e.avail_in!==0)return yn(e,go);if(n.status===or&&n.wrap===0&&(n.status=pn),n.status===or){let i=La+(n.w_bits-8<<4)<<8,a=-1;if(n.strategy>=$i||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,i|=a<<6,n.strstart!==0&&(i|=lp),i+=31-i%31,Sr(n,i),n.strstart!==0&&(Sr(n,e.adler>>>16),Sr(n,e.adler&65535)),e.adler=1,n.status=pn,Ne(e),n.pending!==0)return n.last_flush=-1,fe}if(n.status===Js){if(e.adler=0,j(n,31),j(n,139),j(n,8),n.gzhead)j(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),j(n,n.gzhead.time&255),j(n,n.gzhead.time>>8&255),j(n,n.gzhead.time>>16&255),j(n,n.gzhead.time>>24&255),j(n,n.level===9?2:n.strategy>=$i||n.level<2?4:0),j(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(j(n,n.gzhead.extra.length&255),j(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=ae(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Fo;else if(j(n,0),j(n,0),j(n,0),j(n,0),j(n,0),j(n,n.level===9?2:n.strategy>=$i||n.level<2?4:0),j(n,up),n.status=pn,Ne(e),n.pending!==0)return n.last_flush=-1,fe}if(n.status===Fo){if(n.gzhead.extra){let i=n.pending,a=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+a>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=ae(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=s,Ne(e),n.pending!==0)return n.last_flush=-1,fe;i=0,a-=s}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending+=a,n.gzhead.hcrc&&n.pending>i&&(e.adler=ae(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=zo}if(n.status===zo){if(n.gzhead.name){let i=n.pending,a;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=ae(e.adler,n.pending_buf,n.pending-i,i)),Ne(e),n.pending!==0)return n.last_flush=-1,fe;i=0}n.gzindex<n.gzhead.name.length?a=n.gzhead.name.charCodeAt(n.gzindex++)&255:a=0,j(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=ae(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=jo}if(n.status===jo){if(n.gzhead.comment){let i=n.pending,a;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=ae(e.adler,n.pending_buf,n.pending-i,i)),Ne(e),n.pending!==0)return n.last_flush=-1,fe;i=0}n.gzindex<n.gzhead.comment.length?a=n.gzhead.comment.charCodeAt(n.gzindex++)&255:a=0,j(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=ae(e.adler,n.pending_buf,n.pending-i,i))}n.status=qo}if(n.status===qo){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Ne(e),n.pending!==0))return n.last_flush=-1,fe;j(n,e.adler&255),j(n,e.adler>>8&255),e.adler=0}if(n.status=pn,Ne(e),n.pending!==0)return n.last_flush=-1,fe}if(e.avail_in!==0||n.lookahead!==0||t!==tn&&n.status!==xr){let i=n.level===0?Xd(n,t):n.strategy===$i?gp(n,t):n.strategy===W_?hp(n,t):Ir[n.level].func(n,t);if((i===kn||i===yr)&&(n.status=xr),i===Te||i===kn)return e.avail_out===0&&(n.last_flush=-1),fe;if(i===pr&&(t===q_?j_(n):t!==Qc&&(Mo(n,0,0,!1),t===Y_&&(Kt(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Ne(e),e.avail_out===0))return n.last_flush=-1,fe}return t!==ct?fe:n.wrap<=0?el:(n.wrap===2?(j(n,e.adler&255),j(n,e.adler>>8&255),j(n,e.adler>>16&255),j(n,e.adler>>24&255),j(n,e.total_in&255),j(n,e.total_in>>8&255),j(n,e.total_in>>16&255),j(n,e.total_in>>24&255)):(Sr(n,e.adler>>>16),Sr(n,e.adler&65535)),Ne(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?fe:el)},wp=e=>{if(vi(e))return Ct;const t=e.state.status;return e.state=null,t===pn?yn(e,Z_):fe},Ep=(e,t)=>{let n=t.length;if(vi(e))return Ct;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==or||r.lookahead)return Ct;if(i===1&&(e.adler=ni(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(Kt(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,sr(r);r.lookahead>=H;){let l=r.strstart,c=r.lookahead-(H-1);do r.ins_h=nn(r,r.ins_h,r.window[l+H-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--c);r.strstart=l,r.lookahead=H-1,sr(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=H-1,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,fe};var Ap=bp,Tp=ef,Sp=Qd,vp=Jd,xp=yp,Ip=mp,kp=wp,Cp=Ep,Bp="pako deflate (from Nodeca project)",Yr={deflateInit:Ap,deflateInit2:Tp,deflateReset:Sp,deflateResetKeep:vp,deflateSetHeader:xp,deflate:Ip,deflateEnd:kp,deflateSetDictionary:Cp,deflateInfo:Bp};const Np=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Rp=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)Np(n,r)&&(e[r]=n[r])}}return e},Op=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,a=e.length;r<a;r++){let o=e[r];n.set(o,i),i+=o.length}return n},Pa={assign:Rp,flattenChunks:Op};let tf=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{tf=!1}const ri=new Uint8Array(256);for(let e=0;e<256;e++)ri[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ri[254]=ri[254]=1;var Dp=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t};const Lp=(e,t)=>{if(t<65534&&e.subarray&&tf)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var Pp=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const a=new Array(n*2);for(i=0,r=0;r<n;){let o=e[r++];if(o<128){a[i++]=o;continue}let s=ri[o];if(s>4){a[i++]=65533,r+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&r<n;)o=o<<6|e[r++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return Lp(a,i)},Up=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+ri[e[n]]>t?n:t},ii={string2buf:Dp,buf2string:Pp,utf8border:Up};function $p(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var nf=$p;const rf=Object.prototype.toString,{Z_NO_FLUSH:Vp,Z_SYNC_FLUSH:Mp,Z_FULL_FLUSH:Hp,Z_FINISH:Fp,Z_OK:ca,Z_STREAM_END:zp,Z_DEFAULT_COMPRESSION:jp,Z_DEFAULT_STRATEGY:qp,Z_DEFLATED:Yp}=Da;function Ua(e){this.options=Pa.assign({level:jp,method:Yp,chunkSize:16384,windowBits:15,memLevel:8,strategy:qp},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nf,this.strm.avail_out=0;let n=Yr.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==ca)throw new Error(In[n]);if(t.header&&Yr.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=ii.string2buf(t.dictionary):rf.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=Yr.deflateSetDictionary(this.strm,r),n!==ca)throw new Error(In[n]);this._dict_set=!0}}Ua.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?Fp:Vp,typeof e=="string"?n.input=ii.string2buf(e):rf.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===Mp||a===Hp)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=Yr.deflate(n,a),i===zp)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Yr.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===ca;if(n.avail_out===0){this.onData(n.output);continue}if(a>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Ua.prototype.onData=function(e){this.chunks.push(e)};Ua.prototype.onEnd=function(e){e===ca&&(this.result=Pa.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Zp(e,t){const n=new Ua(t);if(n.push(e,!0),n.err)throw n.msg||In[n.err];return n.result}function Kp(e,t){return t=t||{},t.gzip=!0,Zp(e,t)}var Gp=Kp,Wp={gzip:Gp};const Vi=16209,Xp=16191;var Jp=function(t,n){let r,i,a,o,s,l,c,u,h,d,f,_,y,g,p,A,E,b,C,N,T,k,v,R;const O=t.state;r=t.next_in,v=t.input,i=r+(t.avail_in-5),a=t.next_out,R=t.output,o=a-(n-t.avail_out),s=a+(t.avail_out-257),l=O.dmax,c=O.wsize,u=O.whave,h=O.wnext,d=O.window,f=O.hold,_=O.bits,y=O.lencode,g=O.distcode,p=(1<<O.lenbits)-1,A=(1<<O.distbits)-1;e:do{_<15&&(f+=v[r++]<<_,_+=8,f+=v[r++]<<_,_+=8),E=y[f&p];t:for(;;){if(b=E>>>24,f>>>=b,_-=b,b=E>>>16&255,b===0)R[a++]=E&65535;else if(b&16){C=E&65535,b&=15,b&&(_<b&&(f+=v[r++]<<_,_+=8),C+=f&(1<<b)-1,f>>>=b,_-=b),_<15&&(f+=v[r++]<<_,_+=8,f+=v[r++]<<_,_+=8),E=g[f&A];n:for(;;){if(b=E>>>24,f>>>=b,_-=b,b=E>>>16&255,b&16){if(N=E&65535,b&=15,_<b&&(f+=v[r++]<<_,_+=8,_<b&&(f+=v[r++]<<_,_+=8)),N+=f&(1<<b)-1,N>l){t.msg="invalid distance too far back",O.mode=Vi;break e}if(f>>>=b,_-=b,b=a-o,N>b){if(b=N-b,b>u&&O.sane){t.msg="invalid distance too far back",O.mode=Vi;break e}if(T=0,k=d,h===0){if(T+=c-b,b<C){C-=b;do R[a++]=d[T++];while(--b);T=a-N,k=R}}else if(h<b){if(T+=c+h-b,b-=h,b<C){C-=b;do R[a++]=d[T++];while(--b);if(T=0,h<C){b=h,C-=b;do R[a++]=d[T++];while(--b);T=a-N,k=R}}}else if(T+=h-b,b<C){C-=b;do R[a++]=d[T++];while(--b);T=a-N,k=R}for(;C>2;)R[a++]=k[T++],R[a++]=k[T++],R[a++]=k[T++],C-=3;C&&(R[a++]=k[T++],C>1&&(R[a++]=k[T++]))}else{T=a-N;do R[a++]=R[T++],R[a++]=R[T++],R[a++]=R[T++],C-=3;while(C>2);C&&(R[a++]=R[T++],C>1&&(R[a++]=R[T++]))}}else if((b&64)===0){E=g[(E&65535)+(f&(1<<b)-1)];continue n}else{t.msg="invalid distance code",O.mode=Vi;break e}break}}else if((b&64)===0){E=y[(E&65535)+(f&(1<<b)-1)];continue t}else if(b&32){O.mode=Xp;break e}else{t.msg="invalid literal/length code",O.mode=Vi;break e}break}}while(r<i&&a<s);C=_>>3,r-=C,_-=C<<3,f&=(1<<_)-1,t.next_in=r,t.next_out=a,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=a<s?257+(s-a):257-(a-s),O.hold=f,O.bits=_};const qn=15,nl=852,rl=592,il=0,po=1,al=2,Qp=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ey=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ty=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ny=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),ry=(e,t,n,r,i,a,o,s)=>{const l=s.bits;let c=0,u=0,h=0,d=0,f=0,_=0,y=0,g=0,p=0,A=0,E,b,C,N,T,k=null,v;const R=new Uint16Array(qn+1),O=new Uint16Array(qn+1);let $=null,Q,I,D;for(c=0;c<=qn;c++)R[c]=0;for(u=0;u<r;u++)R[t[n+u]]++;for(f=l,d=qn;d>=1&&R[d]===0;d--);if(f>d&&(f=d),d===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(h=1;h<d&&R[h]===0;h++);for(f<h&&(f=h),g=1,c=1;c<=qn;c++)if(g<<=1,g-=R[c],g<0)return-1;if(g>0&&(e===il||d!==1))return-1;for(O[1]=0,c=1;c<qn;c++)O[c+1]=O[c]+R[c];for(u=0;u<r;u++)t[n+u]!==0&&(o[O[t[n+u]]++]=u);if(e===il?(k=$=o,v=20):e===po?(k=Qp,$=ey,v=257):(k=ty,$=ny,v=0),A=0,u=0,c=h,T=a,_=f,y=0,C=-1,p=1<<f,N=p-1,e===po&&p>nl||e===al&&p>rl)return 1;for(;;){Q=c-y,o[u]+1<v?(I=0,D=o[u]):o[u]>=v?(I=$[o[u]-v],D=k[o[u]-v]):(I=96,D=0),E=1<<c-y,b=1<<_,h=b;do b-=E,i[T+(A>>y)+b]=Q<<24|I<<16|D|0;while(b!==0);for(E=1<<c-1;A&E;)E>>=1;if(E!==0?(A&=E-1,A+=E):A=0,u++,--R[c]===0){if(c===d)break;c=t[n+o[u]]}if(c>f&&(A&N)!==C){for(y===0&&(y=f),T+=h,_=c-y,g=1<<_;_+y<d&&(g-=R[_+y],!(g<=0));)_++,g<<=1;if(p+=1<<_,e===po&&p>nl||e===al&&p>rl)return 1;C=A&N,i[C]=f<<24|_<<16|T-a|0}}return A!==0&&(i[T+A]=c-y<<24|64<<16|0),s.bits=f,0};var Zr=ry;const iy=0,af=1,of=2,{Z_FINISH:ol,Z_BLOCK:ay,Z_TREES:Mi,Z_OK:Cn,Z_STREAM_END:oy,Z_NEED_DICT:sy,Z_STREAM_ERROR:lt,Z_DATA_ERROR:sf,Z_MEM_ERROR:cf,Z_BUF_ERROR:cy,Z_DEFLATED:sl}=Da,$a=16180,cl=16181,ll=16182,ul=16183,dl=16184,fl=16185,hl=16186,gl=16187,_l=16188,pl=16189,la=16190,Dt=16191,yo=16192,yl=16193,bo=16194,bl=16195,ml=16196,wl=16197,El=16198,Hi=16199,Fi=16200,Al=16201,Tl=16202,Sl=16203,vl=16204,xl=16205,mo=16206,Il=16207,kl=16208,X=16209,lf=16210,uf=16211,ly=852,uy=592,dy=15,fy=dy,Cl=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function hy(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Dn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<$a||t.mode>uf?1:0},df=e=>{if(Dn(e))return lt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=$a,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ly),t.distcode=t.distdyn=new Int32Array(uy),t.sane=1,t.back=-1,Cn},ff=e=>{if(Dn(e))return lt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,df(e)},hf=(e,t)=>{let n;if(Dn(e))return lt;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?lt:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,ff(e))},gf=(e,t)=>{if(!e)return lt;const n=new hy;e.state=n,n.strm=e,n.window=null,n.mode=$a;const r=hf(e,t);return r!==Cn&&(e.state=null),r},gy=e=>gf(e,fy);let Bl=!0,wo,Eo;const _y=e=>{if(Bl){wo=new Int32Array(512),Eo=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Zr(af,e.lens,0,288,wo,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Zr(of,e.lens,0,32,Eo,0,e.work,{bits:5}),Bl=!1}e.lencode=wo,e.lenbits=9,e.distcode=Eo,e.distbits=5},_f=(e,t,n,r)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},py=(e,t)=>{let n,r,i,a,o,s,l,c,u,h,d,f,_,y,g=0,p,A,E,b,C,N,T,k;const v=new Uint8Array(4);let R,O;const $=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Dn(e)||!e.output||!e.input&&e.avail_in!==0)return lt;n=e.state,n.mode===Dt&&(n.mode=yo),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,h=s,d=l,k=Cn;e:for(;;)switch(n.mode){case $a:if(n.wrap===0){n.mode=yo;break}for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,v[0]=c&255,v[1]=c>>>8&255,n.check=ae(n.check,v,2,0),c=0,u=0,n.mode=cl;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=X;break}if((c&15)!==sl){e.msg="unknown compression method",n.mode=X;break}if(c>>>=4,u-=4,T=(c&15)+8,n.wbits===0&&(n.wbits=T),T>15||T>n.wbits){e.msg="invalid window size",n.mode=X;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=c&512?pl:Dt,c=0,u=0;break;case cl:for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==sl){e.msg="unknown compression method",n.mode=X;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=X;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(v[0]=c&255,v[1]=c>>>8&255,n.check=ae(n.check,v,2,0)),c=0,u=0,n.mode=ll;case ll:for(;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(v[0]=c&255,v[1]=c>>>8&255,v[2]=c>>>16&255,v[3]=c>>>24&255,n.check=ae(n.check,v,4,0)),c=0,u=0,n.mode=ul;case ul:for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(v[0]=c&255,v[1]=c>>>8&255,n.check=ae(n.check,v,2,0)),c=0,u=0,n.mode=dl;case dl:if(n.flags&1024){for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(v[0]=c&255,v[1]=c>>>8&255,n.check=ae(n.check,v,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=fl;case fl:if(n.flags&1024&&(f=n.length,f>s&&(f=s),f&&(n.head&&(T=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+f),T)),n.flags&512&&n.wrap&4&&(n.check=ae(n.check,r,f,a)),s-=f,a+=f,n.length-=f),n.length))break e;n.length=0,n.mode=hl;case hl:if(n.flags&2048){if(s===0)break e;f=0;do T=r[a+f++],n.head&&T&&n.length<65536&&(n.head.name+=String.fromCharCode(T));while(T&&f<s);if(n.flags&512&&n.wrap&4&&(n.check=ae(n.check,r,f,a)),s-=f,a+=f,T)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=gl;case gl:if(n.flags&4096){if(s===0)break e;f=0;do T=r[a+f++],n.head&&T&&n.length<65536&&(n.head.comment+=String.fromCharCode(T));while(T&&f<s);if(n.flags&512&&n.wrap&4&&(n.check=ae(n.check,r,f,a)),s-=f,a+=f,T)break e}else n.head&&(n.head.comment=null);n.mode=_l;case _l:if(n.flags&512){for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(n.wrap&4&&c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=X;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Dt;break;case pl:for(;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}e.adler=n.check=Cl(c),c=0,u=0,n.mode=la;case la:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=u,sy;e.adler=n.check=1,n.mode=Dt;case Dt:if(t===ay||t===Mi)break e;case yo:if(n.last){c>>>=u&7,u-=u&7,n.mode=mo;break}for(;u<3;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=yl;break;case 1:if(_y(n),n.mode=Hi,t===Mi){c>>>=2,u-=2;break e}break;case 2:n.mode=ml;break;case 3:e.msg="invalid block type",n.mode=X}c>>>=2,u-=2;break;case yl:for(c>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=X;break}if(n.length=c&65535,c=0,u=0,n.mode=bo,t===Mi)break e;case bo:n.mode=bl;case bl:if(f=n.length,f){if(f>s&&(f=s),f>l&&(f=l),f===0)break e;i.set(r.subarray(a,a+f),o),s-=f,a+=f,l-=f,o+=f,n.length-=f;break}n.mode=Dt;break;case ml:for(;u<14;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=X;break}n.have=0,n.mode=wl;case wl:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.lens[$[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[$[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},k=Zr(iy,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,k){e.msg="invalid code lengths set",n.mode=X;break}n.have=0,n.mode=El;case El:for(;n.have<n.nlen+n.ndist;){for(;g=n.lencode[c&(1<<n.lenbits)-1],p=g>>>24,A=g>>>16&255,E=g&65535,!(p<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(E<16)c>>>=p,u-=p,n.lens[n.have++]=E;else{if(E===16){for(O=p+2;u<O;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(c>>>=p,u-=p,n.have===0){e.msg="invalid bit length repeat",n.mode=X;break}T=n.lens[n.have-1],f=3+(c&3),c>>>=2,u-=2}else if(E===17){for(O=p+3;u<O;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=p,u-=p,T=0,f=3+(c&7),c>>>=3,u-=3}else{for(O=p+7;u<O;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=p,u-=p,T=0,f=11+(c&127),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=X;break}for(;f--;)n.lens[n.have++]=T}}if(n.mode===X)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=X;break}if(n.lenbits=9,R={bits:n.lenbits},k=Zr(af,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,k){e.msg="invalid literal/lengths set",n.mode=X;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},k=Zr(of,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,k){e.msg="invalid distances set",n.mode=X;break}if(n.mode=Hi,t===Mi)break e;case Hi:n.mode=Fi;case Fi:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=u,Jp(e,d),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===Dt&&(n.back=-1);break}for(n.back=0;g=n.lencode[c&(1<<n.lenbits)-1],p=g>>>24,A=g>>>16&255,E=g&65535,!(p<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(A&&(A&240)===0){for(b=p,C=A,N=E;g=n.lencode[N+((c&(1<<b+C)-1)>>b)],p=g>>>24,A=g>>>16&255,E=g&65535,!(b+p<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=p,u-=p,n.back+=p,n.length=E,A===0){n.mode=xl;break}if(A&32){n.back=-1,n.mode=Dt;break}if(A&64){e.msg="invalid literal/length code",n.mode=X;break}n.extra=A&15,n.mode=Al;case Al:if(n.extra){for(O=n.extra;u<O;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Tl;case Tl:for(;g=n.distcode[c&(1<<n.distbits)-1],p=g>>>24,A=g>>>16&255,E=g&65535,!(p<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if((A&240)===0){for(b=p,C=A,N=E;g=n.distcode[N+((c&(1<<b+C)-1)>>b)],p=g>>>24,A=g>>>16&255,E=g&65535,!(b+p<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=p,u-=p,n.back+=p,A&64){e.msg="invalid distance code",n.mode=X;break}n.offset=E,n.extra=A&15,n.mode=Sl;case Sl:if(n.extra){for(O=n.extra;u<O;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=X;break}n.mode=vl;case vl:if(l===0)break e;if(f=d-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=X;break}f>n.wnext?(f-=n.wnext,_=n.wsize-f):_=n.wnext-f,f>n.length&&(f=n.length),y=n.window}else y=i,_=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do i[o++]=y[_++];while(--f);n.length===0&&(n.mode=Fi);break;case xl:if(l===0)break e;i[o++]=n.length,l--,n.mode=Fi;break;case mo:if(n.wrap){for(;u<32;){if(s===0)break e;s--,c|=r[a++]<<u,u+=8}if(d-=l,e.total_out+=d,n.total+=d,n.wrap&4&&d&&(e.adler=n.check=n.flags?ae(n.check,i,d,o-d):ni(n.check,i,d,o-d)),d=l,n.wrap&4&&(n.flags?c:Cl(c))!==n.check){e.msg="incorrect data check",n.mode=X;break}c=0,u=0}n.mode=Il;case Il:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(n.wrap&4&&c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=X;break}c=0,u=0}n.mode=kl;case kl:k=oy;break e;case X:k=sf;break e;case lf:return cf;case uf:default:return lt}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||d!==e.avail_out&&n.mode<X&&(n.mode<mo||t!==ol))&&_f(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,n.total+=d,n.wrap&4&&d&&(e.adler=n.check=n.flags?ae(n.check,i,d,e.next_out-d):ni(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Dt?128:0)+(n.mode===Hi||n.mode===bo?256:0),(h===0&&d===0||t===ol)&&k===Cn&&(k=cy),k},yy=e=>{if(Dn(e))return lt;let t=e.state;return t.window&&(t.window=null),e.state=null,Cn},by=(e,t)=>{if(Dn(e))return lt;const n=e.state;return(n.wrap&2)===0?lt:(n.head=t,t.done=!1,Cn)},my=(e,t)=>{const n=t.length;let r,i,a;return Dn(e)||(r=e.state,r.wrap!==0&&r.mode!==la)?lt:r.mode===la&&(i=1,i=ni(i,t,n,0),i!==r.check)?sf:(a=_f(e,t,n,n),a?(r.mode=lf,cf):(r.havedict=1,Cn))};var wy=ff,Ey=hf,Ay=df,Ty=gy,Sy=gf,vy=py,xy=yy,Iy=by,ky=my,Cy="pako inflate (from Nodeca project)",Ut={inflateReset:wy,inflateReset2:Ey,inflateResetKeep:Ay,inflateInit:Ty,inflateInit2:Sy,inflate:vy,inflateEnd:xy,inflateGetHeader:Iy,inflateSetDictionary:ky,inflateInfo:Cy};function By(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Ny=By;const pf=Object.prototype.toString,{Z_NO_FLUSH:Ry,Z_FINISH:Oy,Z_OK:ai,Z_STREAM_END:Ao,Z_NEED_DICT:To,Z_STREAM_ERROR:Dy,Z_DATA_ERROR:Nl,Z_MEM_ERROR:Ly}=Da;function Va(e){this.options=Pa.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new nf,this.strm.avail_out=0;let n=Ut.inflateInit2(this.strm,t.windowBits);if(n!==ai)throw new Error(In[n]);if(this.header=new Ny,Ut.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=ii.string2buf(t.dictionary):pf.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ut.inflateSetDictionary(this.strm,t.dictionary),n!==ai)))throw new Error(In[n])}Va.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?Oy:Ry,pf.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Ut.inflate(n,o),a===To&&i&&(a=Ut.inflateSetDictionary(n,i),a===ai?a=Ut.inflate(n,o):a===Nl&&(a=To));n.avail_in>0&&a===Ao&&n.state.wrap>0&&e[n.next_in]!==0;)Ut.inflateReset(n),a=Ut.inflate(n,o);switch(a){case Dy:case Nl:case To:case Ly:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||a===Ao))if(this.options.to==="string"){let l=ii.utf8border(n.output,n.next_out),c=n.next_out-l,u=ii.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===ai&&s===0)){if(a===Ao)return a=Ut.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Va.prototype.onData=function(e){this.chunks.push(e)};Va.prototype.onEnd=function(e){e===ai&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Pa.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Py(e,t){const n=new Va(t);if(n.push(e),n.err)throw n.msg||In[n.err];return n.result}var Uy=Py,$y={ungzip:Uy};const{gzip:Vy}=Wp,{ungzip:My}=$y;var Hy=Vy,Fy=My;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yf=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Rl=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),zy=BigInt(1),Zo=BigInt(2),Ol=(e,t)=>(e+t/Zo)/t;function jy(e){const t=yf,n=BigInt(3),r=BigInt(6),i=BigInt(11),a=BigInt(22),o=BigInt(23),s=BigInt(44),l=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=je(u,n,t)*u%t,d=je(h,n,t)*u%t,f=je(d,Zo,t)*c%t,_=je(f,i,t)*f%t,y=je(_,a,t)*_%t,g=je(y,s,t)*y%t,p=je(g,l,t)*g%t,A=je(p,s,t)*y%t,E=je(A,n,t)*u%t,b=je(E,o,t)*_%t,C=je(b,r,t)*c%t,N=je(C,Zo,t);if(!Ko.eql(Ko.sqr(N),e))throw new Error("Cannot find square root");return N}const Ko=Ra(yf,void 0,void 0,{sqrt:jy}),bf=Gg({a:BigInt(0),b:BigInt(7),Fp:Ko,n:Rl,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Rl,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-zy*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=n,o=BigInt("0x100000000000000000000000000000000"),s=Ol(a*e,t),l=Ol(-r*e,t);let c=he(e-s*n-l*i,t),u=he(-s*r-l*a,t);const h=c>o,d=u>o;if(h&&(c=t-c),d&&(u=t-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:c,k2neg:d,k2:u}}}},Ei);BigInt(0);bf.ProjectivePoint;const mf=(e,t,n=[])=>{const r=Object.getOwnPropertyDescriptors(t);for(let i of n)delete r[i];Object.defineProperties(e,r)},oi=(e,t=[e])=>{const n=Object.getPrototypeOf(e);return n===null?t:oi(n,[...t,n])},qy=(...e)=>{if(e.length===0)return;let t;const n=e.map(r=>oi(r));for(;n.every(r=>r.length>0);){const r=n.map(a=>a.pop()),i=r[0];if(r.every(a=>a===i))t=i;else break}return t},Dl=(e,t,n=[])=>{var r;const i=(r=qy(...e))!==null&&r!==void 0?r:Object.prototype,a=Object.create(i),o=oi(i);for(let s of e){let l=oi(s);for(let c=l.length-1;c>=0;c--){let u=l[c];o.indexOf(u)===-1&&(mf(a,u,["constructor",...n]),o.push(u))}}return a.constructor=t,a},Go=e=>e.filter((t,n)=>e.indexOf(t)==n),wf=new WeakMap,Yy=e=>wf.get(e),Zy=(e,t)=>wf.set(e,t),Ll=(e,t)=>{var n,r;const i=Go([...Object.getOwnPropertyNames(e),...Object.getOwnPropertyNames(t)]),a={};for(let o of i)a[o]=Go([...(n=e==null?void 0:e[o])!==null&&n!==void 0?n:[],...(r=t==null?void 0:t[o])!==null&&r!==void 0?r:[]]);return a},Pl=(e,t)=>{var n,r,i,a;return{property:Ll((n=e==null?void 0:e.property)!==null&&n!==void 0?n:{},(r=t==null?void 0:t.property)!==null&&r!==void 0?r:{}),method:Ll((i=e==null?void 0:e.method)!==null&&i!==void 0?i:{},(a=t==null?void 0:t.method)!==null&&a!==void 0?a:{})}},Ky=(e,t)=>{var n,r,i,a,o,s;return{class:Go([...(n=e==null?void 0:e.class)!==null&&n!==void 0?n:[],...(r=t==null?void 0:t.class)!==null&&r!==void 0?r:[]]),static:Pl((i=e==null?void 0:e.static)!==null&&i!==void 0?i:{},(a=t==null?void 0:t.static)!==null&&a!==void 0?a:{}),instance:Pl((o=e==null?void 0:e.instance)!==null&&o!==void 0?o:{},(s=t==null?void 0:t.instance)!==null&&s!==void 0?s:{})}},Gy=new Map,Wy=(...e)=>{var t;const n=new Set,r=new Set([...e]);for(;r.size>0;)for(let i of r){const a=oi(i.prototype).map(c=>c.constructor),o=(t=Yy(i))!==null&&t!==void 0?t:[],l=[...a,...o].filter(c=>!n.has(c));for(let c of l)r.add(c);n.add(i),r.delete(i)}return[...n]},Xy=(...e)=>{const t=Wy(...e).map(n=>Gy.get(n)).filter(n=>!!n);return t.length==0?{}:t.length==1?t[0]:t.reduce((n,r)=>Ky(n,r))};function Jy(...e){var t,n,r;const i=e.map(s=>s.prototype);function a(...s){for(const l of e)mf(this,new l(...s))}a.prototype=Dl(i,a),Object.setPrototypeOf(a,Dl(e,null,["prototype"]));let o=a;{const s=Xy(...e);for(let l of(t=s==null?void 0:s.class)!==null&&t!==void 0?t:[]){const c=l(o);c&&(o=c)}Ul((n=s==null?void 0:s.static)!==null&&n!==void 0?n:{},o),Ul((r=s==null?void 0:s.instance)!==null&&r!==void 0?r:{},o.prototype)}return Zy(o,e),o}const Ul=(e,t)=>{const n=e.property,r=e.method;if(n)for(let i in n)for(let a of n[i])a(t,i);if(r)for(let i in r)for(let a of r[i])a(t,i,Object.getOwnPropertyDescriptor(t,i))};var Ef=Object.defineProperty,Qy=Object.getOwnPropertyDescriptor,eb=Object.getOwnPropertyNames,tb=Object.prototype.hasOwnProperty,K=(e,t)=>{for(var n in t)Ef(e,n,{get:t[n],enumerable:!0})},nb=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of eb(t))!tb.call(e,i)&&i!==n&&Ef(e,i,{get:()=>t[i],enumerable:!(r=Qy(t,i))||r.enumerable});return e},Af=(e,t,n)=>(nb(e,t,"default"),n),rb={};K(rb,{ADDR_BOUND:()=>tc,API_VERSION:()=>Lf,BaseUrl:()=>bb,DEFAULT_GLOBAL_CONFIG:()=>Uf,HARDENING_4BYTES:()=>yb,HARDENING_BYTE:()=>pb,IS_BROWSER:()=>Sf,LegacyUDC:()=>db,MASK_250:()=>Of,MASK_31:()=>Df,MAX_STORAGE_ITEM_SIZE:()=>Pf,NetworkName:()=>mr,OutsideExecutionCallerAny:()=>hb,PAYMASTER_RPC_NODES:()=>Vf,PRIME:()=>re,RANGE_FELT:()=>ua,RANGE_I128:()=>Wn,RANGE_I16:()=>Dr,RANGE_I32:()=>Lr,RANGE_I64:()=>Pr,RANGE_I8:()=>Or,RANGE_U128:()=>Gn,RANGE_U16:()=>Br,RANGE_U32:()=>ub,RANGE_U64:()=>Nr,RANGE_U8:()=>Cr,RANGE_U96:()=>Rr,RPC_DEFAULT_NODES:()=>$f,SNIP9_V1_INTERFACE_ID:()=>gb,SNIP9_V2_INTERFACE_ID:()=>_b,SYSTEM_MESSAGES:()=>ie,StarknetChainId:()=>Ce,SupportedRpcVersion:()=>rn,TEXT_TO_FELT_MAX_LEN:()=>ec,TransactionHashPrefix:()=>cn,UDC:()=>fb,ZERO:()=>Ie});var U={};K(U,{JRPC:()=>ib,PAYMASTER_API:()=>vu,RPCSPEC08:()=>Es,RPCSPEC09:()=>gr});var ib={},Tf={};Af(Tf,gr);Af(U,Tf);var ab={};K(ab,{IS_BROWSER:()=>Sf,addHexPrefix:()=>L,arrayBufferToString:()=>vf,atobUniversal:()=>xf,bigIntToUint8Array:()=>le,btoaUniversal:()=>If,buf2hex:()=>br,calcByteLength:()=>Cf,concatenateArrayBuffer:()=>kr,hexStringToUint8Array:()=>Rf,padLeft:()=>kf,pascalToSnake:()=>sb,removeHexPrefix:()=>ye,sanitizeBytes:()=>Bf,sanitizeHex:()=>Nf,stringToUint8Array:()=>Ha,uint8ArrayToBigInt:()=>si,utf8ToArray:()=>Bn,utf8ToBigInt:()=>dt,utf8ToUint8Array:()=>Ma});var Sf=typeof window<"u",Qs="0";function vf(e){return new Uint8Array(e).reduce((t,n)=>t+String.fromCharCode(n),"")}function Ma(e){return new TextEncoder().encode(e)}var Bn=Ma;function dt(e){return si(Ma(e))}function xf(e){return Wu.decode(e)}function If(e){return Wu.encode(new Uint8Array(e))}function br(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function ye(e){return e.replace(/^0x/i,"")}function L(e){return`0x${ye(e)}`}function ob(e,t,n,r=Qs){const i=t-e.length;let a=e;return i>0&&(a=r.repeat(i)+e),a}function kf(e,t,n=Qs){return ob(e,t,!0,n)}function Cf(e,t=8){const{length:n}=e,r=n%t;return r?(n-r)/t*t+t:n}function Bf(e,t=8,n=Qs){return kf(e,Cf(e,t),n)}function Nf(e){const t=ye(e),n=Bf(t,2);return n&&L(n)}var sb=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function kr(e){const t=e.reduce((i,a)=>i+a.byteLength,0),n=new Uint8Array(t);let r=0;return e.forEach(i=>{n.set(i,r),r+=i.byteLength}),n}function Rf(e){const t=e.startsWith("0x")?e.slice(2):e;if(t.length>0&&!/^[0-9a-fA-F]+$/.test(t))throw new Error(`Invalid hex string: "${e}" contains non-hexadecimal characters`);const n=t.length%2!==0?`0${t}`:t,r=new Uint8Array(n.length/2);for(let i=0;i<n.length;i+=2)r[i/2]=parseInt(n.substring(i,i+2),16);return r}function cb(e){return/^0[xX][0-9a-fA-F]*$/.test(e)}function lb(e){return/^[0-9]+$/.test(e)}function Ha(e){if(cb(e))return Rf(e);if(lb(e)){const t=BigInt(e);return le(t)}return Ma(e)}function le(e){if(e<0n)throw new Error(`Cannot convert negative bigint ${e} to Uint8Array`);if(e===0n)return new Uint8Array([0]);let t=e.toString(16);t.length%2!==0&&(t=`0${t}`);const n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r/2]=parseInt(t.substring(r,r+2),16);return n}function si(e){if(!e||e.length===0)return 0n;let t="0x";for(let n=0;n<e.length;n+=1)t+=e[n].toString(16).padStart(2,"0");return BigInt(t)}var ec=31,Ie=0n,Of=2n**250n-1n,Df=2n**31n-1n,Lf=Ie,re=2n**251n+17n*2n**192n+1n,Pf=256n,tc=2n**251n-Pf,ft=(e,t)=>({min:e,max:t}),ua=ft(Ie,re-1n),Cr=ft(Ie,2n**8n-1n),Br=ft(Ie,2n**16n-1n),ub=ft(Ie,2n**32n-1n),Nr=ft(Ie,2n**64n-1n),Rr=ft(Ie,2n**96n-1n),Gn=ft(Ie,2n**128n-1n),Or=ft(-(2n**7n),2n**7n-1n),Dr=ft(-(2n**15n),2n**15n-1n),Lr=ft(-(2n**31n),2n**31n-1n),Pr=ft(-(2n**63n),2n**63n-1n),Wn=ft(-(2n**127n),2n**127n-1n),db={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},fb={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},hb="0x414e595f43414c4c4552",gb="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",_b="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",pb=128,yb=2147483648n,bb={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},mr={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},Ce={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},cn={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},rn={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},Uf={rpcVersion:"0.9.0",transactionVersion:U.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0},$f={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},Vf={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},ie={legacyTxWarningMessage:`You are using a deprecated transaction version (V0,V1,V2)!
Update to the latest V3 transactions!`,legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},It,mb=(It=class{constructor(){w(this,"config");this.initialize()}initialize(){this.config={...Uf}}static getInstance(){return It.instance||(It.instance=new It),It.instance}get(t,n){return this.config[t]??n}set(t,n){this.config[t]=n}update(t){this.config={...this.config,...t}}getAll(){return{...this.config}}reset(){this.initialize()}delete(t){delete this.config[t]}hasKey(t){return t in this.config}},w(It,"instance"),It),Rt=mb.getInstance(),zi={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},kt,wb=(kt=class{constructor(){w(this,"config");this.config=Rt}static getInstance(){return kt.instance||(kt.instance=new kt),kt.instance}getTimestamp(){return new Date().toISOString()}shouldLog(t){const n=this.config.get("logLevel","INFO");return t<=zi[n]}formatMessage(t){const{level:n,message:r,timestamp:i,data:a}=t;let o=`[${i}] ${n}: ${r}`;if(a)try{o+=`
${JSON.stringify(a,null,2)}`}catch(s){o+=`
[JSON.stringify Error/Circular]: ${s}`}return o}log(t,n,r){if(!this.shouldLog(zi[t]))return;const i={level:t,message:n,timestamp:this.getTimestamp(),data:r},a=this.formatMessage(i);switch(t){case"DEBUG":console.debug(a);break;case"INFO":console.info(a);break;case"WARN":console.warn(a);break;case"ERROR":case"FATAL":console.error(a);break;case"OFF":break;default:console.log(a);break}}debug(t,n){this.log("DEBUG",t,n)}info(t,n){this.log("INFO",t,n)}warn(t,n){this.log("WARN",t,n)}error(t,n){this.log("ERROR",t,n)}fatal(t,n){this.log("FATAL",t,n)}setLogLevel(t){this.config.set("logLevel",t)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(zi).filter(t=>this.shouldLog(zi[t])&&t!=="OFF")}},w(kt,"instance"),kt),pe=wb.getInstance(),Ur={};K(Ur,{RpcChannel:()=>g1});var{ETransactionVersion:Oe}=gr,{ETransactionVersion3:Eb}=gr,{EDataAvailabilityMode:da}=Es,{EDAMode:$l}=Es;function Ki(e){return"l1_data_gas"in e}var{ETransactionExecutionStatus:fa}=gr,{EBlockTag:Mt}=gr,ji={DEPLOY:"DEPLOY",INVOKE:"INVOKE"},Re={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},Ab={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},bn={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},Tb="core::starknet::eth_address::EthAddress",Sb="core::zeroable::NonZero::",vb={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},xb={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},Vl={V1:"1",V2:"2"},Ib={};K(Ib,{parse:()=>Ln,parseAlwaysAsBig:()=>Cb,stringify:()=>ut});var kb=e=>{if(!yi(e))return parseFloat(e);const t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},Ln=e=>Ju(String(e),void 0,kb),Cb=e=>Ju(String(e),void 0,E0),ut=(e,t,n,r)=>Qu(e,t,n,r),Mf=class{constructor(e){w(this,"nodeUrl");w(this,"headers");w(this,"interval");w(this,"requestId",0);w(this,"pendingRequests",{});w(this,"batchPromises",{});w(this,"delayTimer");w(this,"delayPromise");w(this,"delayPromiseResolve");w(this,"baseFetch");w(this,"rpcMethods");this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch,this.rpcMethods=e.rpcMethods}async wait(){return(!this.delayPromise||!this.delayPromiseResolve)&&(this.delayPromise=new Promise(e=>{this.delayPromiseResolve=e})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(e,t,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:e.description||String(e),params:t??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:ut(e),headers:this.headers})).json()}async fetch(e,t,n){const r=this.addPendingRequest(e,t,n);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const s=this.sendBatch(Object.values(i));Object.keys(i).forEach(l=>{this.batchPromises[l]=s})}const a=await this.batchPromises[r];delete this.batchPromises[r];const o=a.find(s=>s.id===r);if(!o)throw new Error(`Couldn't find the result for the request. Method: ${String(e)}`);return o}};function m(e,t){if(!e)throw new Error(t||"Assertion failure")}var Bb={};K(Bb,{addPercent:()=>Pe,assertInRange:()=>rc,bigNumberishArrayToDecimalStringArray:()=>zf,bigNumberishArrayToHexadecimalStringArray:()=>cr,cleanHex:()=>Lb,getDecimalString:()=>Pb,getHexString:()=>jf,getHexStringArray:()=>ic,getNext:()=>z,hexToBytes:()=>Fa,hexToDecimalString:()=>Ff,isBigNumberish:()=>Nn,isHex:()=>Fe,isHexString:()=>Rb,isStringWholeNumber:()=>Pn,stringToSha256ToArrayBuff4:()=>$b,toBigInt:()=>He,toCairoBool:()=>Ub,toHex:()=>S,toHex64:()=>Db,toHexString:()=>Hf,toStorageKey:()=>nc,tryToBigInt:()=>Ob});var be=e=>typeof e>"u"||e===void 0;function W(e){return typeof e=="number"}function ci(e){return typeof e=="boolean"}function ke(e){return typeof e=="bigint"}function V(e){return typeof e=="string"}function Gi(e){return typeof Buffer<"u"&&e instanceof Buffer}function G(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function Nb(e){return Number.isInteger(e)}function Fe(e){return/^0[xX][0-9a-fA-F]*$/.test(e)}var Rb=Fe;function He(e){return BigInt(e)}function Ob(e){return e?BigInt(e):void 0}function S(e){return L(He(e).toString(16))}var Hf=S;function nc(e){return L(He(e).toString(16).padStart(64,"0"))}function Db(e){const t=L(He(e).toString(16).padStart(64,"0"));if(t.length!==66)throw TypeError("number is too big for hex 0x(64) representation");return t}function Ff(e){return BigInt(L(e)).toString(10)}function Lb(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function rc(e,t,n,r=""){const i=r===""?"invalid length":`invalid ${r} length`,a=BigInt(e),o=BigInt(t),s=BigInt(n);m(a>=o&&a<=s,`Message not signable, ${i}.`)}function zf(e){return e.map(t=>He(t).toString(10))}function cr(e){return e.map(t=>S(t))}function Pn(e){return/^\d+$/.test(e)}function Pb(e){if(Fe(e))return Ff(e);if(Pn(e))return e;throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function jf(e){if(Fe(e))return e;if(Pn(e))return Hf(e);throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function ic(e){return e.map(jf)}function Ub(e){return(+e).toString()}function Fa(e){if(!Fe(e))throw new Error(`${e} needs to be a hex-string`);let t=ye(e);return t.length%2!==0&&(t=`0${t}`),Ft(t)}function Pe(e,t){const n=BigInt(e);return n+n*BigInt(t)/100n}function $b(e){const n=(r=>Number(r&Df))(BigInt(L(br(Ei(e)))));return Fa(S(n))}function Nn(e){return W(e)||ke(e)||V(e)&&(Fe(e)||Pn(e))}function z(e){const t=e.next();if(t.done)throw new Error("Unexpected end of response");return t.value}var Vb={};K(Vb,{getL1MessageHash:()=>Yf,getL2MessageHash:()=>qf,getSelector:()=>xi,getSelectorFromName:()=>ee,keccakBn:()=>ac,solidityUint256PackedKeccak256:()=>Ii,starknetKeccak:()=>oc});function ac(e){const t=ye(S(BigInt(e))),n=t.length%2===0?t:`0${t}`;return L(on(Fa(L(n))).toString(16))}function Mb(e){return L(on(Bn(e)).toString(16))}function oc(e){return BigInt(Mb(e))&Of}function ee(e){return S(oc(e))}function xi(e){return W(e)||ke(e)?S(e):Fe(e)?e:Pn(e)?S(e):ee(e)}function Ii(e){const t=L(e.reduce((n,r)=>n+ye(S(r)).padStart(64,"0"),""));return L(Ht(cd(Fa(t))))}function qf(e,t,n,r,i){return Ii([e,t,i,n,r.length,...r])}function Yf(e,t,n){return Ii([e,t,n.length,...n])}var Hb={};K(Hb,{decodeShortString:()=>lr,encodeShortString:()=>se,isASCII:()=>sc,isDecimalString:()=>cc,isLongText:()=>lc,isShortString:()=>ki,isShortText:()=>Fb,isText:()=>we,splitLongString:()=>uc});function sc(e){return/^[\x00-\x7F]*$/.test(e)}function ki(e){return e.length<=ec}function cc(e){return/^[0-9]*$/i.test(e)}function we(e){return V(e)&&!Fe(e)&&!Pn(e)}var Fb=e=>we(e)&&ki(e),lc=e=>we(e)&&!ki(e);function uc(e){const t=RegExp(`[^]{1,${ec}}`,"g");return e.match(t)||[]}function se(e){if(!sc(e))throw new Error(`${e} is not an ASCII string`);if(!ki(e))throw new Error(`${e} is too long`);return L(e.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function lr(e){if(!sc(e))throw new Error(`${e} is not an ASCII string`);if(Fe(e))return ye(e).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(cc(e))return lr("0X".concat(BigInt(e).toString(16)));throw new Error(`${e} is not Hex or decimal`)}var zb={};K(zb,{byteArrayFromString:()=>dc,stringFromByteArray:()=>jb});function jb(e){const t=BigInt(e.pending_word)===0n?"":lr(S(e.pending_word));return e.data.reduce((n,r)=>{const i=BigInt(r)===0n?"":lr(S(r));return n+i},"")+t}function dc(e){const t=uc(e),n=t[t.length-1],r=t.map(se),[i,a]=n===void 0||n.length===31?["0x00",0]:[r.pop(),n.length];return{data:r.length===0?[]:r,pending_word:i,pending_word_len:a}}var qb={};K(qb,{felt:()=>ge,getAbiContractVersion:()=>gc,getArrayType:()=>Nt,isCairo1Abi:()=>hc,isCairo1Type:()=>sn,isLen:()=>Rn,isTypeArray:()=>zt,isTypeBool:()=>qa,isTypeContractAddress:()=>rm,isTypeEnum:()=>Un,isTypeEthAddress:()=>$n,isTypeFelt:()=>ur,isTypeInt:()=>tm,isTypeLiteral:()=>fc,isTypeNamedTuple:()=>Zf,isTypeNonZero:()=>Vn,isTypeOption:()=>za,isTypeResult:()=>ja,isTypeSecp256k1Point:()=>Ya,isTypeStruct:()=>Ci,isTypeTuple:()=>ln,isTypeU96:()=>Kf,isTypeUint:()=>li,isTypeUint256:()=>nm,tuple:()=>dr,uint256:()=>Wo,uint512:()=>im});function Be(e){return Object.defineProperty(e,"__compiled__",{enumerable:!1,writable:!1,value:!0}),e}function mn(e){if(ke(e)||Number.isInteger(e))return e.toString();if(V(e)){if(Fe(e))return BigInt(e).toString();if(we(e)){if(!ki(e))throw new Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(se(e)).toString()}if(Pn(e))return e}if(ci(e))return`${+e}`;throw new Error(`${e} can't be computed by felt()`)}var Ze,Wt=(Ze=class{constructor(t){w(this,"data");Ze.validate(t);const n=Ze.__processData(t);this.data=n.subarray(n.findIndex(r=>r>0))}static __processData(t){if(V(t))return Ha(t);if(ke(t))return le(t);if(Number.isInteger(t))return le(BigInt(t));if(ci(t))return le(BigInt(t?1:0));throw new Error(`${t} can't be computed by felt()`)}toBigInt(){return si(this.data)}decodeUtf8(){return new TextDecoder().decode(this.data)}toHexString(){return L(this.toBigInt().toString(16))}toApiRequest(){return Be([this.toHexString()])}static validate(t){m(t!==null,"null value is not allowed for felt252"),m(t!==void 0,"undefined value is not allowed for felt252"),m(V(t)||W(t)||ke(t)||ci(t),`Unsupported data type '${typeof t}' for felt252. Expected string, number, bigint, or boolean`);const n=Ze.__processData(t),r=si(n);m(r>=0n&&r<re,`Value ${n} is out of felt252 range [0, ${re})`)}static is(t){try{return Ze.validate(t),!0}catch{return!1}}static isAbiType(t){return t===Ze.abiSelector}static factoryFromApiResponse(t){return new Ze(z(t))}},w(Ze,"abiSelector","core::felt252"),Ze),$r=(1n<<128n)-1n,Yb=(1n<<256n)-1n,Zb=0n,Kb=340282366920938463463374607431768211455n,Gb=340282366920938463463374607431768211455n,Wb=0n,Xb=0n,Ke,_e=(Ke=class{constructor(...t){w(this,"low");w(this,"high");if(G(t[0])&&t.length===1&&"low"in t[0]&&"high"in t[0]){const n=Ke.validateProps(t[0].low,t[0].high);this.low=n.low,this.high=n.high}else if(t.length===1){const n=Ke.validate(t[0]);this.low=n&$r,this.high=n>>128n}else if(t.length===2){const n=Ke.validateProps(t[0],t[1]);this.low=n.low,this.high=n.high}else throw Error("Incorrect constructor parameters")}static validate(t){m(t!==null,"null value is not allowed for u256"),m(t!==void 0,"undefined value is not allowed for u256"),m(Nn(t)||G(t),`Unsupported data type '${typeof t}' for u256. Expected string, number, bigint, or Uint256 object`);const n=BigInt(t);return m(n>=Zb,"bigNumberish is smaller than UINT_256_MIN"),m(n<=Yb,"bigNumberish is bigger than UINT_256_MAX"),n}static validateProps(t,n){const r=BigInt(t),i=BigInt(n);return m(r>=Wb&&r<=Kb,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),m(i>=Xb&&i<=Gb,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:r,high:i}}static is(t){try{Ke.validate(t)}catch{return!1}return!0}static isAbiType(t){return t===Ke.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=z(t);return new Ke(n,r)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:L(this.low.toString(16)),high:L(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[mn(this.low),mn(this.high)]}},w(Ke,"abiSelector","core::integer::u256"),Ke),Jb=(1n<<512n)-1n,Qb=0n,em=0n,Ge,Me=(Ge=class{constructor(...t){w(this,"limb0");w(this,"limb1");w(this,"limb2");w(this,"limb3");if(G(t[0])&&t.length===1&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){const n=Ge.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(t.length===1){const n=Ge.validate(t[0]);this.limb0=n&$r,this.limb1=(n&$r<<128n)>>128n,this.limb2=(n&$r<<256n)>>256n,this.limb3=n>>384n}else if(t.length===4){const n=Ge.validateProps(t[0],t[1],t[2],t[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(t){m(t!==null,"null value is not allowed for u512"),m(t!==void 0,"undefined value is not allowed for u512"),m(Nn(t)||G(t),`Unsupported data type '${typeof t}' for u512. Expected string, number, bigint, or Uint512 object`);const n=BigInt(t);return m(n>=Qb,"bigNumberish is smaller than UINT_512_MIN."),m(n<=Jb,"bigNumberish is bigger than UINT_512_MAX."),n}static validateProps(t,n,r,i){const a=BigInt(t),o=BigInt(n),s=BigInt(r),l=BigInt(i);return[a,o,s,l].forEach((c,u)=>{m(c>=em&&c<=$r,`limb${u} is not in the range of a u128 number`)}),{limb0:a,limb1:o,limb2:s,limb3:l}}static is(t){try{Ge.validate(t)}catch{return!1}return!0}static isAbiType(t){return t===Ge.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=z(t),i=z(t),a=z(t);return new Ge(n,r,i,a)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:L(this.limb0.toString(16)),limb1:L(this.limb1.toString(16)),limb2:L(this.limb2.toString(16)),limb3:L(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[mn(this.limb0),mn(this.limb1),mn(this.limb2),mn(this.limb3)]}},w(Ge,"abiSelector","core::integer::u512"),Ge),Rn=e=>/_len$/.test(e),ur=e=>e==="felt"||e==="core::felt252",zt=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),ln=e=>/^\(.*\)$/i.test(e),Zf=e=>/\(.*\)/i.test(e)&&e.includes(":"),Ci=(e,t)=>e in t,Un=(e,t)=>e in t,za=e=>e.startsWith("core::option::Option::"),ja=e=>e.startsWith("core::result::Result::"),li=e=>Object.values(Re).includes(e),tm=e=>Object.values(Ab).includes(e),nm=e=>_e.isAbiType(e),fc=e=>Object.values(bn).includes(e),qa=e=>e==="core::bool",rm=e=>e===bn.ContractAddress,$n=e=>e===Tb,Kf=e=>e==="core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>",Ya=e=>e===bn.Secp256k1Point,sn=e=>e.includes("::"),Nt=e=>sn(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function hc(e){const{cairo:t}=gc(e);if(t===void 0)throw Error("Unable to determine Cairo version");return t==="1"}function Vn(e){return e.startsWith(Sb)}function gc(e){if(e.find(r=>r.type==="interface"))return{cairo:"1",compiler:"2"};const t=e.find(r=>(r.type==="function"||r.type==="constructor")&&(r.inputs.length||r.outputs.length));if(!t)return{cairo:void 0,compiler:void 0};const n=t.inputs.length?t.inputs:t.outputs;return sn(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Wo=e=>new _e(e).toUint256DecimalString(),im=e=>new Me(e).toUint512DecimalString(),dr=(...e)=>({...e});function ge(e){return mn(e)}var Bi=class{constructor(e){w(this,"variant");const t=Object.values(e);if(t.length===0)throw new Error("This Enum must have at least 1 variant");if(t.filter(r=>!be(r)).length!==1)throw new Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){return Object.values(this.variant).find(t=>!be(t))}activeVariant(){const t=Object.entries(this.variant).find(n=>!be(n[1]));return be(t)?"":t[0]}},yt={Some:0,None:1},Xo=class{constructor(e,t){w(this,"Some");w(this,"None");if(!(e in Object.values(yt)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===yt.Some){if(be(t))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!be(this.Some)}isNone(){return this.None===!0}},Ue={Ok:0,Err:1},Jo=class{constructor(e,t){w(this,"Ok");w(this,"Err");if(!(e in Object.values(Ue)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===Ue.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(!be(this.Ok))return this.Ok;if(!be(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!be(this.Ok)}isErr(){return!be(this.Err)}},So={isBN:(e,t,n)=>{if(!ke(e[n]))throw new Error(`Data and formatter mismatch on ${n}:${t[n]}, expected response data ${n}:${e[n]} to be BN instead it is ${typeof e[n]}`)},unknown:(e,t,n)=>{throw new Error(`Unhandled formatter type on ${n}:${t[n]} for data ${n}:${e[n]}`)}};function Wi(e,t,n){return Object.entries(e).reduce((r,[i,a])=>{const o=n??t[i];if(!(i in t)&&!n)return r[i]=a,r;if(o==="string"){if(Array.isArray(e[i])){const s=Wi(e[i],e[i].map(l=>o));return r[i]=Object.values(s).join(""),r}return So.isBN(e,t,i),r[i]=lr(a),r}if(o==="number")return So.isBN(e,t,i),r[i]=Number(a),r;if(typeof o=="function")return r[i]=o(a),r;if(Array.isArray(o)){const s=Wi(e[i],o,o[0]);return r[i]=Object.values(s),r}return G(o)?(r[i]=Wi(e[i],o),r):(So.unknown(e,t,i),r)},{})}var Ee,bt=(Ee=class{constructor(t){w(this,"data");Ee.validate(t);const n=Ee.__processData(t);this.data=new Uint8Array(Ee.MAX_BYTE_SIZE),this.data.set(n,Ee.MAX_BYTE_SIZE-n.length)}static __processData(t){if(V(t))return Ha(t);if(Gi(t))return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return si(this.data)}decodeUtf8(){const t=this.data.findIndex(r=>r>0),n=this.data.subarray(t>=0?t:1/0);return new TextDecoder().decode(n)}toHexString(t){const n=t==="padded"?br(this.data):this.toBigInt().toString(16);return L(n)}static validate(t){const n=Ee.__processData(t).length;m(n<=this.MAX_BYTE_SIZE,`Data is too long: ${n} bytes (max ${this.MAX_BYTE_SIZE} bytes)`)}static is(t){try{return Ee.validate(t),!0}catch{return!1}}static isAbiType(t){return t===Ee.abiSelector}static factoryFromApiResponse(t){return new Ee(z(t))}},w(Ee,"MAX_BYTE_SIZE",31),w(Ee,"abiSelector","core::bytes_31::bytes31"),Ee),am={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,REPLACEMENT_TRANSACTION_UNDERPRICED:64,FEE_BELOW_MINIMUM:65,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},om=am;function sm(e,t=e.constructor){const{captureStackTrace:n}=Error;n&&n(e,t)}function cm(e,t){const{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}var lm=class extends Error{constructor(t){super(t);w(this,"name");Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),cm(this,new.target.prototype),sm(this)}},me=class extends lm{},ui=class extends me{constructor(t,n,r){super(`RPC: ${n} with params ${ut(r,null,2)}

      ${t.code}: ${t.message}: ${ut(t.data)}`);w(this,"request");this.baseError=t,this.request={method:n,params:r}}get code(){return this.baseError.code}isType(t){return om[t]===this.code}},um=Rt.get("buffer")||typeof Buffer<"u"&&Buffer||typeof globalThis<"u"&&globalThis.Buffer||typeof window<"u"&&window.Buffer||typeof global<"u"&&global.Buffer||class{constructor(){throw new me(`Buffer not detected, use 'config.set("buffer", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support`)}static from(e){throw new me(`Buffer not detected, use 'config.set("buffer", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support`)}static isBuffer(e){const t=Rt.get("buffer")||typeof Buffer<"u"&&Buffer;return t&&t.isBuffer&&t.isBuffer(e)}},We,qi=(We=class{constructor(t){w(this,"data");We.validate(t),this.data=We.__processData(t)}static __processData(t){return V(t)&&we(t)?dt(t):BigInt(t)}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(le(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!G(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=We.__processData(t);m(n>=0n&&n<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(t){try{return We.validate(t),!0}catch{return!1}}static isAbiType(t){return t===We.abiSelector}static factoryFromApiResponse(t){return new We(z(t))}},w(We,"abiSelector","core::u32::u32"),We),pt,Vt=(pt=class{constructor(...t){w(this,"data",[]);w(this,"pending_word");w(this,"pending_word_len");if(t.length===3){const[o,s,l]=t;m(Array.isArray(o)&&s instanceof Wt&&l instanceof qi,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=o,this.pending_word=s,this.pending_word_len=l;return}const n=t[0];pt.validate(n);const{data:r,pending_word:i,pending_word_len:a}=pt.__processData(n);this.data=r,this.pending_word=i,this.pending_word_len=a}static __processData(t){let n;if(t instanceof Uint8Array)n=t;else if(Gi(t))n=new Uint8Array(t);else if(V(t))n=Ha(t);else if(ke(t))n=le(t);else if(Nb(t))n=le(BigInt(t));else throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");const r=bt.MAX_BYTE_SIZE,i=Math.floor(n.length/r),a=n.length%r,o=[];let s,l;for(let c=0;c<i;c+=1){const u=c*r,h=u+r,d=n.slice(u,h);o.push(new bt(d))}if(a>0){const c=n.slice(i*r);let u="0x";for(let h=0;h<c.length;h+=1)u+=c[h].toString(16).padStart(2,"0");s=new Wt(u),l=new qi(a)}else s=new Wt(0),l=new qi(0);return{data:o,pending_word:s,pending_word_len:l}}toApiRequest(){return this.assertInitialized(),Be([L(this.data.length.toString(16)),...this.data.flatMap(t=>t.toApiRequest()),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const t=kr(this.toElements());return new TextDecoder().decode(t)}toBigInt(){const t=kr(this.toElements());if(t.length===0)return 0n;let n=0n;return t.forEach(r=>{n=n*256n+BigInt(r)}),n}toHexString(){const t=kr(this.toElements()),n=t.length===0?"0":br(t);return L(n)}toBuffer(){const t=kr(this.toElements());return um.from(t)}toElements(){this.assertInitialized();const t=this.data.flatMap(r=>r.data),n=Number(this.pending_word_len.toBigInt());if(n){const r=new Uint8Array(n),i=n-this.pending_word.data.length;r.set(this.pending_word.data,i),t.push(r)}return t}assertInitialized(){m(this.data&&this.pending_word!==void 0&&this.pending_word_len!==void 0,"CairoByteArray is not properly initialized")}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!Array.isArray(t)||t instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),m(typeof t!="object"||Gi(t)||t instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),m(!W(t)||t>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),m(!ke(t)||t>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),m(t instanceof Uint8Array||Gi(t)||V(t)||W(t)||ke(t),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(t){try{return pt.validate(t),!0}catch{return!1}}static isAbiType(t){return t===pt.abiSelector}static factoryFromApiResponse(t){const n=Array.from({length:Number(z(t))},()=>bt.factoryFromApiResponse(t)),r=Wt.factoryFromApiResponse(t),i=qi.factoryFromApiResponse(t);return new pt(n,r,i)}},w(pt,"abiSelector","core::byte_array::ByteArray"),pt),Xe,ha=(Xe=class{constructor(t){w(this,"data");Xe.validate(t),this.data=Xe.__processData(t)}static __processData(t){return V(t)&&we(t)?dt(t):BigInt(t)}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(le(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!G(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=Xe.__processData(t);m(n>=Cr.min&&n<=Cr.max,`Value is out of u8 range [${Cr.min}, ${Cr.max}]`)}static is(t){try{return Xe.validate(t),!0}catch{return!1}}static isAbiType(t){return t===Xe.abiSelector}static factoryFromApiResponse(t){return new Xe(z(t))}},w(Xe,"abiSelector","core::integer::u8"),Xe),Je,ga=(Je=class{constructor(t){w(this,"data");Je.validate(t),this.data=Je.__processData(t)}static __processData(t){return V(t)&&we(t)?dt(t):BigInt(t)}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(le(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!G(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=Je.__processData(t);m(n>=Br.min&&n<=Br.max,`Value is out of u16 range [${Br.min}, ${Br.max}]`)}static is(t){try{return Je.validate(t),!0}catch{return!1}}static isAbiType(t){return t===Je.abiSelector}static factoryFromApiResponse(t){return new Je(z(t))}},w(Je,"abiSelector","core::integer::u16"),Je),Qe,_a=(Qe=class{constructor(t){w(this,"data");Qe.validate(t),this.data=Qe.__processData(t)}static __processData(t){return V(t)&&we(t)?dt(t):BigInt(t)}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(le(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!G(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=Qe.__processData(t);m(n>=Nr.min&&n<=Nr.max,`Value is out of u64 range [${Nr.min}, ${Nr.max}]`)}static is(t){try{return Qe.validate(t),!0}catch{return!1}}static isAbiType(t){return t===Qe.abiSelector}static factoryFromApiResponse(t){return new Qe(z(t))}},w(Qe,"abiSelector","core::integer::u64"),Qe),et,pa=(et=class{constructor(t){w(this,"data");et.validate(t),this.data=et.__processData(t)}static __processData(t){return V(t)&&we(t)?dt(t):BigInt(t)}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(le(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!G(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=et.__processData(t);m(n>=Rr.min&&n<=Rr.max,`Value is out of u96 range [${Rr.min}, ${Rr.max}]`)}static is(t){try{return et.validate(t),!0}catch{return!1}}static isAbiType(t){return t===et.abiSelector}static factoryFromApiResponse(t){return new et(z(t))}},w(et,"abiSelector","core::integer::u96"),et),tt,ya=(tt=class{constructor(t){w(this,"data");tt.validate(t),this.data=tt.__processData(t)}static __processData(t){return V(t)&&we(t)?dt(t):BigInt(t)}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(le(this.data))}toHexString(){return L(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!G(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=tt.__processData(t);m(n>=Gn.min&&n<=Gn.max,`Value is out of u128 range [${Gn.min}, ${Gn.max}]`)}static is(t){try{return tt.validate(t),!0}catch{return!1}}static isAbiType(t){return t===tt.abiSelector}static factoryFromApiResponse(t){return new tt(z(t))}},w(tt,"abiSelector","core::integer::u128"),tt),nt,En=(nt=class{constructor(t){w(this,"data");nt.validate(t),this.data=nt.__processData(t)}static __processData(t){return V(t)&&we(t)?dt(t):BigInt(t)}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(le(this.data>=0n?this.data:256n+this.data))}toHexString(){const t=this.toBigInt();if(t<0n){const n=re+t;return L(n.toString(16))}return L(t.toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!G(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=nt.__processData(t);m(n>=Or.min&&n<=Or.max,`Value is out of i8 range [${Or.min}, ${Or.max}]`)}static is(t){try{return nt.validate(t),!0}catch{return!1}}static isAbiType(t){return t===nt.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=BigInt(n),i=r>re/2n?r-re:r;return new nt(i)}},w(nt,"abiSelector","core::integer::i8"),nt),rt,An=(rt=class{constructor(t){w(this,"data");rt.validate(t),this.data=rt.__processData(t)}static __processData(t){return V(t)&&we(t)?dt(t):BigInt(t)}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(le(this.data>=0n?this.data:65536n+this.data))}toHexString(){const t=this.toBigInt();if(t<0n){const n=re+t;return L(n.toString(16))}return L(t.toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!G(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=rt.__processData(t);m(n>=Dr.min&&n<=Dr.max,`Value is out of i16 range [${Dr.min}, ${Dr.max}]`)}static is(t){try{return rt.validate(t),!0}catch{return!1}}static isAbiType(t){return t===rt.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=BigInt(n),i=r>re/2n?r-re:r;return new rt(i)}},w(rt,"abiSelector","core::integer::i16"),rt),it,Tn=(it=class{constructor(t){w(this,"data");it.validate(t),this.data=it.__processData(t)}static __processData(t){return V(t)&&we(t)?dt(t):BigInt(t)}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(le(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const t=this.toBigInt();if(t<0n){const n=re+t;return L(n.toString(16))}return L(t.toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!G(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=it.__processData(t);m(n>=Lr.min&&n<=Lr.max,`Value is out of i32 range [${Lr.min}, ${Lr.max}]`)}static is(t){try{return it.validate(t),!0}catch{return!1}}static isAbiType(t){return t===it.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=BigInt(n),i=r>re/2n?r-re:r;return new it(i)}},w(it,"abiSelector","core::integer::i32"),it),at,Sn=(at=class{constructor(t){w(this,"data");at.validate(t),this.data=at.__processData(t)}static __processData(t){return V(t)&&we(t)?dt(t):BigInt(t)}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(le(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const t=this.toBigInt();if(t<0n){const n=re+t;return L(n.toString(16))}return L(t.toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!G(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=at.__processData(t);m(n>=Pr.min&&n<=Pr.max,`Value is out of i64 range [${Pr.min}, ${Pr.max}]`)}static is(t){try{return at.validate(t),!0}catch{return!1}}static isAbiType(t){return t===at.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=BigInt(n),i=r>re/2n?r-re:r;return new at(i)}},w(at,"abiSelector","core::integer::i64"),at),ot,vn=(ot=class{constructor(t){w(this,"data");ot.validate(t),this.data=ot.__processData(t)}static __processData(t){return V(t)&&we(t)?dt(t):BigInt(t)}toApiRequest(){return Be([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(le(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const t=this.toBigInt();if(t<0n){const n=re+t;return L(n.toString(16))}return L(t.toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!G(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=ot.__processData(t);m(n>=Wn.min&&n<=Wn.max,`Value is out of i128 range [${Wn.min}, ${Wn.max}]`)}static is(t){try{return ot.validate(t),!0}catch{return!1}}static isAbiType(t){return t===ot.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=BigInt(n),i=r>re/2n?r-re:r;return new ot(i)}},w(ot,"abiSelector","core::integer::i128"),ot),Gf={request:{[bt.abiSelector]:e=>new bt(e).toApiRequest(),[Vt.abiSelector]:e=>new Vt(e).toApiRequest(),[Wt.abiSelector]:e=>ge(e),[_e.abiSelector]:e=>new _e(e).toApiRequest(),[Me.abiSelector]:e=>new Me(e).toApiRequest(),[ha.abiSelector]:e=>ge(e),[ga.abiSelector]:e=>ge(e),[_a.abiSelector]:e=>ge(e),[pa.abiSelector]:e=>ge(e),[ya.abiSelector]:e=>ge(e),[En.abiSelector]:e=>new En(e).toApiRequest(),[An.abiSelector]:e=>new An(e).toApiRequest(),[Tn.abiSelector]:e=>new Tn(e).toApiRequest(),[Sn.abiSelector]:e=>new Sn(e).toApiRequest(),[vn.abiSelector]:e=>new vn(e).toApiRequest()},response:{[bt.abiSelector]:e=>bt.factoryFromApiResponse(e).decodeUtf8(),[Vt.abiSelector]:e=>Vt.factoryFromApiResponse(e).decodeUtf8(),[Wt.abiSelector]:e=>BigInt(z(e)),[_e.abiSelector]:e=>_e.factoryFromApiResponse(e).toBigInt(),[Me.abiSelector]:e=>Me.factoryFromApiResponse(e).toBigInt(),[ha.abiSelector]:e=>BigInt(z(e)),[ga.abiSelector]:e=>BigInt(z(e)),[_a.abiSelector]:e=>BigInt(z(e)),[pa.abiSelector]:e=>BigInt(z(e)),[ya.abiSelector]:e=>BigInt(z(e)),[En.abiSelector]:e=>BigInt(z(e)),[An.abiSelector]:e=>BigInt(z(e)),[Tn.abiSelector]:e=>BigInt(z(e)),[Sn.abiSelector]:e=>BigInt(z(e)),[vn.abiSelector]:e=>BigInt(z(e))}},dm=class{constructor(e,t){w(this,"abi");w(this,"parsingStrategy");this.abi=e,this.parsingStrategy=t||Gf}getRequestParser(e){if(this.parsingStrategy.request[e])return this.parsingStrategy.request[e];throw new Error(`Parser for ${e} not found`)}getResponseParser(e){if(this.parsingStrategy.response[e])return this.parsingStrategy.response[e];throw new Error(`Parser for ${e} not found`)}methodInputsLength(e){return e.inputs.reduce((t,n)=>Rn(n.name)?t:t+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},fm=class{constructor(e,t){w(this,"abi");w(this,"parsingStrategy");this.abi=e,this.parsingStrategy=t||Gf}getRequestParser(e){if(this.parsingStrategy.request[e])return this.parsingStrategy.request[e];throw new Error(`Parser for ${e} not found`)}getResponseParser(e){if(this.parsingStrategy.response[e])return this.parsingStrategy.response[e];throw new Error(`Parser for ${e} not found`)}methodInputsLength(e){return e.inputs.length}getMethod(e){var n;const t=this.abi.find(r=>r.type==="interface");return(n=t==null?void 0:t.items)==null?void 0:n.find(r=>r.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>e.type==="interface"?e.items:e)}};function hm(e,t){const n=gm(e);if(n===0||n===1)return new dm(e,t);if(n===2)return new fm(e,t);throw Error(`Unsupported ABI version ${n}`)}function gm(e){return e.find(t=>t.type==="interface")?2:hc(e)?1:0}function Ml(e,t,n){return e==="constructor"&&!n&&!t.length}function _m(e){const t=e.substring(0,e.indexOf(":")),n=e.substring(t.length+1);return{name:t,type:n}}function pm(e){if(!e.includes("("))return{subTuple:[],result:e};const t=[];let n="",r=0;for(;r<e.length;){if(e[r]==="("){let i=1;const a=r;for(r++;i;)e[r]===")"&&i--,e[r]==="("&&i++,r++;t.push(e.substring(a,r)),n+=" ",r--}else n+=e[r];r++}return{subTuple:t,result:n}}function ym(e){const t=e.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=pm(t);let i=r.split(",").map(a=>n.length?a.replace(" ",n.shift()):a);return Zf(e)&&(i=i.reduce((a,o)=>a.concat(_m(o)),[])),i}function Hl(e,t,n){for(let r=0,i=0;r<e.length;r++)if(e[r]===t)i++;else if(e[r]===n&&--i===0)return r;return Number.POSITIVE_INFINITY}function bm(e){const t=e.slice(1,-1),n=[];let r=0,i;for(;r<t.length;){switch(!0){case t[r]==="(":{i=r+Hl(t.slice(r),"(",")")+1;break}case(t.startsWith("core::result::Result::<",r)||t.startsWith("core::array::Array::<",r)||t.startsWith("core::option::Option::<",r)):{i=r+Hl(t.slice(r),"<",">")+1;break}default:{const a=t.indexOf(",",r);i=a!==-1?a:Number.POSITIVE_INFINITY}}n.push(t.slice(r,i)),r=i+2}return n}function _c(e){return sn(e)?bm(e):ym(e)}var st,Ae=(st=class{constructor(t,n){w(this,"content");w(this,"arrayType");m(st.isTypeFixedArray(n),`The type ${n} is not a Cairo fixed array. Needs [type; length].`);try{st.getFixedArrayType(n)}catch{throw new Error(`The type ${n} do not includes any content type. Needs [type; length].`)}let r;try{r=st.getFixedArraySize(n)}catch{throw new Error(`The type ${n} type do not includes any length. Needs [type; length].`)}m(r===t.length,`The ABI type ${n} is expecting ${r} items. ${t.length} items provided.`),this.content=t,this.arrayType=n}static getFixedArraySize(t){const n=t.match(new RegExp("(?<=; )\\d+(?=\\])"));if(n===null)throw new Error(`ABI type ${t} do not includes a valid number after ';' character.`);return Number(n[0])}getFixedArraySize(){return st.getFixedArraySize(this.arrayType)}getFixedArrayType(){return st.getFixedArrayType(this.arrayType)}static compile(t){return t.reduce((n,r,i)=>(n[i]=r,n),{})}compile(){return st.compile(this.content)}static isTypeFixedArray(t){return/^\[.*;\s.*\]$/.test(t)&&new RegExp("(?<=\\[).+(?=;)").test(t)&&new RegExp("(?<=; )\\d+(?=\\])").test(t)}},w(st,"getFixedArrayType",t=>{const n=t.match(new RegExp("(?<=\\[).+(?=;)"));if(n===null)throw new Error(`ABI type ${t} do not includes a valid type of data.`);return n[0]}),st);function mm(e){return Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`)}function wm(e){return Error(`Your object includes the property : ${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`)}function Em(e,t,n,r){const i=(h,d)=>{if(Ae.isTypeFixedArray(d))return s(h,d);if(zt(d))return o(h,d);if(Un(d,r)){const f=r[d];return c(h,f)}if(ln(d))return l(h,d);if($n(d)||Vn(d)||Vt.isAbiType(d)||Kf(d)||Ya(d))return h;if(_e.isAbiType(d)){const f=h;if(typeof f!="object")return f;if(!("low"in f&&"high"in f))throw mm(d);return{low:f.low,high:f.high}}if(Me.isAbiType(d)){const f=h;if(typeof f!="object")return f;if(!["limb0","limb1","limb2","limb3"].every(_=>_ in f))throw wm(d);return{limb0:f.limb0,limb1:f.limb1,limb2:f.limb2,limb3:f.limb3}}if(Ci(d,n)){const f=n[d].members;return a(h,f)}return h},a=(h,d)=>d.reduce((_,y)=>{const g=p=>Object.defineProperty(_,y.name,{enumerable:!0,value:p??h[y.name]});if(h[y.name]==="undefined"&&(sn(y.type)||!Rn(y.name)))throw Error(`Your object needs a property with key : ${y.name} .`);return g(i(h[y.name],y.type)),_},{});function o(h,d){const f=Nt(d);return V(h)?h:h.map(_=>i(_,f))}function s(h,d){const f=Ae.getFixedArrayType(d),_=Ae.getFixedArraySize(d);if(Array.isArray(h)){if(_!==h.length)throw new Error(`ABI type ${d}: array provided do not includes  ${_} items. ${h.length} items provided.`);return h.map(y=>i(y,f))}if(_!==Object.keys(h).length)throw new Error(`ABI type ${d}: object provided do not includes  ${_} properties. ${Object.keys(h).length} items provided.`);return i(h,f)}function l(h,d){return _c(d).reduce((y,g,p)=>{const A=Object.keys(h),E=C=>Object.defineProperty(y,p.toString(),{enumerable:!0,value:C??h[A[p]]}),b=g!=null&&g.type?g.type:g;return E(i(h[A[p]],b)),y},{})}const c=(h,d)=>{if(ja(d.name)){const g=h,p=d.name.substring(d.name.indexOf("<")+1,d.name.lastIndexOf(",")),A=d.name.substring(d.name.indexOf(",")+1,d.name.lastIndexOf(">"));return g.isOk()?new Jo(Ue.Ok,i(h.unwrap(),p)):new Jo(Ue.Err,i(h.unwrap(),A))}if(za(d.name)){const g=h,p=d.name.substring(d.name.indexOf("<")+1,d.name.lastIndexOf(">"));return g.isSome()?new Xo(yt.Some,i(g.unwrap(),p)):new Xo(yt.None,{})}const f=h,y=Object.entries(f.variant).map(g=>{if(be(g[1]))return g;const p=d.type.substring(d.type.lastIndexOf("<")+1,d.type.lastIndexOf(">"));return p==="()"?g:[g[0],i(f.unwrap(),p)]});return new Bi(Object.fromEntries(y))};return t.reduce((h,d)=>{const f=_=>Object.defineProperty(h,d.name,{enumerable:!0,value:_});return Rn(d.name)&&!sn(d.type)||f(i(e[d.name],d.type)),h},{})}function er({type:e,val:t,parser:n}){switch(!0){case _e.isAbiType(e):return n.getRequestParser(e)(t);case Me.isAbiType(e):return n.getRequestParser(e)(t);case ha.isAbiType(e):return n.getRequestParser(e)(t);case ga.isAbiType(e):return n.getRequestParser(e)(t);case _a.isAbiType(e):return n.getRequestParser(e)(t);case pa.isAbiType(e):return n.getRequestParser(e)(t);case ya.isAbiType(e):return n.getRequestParser(e)(t);case En.isAbiType(e):return n.getRequestParser(e)(t);case An.isAbiType(e):return n.getRequestParser(e)(t);case Tn.isAbiType(e):return n.getRequestParser(e)(t);case Sn.isAbiType(e):return n.getRequestParser(e)(t);case vn.isAbiType(e):return n.getRequestParser(e)(t);case bt.isAbiType(e):return n.getRequestParser(e)(t);case Ya(e):{const r=ye(S(t)).padStart(128,"0"),i=Wo(L(r.slice(-64))),a=Wo(L(r.slice(0,-64)));return[ge(a.low),ge(a.high),ge(i.low),ge(i.high)]}default:return n.getRequestParser(Wt.abiSelector)(t)}}function Am(e,t){const n=_c(t),r=Object.values(e);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${r}
      expected: ${n}`);return n.map((i,a)=>({element:r[a],type:i.type??i}))}function Ye({element:e,type:t,structs:n,enums:r,parser:i}){if(e===void 0)throw Error(`Missing parameter for type ${t}`);if(Ae.isTypeFixedArray(t)){const a=Ae.getFixedArrayType(t);let o=[];if(Array.isArray(e))o=new Ae(e,t).content;else if(typeof e=="object")o=Object.values(e),m(o.length===Ae.getFixedArraySize(t),`ABI type ${t}: object provided do not includes  ${Ae.getFixedArraySize(t)} items. ${o.length} items provided.`);else throw new Error(`ABI type ${t}: not an Array representing a cairo.fixedArray() provided.`);return o.reduce((s,l)=>s.concat(Ye({element:l,type:a,structs:n,enums:r,parser:i})),[])}if(Array.isArray(e)){const a=[];a.push(ge(e.length));const o=Nt(t);return e.reduce((s,l)=>s.concat(Ye({element:l,type:o,structs:n,enums:r,parser:i})),a)}if(_e.isAbiType(t)||Me.isAbiType(t))return i.getRequestParser(t)(e);if(n[t]&&n[t].members.length){if($n(t))return er({type:t,val:e,parser:i});if(Vt.isAbiType(t))return i.getRequestParser(t)(e);const{members:a}=n[t],o=e;return a.reduce((s,l)=>s.concat(Ye({element:o[l.name],type:l.type,structs:n,enums:r,parser:i})),[])}if(ln(t))return Am(e,t).reduce((o,s)=>{const l=Ye({element:s.element,type:s.type,structs:n,enums:r,parser:i});return o.concat(l)},[]);if(Un(t,r)){const{variants:a}=r[t];if(za(t)){const d=e;if(d.isSome()){const f=a.find(g=>g.name==="Some");if(be(f))throw Error("Error in abi : Option has no 'Some' variant.");const _=f.type;if(_==="()")return yt.Some.toString();const y=Ye({element:d.unwrap(),type:_,structs:n,enums:r,parser:i});return Array.isArray(y)?[yt.Some.toString(),...y]:[yt.Some.toString(),y]}return yt.None.toString()}if(ja(t)){const d=e;if(d.isOk()){const g=a.find(E=>E.name==="Ok");if(be(g))throw Error("Error in abi : Result has no 'Ok' variant.");const p=g.type;if(p==="()")return Ue.Ok.toString();const A=Ye({element:d.unwrap(),type:p,structs:n,enums:r,parser:i});return Array.isArray(A)?[Ue.Ok.toString(),...A]:[Ue.Ok.toString(),A]}const f=a.find(g=>g.name==="Err");if(be(f))throw Error("Error in abi : Result has no 'Err' variant.");const _=f.type;if(_==="()")return Ue.Err.toString();const y=Ye({element:d.unwrap(),type:_,structs:n,enums:r,parser:i});return Array.isArray(y)?[Ue.Err.toString(),...y]:[Ue.Err.toString(),y]}const o=e,s=o.activeVariant(),l=a.find(d=>d.name===s);if(be(l))throw Error(`Not find in abi : Enum has no '${s}' variant.`);const c=l.type,u=a.findIndex(d=>d.name===s);if(c==="()")return u.toString();const h=Ye({element:o.unwrap(),type:c,structs:n,enums:r,parser:i});return Array.isArray(h)?[u.toString(),...h]:[u.toString(),h]}if(Vn(t))return er({type:Nt(t),val:e,parser:i});if(typeof e=="object")throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return er({type:t,val:e,parser:i})}function Tm({argsIterator:e,input:t,structs:n,enums:r,parser:i}){const{name:a,type:o}=t;let{value:s}=e.next();switch(!0){case Ae.isTypeFixedArray(o):if(!Array.isArray(s)&&typeof s!="object")throw Error(`ABI expected parameter ${a} to be an array or an object, got ${s}`);return Ye({element:s,type:t.type,structs:n,enums:r,parser:i});case zt(o):if(!Array.isArray(s)&&!we(s))throw Error(`ABI expected parameter ${a} to be array or long string, got ${s}`);return V(s)&&(s=uc(s)),Ye({element:s,type:t.type,structs:n,enums:r,parser:i});case Vn(o):return er({type:Nt(o),val:s,parser:i});case $n(o):return er({type:o,val:s,parser:i});case(Ci(o,n)||ln(o)||_e.isAbiType(o)):return Ye({element:s,type:o,structs:n,enums:r,parser:i});case Un(o,r):return Ye({element:s,type:o,structs:n,enums:r,parser:i});default:return er({type:o,val:s,parser:i})}}function Qo(e,t,n){let r;switch(!0){case qa(e):return r=t.next().value,!!BigInt(r);case _e.isAbiType(e):return n.getResponseParser(e)(t);case Me.isAbiType(e):return n.getResponseParser(e)(t);case ha.isAbiType(e):return n.getResponseParser(e)(t);case ga.isAbiType(e):return n.getResponseParser(e)(t);case _a.isAbiType(e):return n.getResponseParser(e)(t);case pa.isAbiType(e):return n.getResponseParser(e)(t);case ya.isAbiType(e):return n.getResponseParser(e)(t);case En.isAbiType(e):return n.getResponseParser(e)(t);case An.isAbiType(e):return n.getResponseParser(e)(t);case Tn.isAbiType(e):return n.getResponseParser(e)(t);case Sn.isAbiType(e):return n.getResponseParser(e)(t);case vn.isAbiType(e):return n.getResponseParser(e)(t);case $n(e):return r=t.next().value,BigInt(r);case bt.isAbiType(e):return n.getResponseParser(e)(t);case Ya(e):const i=ye(t.next().value).padStart(32,"0"),a=ye(t.next().value).padStart(32,"0"),o=ye(t.next().value).padStart(32,"0"),s=ye(t.next().value).padStart(32,"0");return BigInt(L(a+i+s+o));default:return n.getResponseParser(Wt.abiSelector)(t)}}function De(e,t,n,r,i){if(t.type==="()")return{};if(_e.isAbiType(t.type)||Me.isAbiType(t.type)||Vt.isAbiType(t.type))return n.getResponseParser(t.type)(e);if(Ae.isTypeFixedArray(t.type)){const a=[],o={type:Ae.getFixedArrayType(t.type)},s=Ae.getFixedArraySize(t.type);for(;a.length<s;)a.push(De(e,o,n,r,i));return a}if(zt(t.type)){const a=[],o={type:Nt(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(De(e,o,n,r,i));return a}if(Vn(t.type)){const a={type:Nt(t.type)};return De(e,a,n,r,i)}if(r&&t.type in r&&r[t.type])return $n(t.type)?Qo(t.type,e,n):r[t.type].members.reduce((a,o)=>(a[o.name]=De(e,o,n,r,i),a),{});if(i&&t.type in i&&i[t.type]){const a=Number(e.next().value),o=i[t.type].variants.reduce((l,c,u)=>u===a?(l[c.name]=De(e,{type:c.type},n,r,i),l):(l[c.name]=void 0,l),{});if(t.type.startsWith("core::option::Option")){const l=a===yt.Some?o.Some:void 0;return new Xo(a,l)}if(t.type.startsWith("core::result::Result")){let l;return a===Ue.Ok?l=o.Ok:l=o.Err,new Jo(a,l)}return new Bi(o)}if(ln(t.type))return _c(t.type).reduce((o,s,l)=>{const c=s!=null&&s.name?s.name:l,h={type:s!=null&&s.type?s.type:s};return o[c]=De(e,h,n,r,i),o},{});if(zt(t.type)){const a=[],o={type:Nt(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(De(e,o,n,r,i));return a}return Qo(t.type,e,n)}function ba({responseIterator:e,output:t,structs:n,enums:r,parsedResult:i,parser:a}){const{name:o,type:s}=t;let l;switch(!0){case Rn(o):return l=e.next().value,BigInt(l);case(n&&s in n||ln(s)):return De(e,t,a,n,r);case(r&&Un(s,r)):return De(e,t,a,n,r);case Ae.isTypeFixedArray(s):return De(e,t,a,n,r);case zt(s):if(sn(s))return De(e,t,a,n,r);const c=[];if(i&&i[`${o}_len`]){const u=i[`${o}_len`];for(;c.length<u;)c.push(De(e,{type:t.type.replace("*","")},a,n,r))}return c;case Vn(s):return De(e,t,a,n,r);default:return Qo(s,e,a)}}var pc=(e,t)=>{if(m(V(e)||W(e)||ke(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),V(e)&&!Fe(e))return;const n=BigInt(e.toString(10));m(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},Za=(e,t)=>{W(e)&&m(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),m(V(e)||W(e)||ke(e)||G(e)&&"low"in e&&"high"in e||G(e)&&["limb0","limb1","limb2","limb3"].every(r=>r in e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`);let n;switch(t.type){case Re.u256:n=new _e(e).toBigInt();break;case Re.u512:n=new Me(e).toBigInt();break;default:n=He(e)}switch(t.type){case Re.u8:m(n>=0n&&n<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case Re.u16:m(n>=0n&&n<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case Re.u32:m(n>=0n&&n<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case Re.u64:m(n>=0n&&n<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case Re.u128:m(n>=0n&&n<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case Re.u256:m(n>=0n&&n<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^256-1`);break;case Re.u512:m(Me.is(n),`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^512-1`);break;case bn.ClassHash:m(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case bn.ContractAddress:m(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case bn.Secp256k1Point:{m(n>=0n&&n<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`);break}case bn.U96:{m(n>=0n&&n<=2n**96n-1n,`Validate: arg ${t.name} must be ${t.type} : a 96 bits number.`);break}}},Wf=(e,t)=>{m(ci(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},Xf=(e,t,n)=>{if(t.type===Re.u256||t.type===Re.u512){Za(e,t);return}if($n(t.type)){m(!G(e),`EthAddress type is waiting a BigNumberish. Got "${e}"`);const r=BigInt(e.toString(10));m(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}m(G(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as a js object (not array)`),n[t.type].members.forEach(({name:r})=>{m(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)})},Jf=(e,t)=>{m(G(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),r=[...Object.getOwnPropertyNames(e),...n];if(!(za(t.type)&&r.includes("isSome")&&r.includes("isNone"))&&!(ja(t.type)&&r.includes("isOk")&&r.includes("isErr"))&&!(r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received "${e}", is not an Enum.`)},Qf=(e,t)=>{m(G(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},eh=(e,t,n,r)=>{const i=zt(t.type),a=i?Nt(t.type):Ae.getFixedArrayType(t.type);if(i&&ur(a)&&lc(e))return;let o=[];if(i)m(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),o=e;else switch(!0){case Array.isArray(e):o=e;break;case typeof e=="object":o=Object.values(e);break;default:throw new Error(`Validate: arg ${t.name} should be an Array or an object.`)}switch(!0){case ur(a):o.forEach(s=>pc(s,t));break;case ln(a):o.forEach(s=>Qf(s,{name:t.name}));break;case zt(a):o.forEach(s=>eh(s,{name:"",type:a},n,r));break;case Ci(a,n):o.forEach(s=>Xf(s,{name:t.name,type:a},n));break;case Un(a,r):o.forEach(s=>Jf(s,{name:t.name,type:a}));break;case(li(a)||fc(a)):o.forEach(s=>Za(s,{name:"",type:a}));break;case qa(a):o.forEach(s=>Wf(s,t));break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${o}`)}},Sm=(e,t)=>{const n=Nt(t.type);switch(m(li(n)&&n!==Me.abiSelector||ur(n),`Validate: ${t.name} type is not authorized for NonZero type.`),!0){case ur(n):pc(e,t),m(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case li(n):switch(Za(e,{name:"",type:n}),n){case Re.u256:m(new _e(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type.");break;default:m(He(e)>0,"Validate: value 0 is not authorized in NonZero uint type.")}break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value "${e}"`)}};function Fl(e,t,n,r){e.inputs.reduce((i,a)=>{const o=t[i];switch(!0){case Rn(a.name):return i;case ur(a.type):pc(o,a);break;case bt.isAbiType(a.type):bt.validate(o);break;case(li(a.type)||fc(a.type)):Za(o,a);break;case qa(a.type):Wf(o,a);break;case Vt.isAbiType(a.type):Vt.validate(o);break;case En.isAbiType(a.type):En.validate(o);break;case An.isAbiType(a.type):An.validate(o);break;case Tn.isAbiType(a.type):Tn.validate(o);break;case Sn.isAbiType(a.type):Sn.validate(o);break;case vn.isAbiType(a.type):vn.validate(o);break;case(zt(a.type)||Ae.isTypeFixedArray(a.type)):eh(o,a,n,r);break;case Ci(a.type,n):Xf(o,a,n);break;case Un(a.type,r):Jf(o,a);break;case ln(a.type):Qf(o,a);break;case Vn(a.type):Sm(o,a);break;default:throw new Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${o}`)}return i+1},0)}var Z=class Vr{constructor(t,n){w(this,"abi");w(this,"parser");w(this,"structs");w(this,"enums");this.structs=Vr.getAbiStruct(t),this.enums=Vr.getAbiEnum(t),this.parser=hm(t,n),this.abi=this.parser.getLegacyFormat()}validate(t,n,r=[]){if(t!==ji.DEPLOY){const o=this.abi.filter(s=>{if(s.type!=="function")return!1;const l=s.stateMutability==="view"||s.state_mutability==="view";return t===ji.INVOKE?!l:l}).map(s=>s.name);m(o.includes(n),`${t===ji.INVOKE?"invocable":"viewable"} method not found in abi`)}const i=this.abi.find(o=>t===ji.DEPLOY?o.name===n&&o.type==="constructor":o.name===n&&o.type==="function");if(Ml(n,r,i))return;const a=this.parser.methodInputsLength(i);if(r.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${r.length}`);Fl(i,r,this.structs,this.enums)}compile(t,n){const r=this.abi.find(s=>s.name===t);if(Ml(t,n,r))return[];let i;if(Array.isArray(n))i=n;else{const s=Em(n,r.inputs,this.structs,this.enums);i=Object.values(s),Fl(r,i,this.structs,this.enums)}const a=i[Symbol.iterator](),o=r.inputs.reduce((s,l)=>Rn(l.name)&&!sn(l.type)?s:s.concat(Tm({argsIterator:a,input:l,structs:this.structs,enums:this.enums,parser:this.parser})),[]);return Object.defineProperty(o,"__compiled__",{enumerable:!1,writable:!1,value:!0}),o}static compile(t){const n=i=>{const a=(s,l=".")=>{const c=Array.isArray(s)?[s.length.toString(),...s]:s;return Object.entries(c).flatMap(([u,h])=>{let d=h;u==="entrypoint"?d=ee(d):lc(d)&&(d=dc(d));const f=Array.isArray(c)&&u==="0"?"$$len":u;if(ke(d))return[[`${l}${f}`,ge(d)]];if(Object(d)===d){const _=Object.getOwnPropertyNames(Object.getPrototypeOf(d)),y=[...Object.getOwnPropertyNames(d),..._];if(y.includes("isSome")&&y.includes("isNone")){const g=d,p=g.isSome()?yt.Some:yt.None;return g.isSome()?a({0:p,1:g.unwrap()},`${l}${f}.`):[[`${l}${f}`,ge(p)]]}if(y.includes("isOk")&&y.includes("isErr")){const g=d,p=g.isOk()?Ue.Ok:Ue.Err;return a({0:p,1:g.unwrap()},`${l}${f}.`)}if(y.includes("variant")&&y.includes("activeVariant")){const g=d,p=g.activeVariant(),E=Object.keys(g.variant).findIndex(b=>b===p);return typeof g.unwrap()=="object"&&Object.keys(g.unwrap()).length===0?[[`${l}${f}`,ge(E)]]:a({0:E,1:g.unwrap()},`${l}${f}.`)}return a(d,`${l}${f}.`)}return[[`${l}${f}`,ge(d)]]})};return Object.fromEntries(a(i))};let r;if(Array.isArray(t)){const i={...t},a=n(i);r=Object.values(a)}else{const i=n(t);r=Object.values(i)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(t,n){const{outputs:r}=this.abi.find(o=>o.name===t),i=n.flat()[Symbol.iterator](),a=r.flat().reduce((o,s,l)=>{const c=s.name??l;return o[c]=ba({responseIterator:i,output:s,structs:this.structs,enums:this.enums,parsedResult:o,parser:this.parser}),o[c]&&o[`${c}_len`]&&delete o[`${c}_len`],o},{});return Object.keys(a).length===1&&0 in a?a[0]:a}format(t,n,r){const i=this.parse(t,n);return Wi(i,r)}static getAbiStruct(t){return t.filter(n=>n.type==="struct").reduce((n,r)=>({...n,[r.name]:r}),{})}static getAbiEnum(t){const n=t.filter(r=>r.type==="enum").reduce((r,i)=>({...r,[i.name]:i}),{});return delete n["core::bool"],n}static toCalldata(t=[]){return Vr.compile(t)}static toHex(t=[]){return Vr.compile(t).map(r=>S(r))}decodeParameters(t,n){const r=Array.isArray(t)?t:[t],i=n.flat()[Symbol.iterator](),a=r.map(o=>ba({responseIterator:i,output:{name:"",type:o},parser:this.parser,structs:this.structs,enums:this.enums}));return a.length===1?a[0]:a}},vm={};K(vm,{calculateContractAddressFromHash:()=>zm,calculateDeclareTransactionHash:()=>Mm,calculateDeployAccountTransactionHash:()=>Fm,calculateInvokeTransactionHash:()=>$m,calculateL2MessageTxHash:()=>lh,computeCompiledClassHash:()=>ph,computeContractClassHash:()=>bh,computeHashOnElements:()=>St,computeHintedClassHash:()=>hh,computeLegacyContractClassHash:()=>gh,computePedersenHash:()=>di,computePedersenHashOnElements:()=>dh,computePoseidonHash:()=>uh,computePoseidonHashOnElements:()=>fh,computeSierraContractClassHash:()=>yh,formatSpaces:()=>fi,getL1MessageHash:()=>Yf,getL2MessageHash:()=>qf,getSelector:()=>xi,getSelectorFromName:()=>ee,hashByteCodeSegments:()=>_h,keccakBn:()=>ac,poseidon:()=>$g,solidityUint256PackedKeccak256:()=>Ii,starknetKeccak:()=>oc});var xm={};K(xm,{calculateDeclareTransactionHash:()=>sh,calculateDeployAccountTransactionHash:()=>oh,calculateInvokeTransactionHash:()=>ch,calculateTransactionHashCommon:()=>Ga,encodeDataResourceBoundsL1:()=>ih,encodeResourceBoundsL1:()=>nh,encodeResourceBoundsL2:()=>rh,hashDAMode:()=>th,hashFeeFieldV3B3:()=>ah});var an=e=>e.map(t=>BigInt(t)),Im=32n,km=64n,Ka=128n,yc=km+Ka,Cm=BigInt(se("L1_GAS")),Bm=BigInt(se("L2_GAS")),Nm=BigInt(se("L1_DATA"));function th(e,t){return(BigInt(e)<<Im)+BigInt(t)}function nh(e){return(Cm<<yc)+(e.l1_gas.max_amount<<Ka)+e.l1_gas.max_price_per_unit}function rh(e){return(Bm<<yc)+(e.l2_gas.max_amount<<Ka)+e.l2_gas.max_price_per_unit}function ih(e){return(Nm<<yc)+(e.l1_data_gas.max_amount<<Ka)+e.l1_data_gas.max_price_per_unit}function ah(e,t){const n=nh(t),r=rh(t),i=ih(t);return ue([BigInt(e),n,r,i])}function Ga(e,t,n,r,i,a,o,s,l,c,u=[]){const h=ah(a,c),d=th(s,l),f=an([e,t,n,h,ue(an(o)),r,i,d,...an(u)]);return S(ue(f))}function oh(e,t,n,r,i,a,o,s,l,c,u,h){return Ga(cn.DEPLOY_ACCOUNT,i,e,a,o,u,h,s,l,c,[ue(an(n)),t,r])}function sh(e,t,n,r,i,a,o,s,l,c,u,h){return Ga(cn.DECLARE,r,n,i,a,u,an(h),s,l,c,[ue(an(o)),e,t])}function ch(e,t,n,r,i,a,o,s,l,c,u){return Ga(cn.INVOKE,t,e,r,i,c,u,o,s,l,[ue(an(a)),ue(an(n))])}var Rm={};K(Rm,{calculateDeclareTransactionHash:()=>Dm,calculateDeployAccountTransactionHash:()=>Lm,calculateL2MessageTxHash:()=>lh,calculateTransactionHash:()=>Pm,calculateTransactionHashCommon:()=>Ni,computeHashOnElements:()=>es});var Om={};K(Om,{starkCurve:()=>f_,weierstrass:()=>Kg});function es(e){return[...e,e.length].reduce((t,n)=>Ai(He(t),He(n)),0).toString()}function Ni(e,t,n,r,i,a,o,s=[]){const l=es(i),c=[e,t,n,r,l,a,o,...s];return es(c)}function Dm(e,t,n,r,i,a,o){return Ni(cn.DECLARE,n,t,0,[e],r,i,[a,...o?[o]:[]])}function Lm(e,t,n,r,i,a,o,s){const l=[t,r,...n];return Ni(cn.DEPLOY_ACCOUNT,i,e,0,l,a,o,[s])}function Pm(e,t,n,r,i,a){return Ni(cn.INVOKE,t,e,0,n,r,i,[a])}function lh(e,t,n,r,i,a){const o=[e,...r];return Ni(cn.L1_HANDLER,0,t,xi(n),o,0,i,[a])}function Um(e){return[U.ETransactionVersion.V3,U.ETransactionVersion.F3].includes(e.version)}function $m(e){if(Um(e))return ch(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Vm(e){return[U.ETransactionVersion.V3,U.ETransactionVersion.F3].includes(e.version)}function Mm(e){if(Vm(e))return sh(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Hm(e){return[U.ETransactionVersion.V3,U.ETransactionVersion.F3].includes(e.version)}function Fm(e){if(Hm(e))return oh(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function di(e,t){return Ai(BigInt(e),BigInt(t))}function uh(e,t){return S(Zs(BigInt(e),BigInt(t)))}function St(e){return[...e,e.length].reduce((t,n)=>Ai(BigInt(t),BigInt(n)),0).toString()}var dh=St;function fh(e){return S(ue(e.map(t=>BigInt(t))))}function zm(e,t,n,r){const i=Z.compile(n),a=St(i),o=ge("0x535441524b4e45545f434f4e54524143545f41444452455353"),s=St([o,r,e,t,a]);return S(BigInt(s)%tc)}function jm(e,t){return e==="attributes"||e==="accessible_scopes"?Array.isArray(t)&&t.length===0?void 0:t:e==="debug_info"?null:t===null?void 0:t}function fi(e){let t=!1;const n=[];for(const r of e)r==='"'&&!(n.length>0&&n.slice(-1)[0]==="\\")&&(t=!t),t?n.push(r):n.push(r===":"?": ":r===","?", ":r);return n.join("")}function hh(e){const{abi:t,program:n}=e,i=fi(ut({abi:t,program:n},jm));return L(on(Bn(i)).toString(16))}function gh(e){const t=V(e)?Ln(e):e,n=S(Lf),r=St(t.entry_points_by_type.EXTERNAL.flatMap(c=>[c.selector,c.offset])),i=St(t.entry_points_by_type.L1_HANDLER.flatMap(c=>[c.selector,c.offset])),a=St(t.entry_points_by_type.CONSTRUCTOR.flatMap(c=>[c.selector,c.offset])),o=St(t.program.builtins.map(c=>se(c))),s=hh(t),l=St(t.program.data);return St([n,r,i,a,o,s,l])}function qm(e){return ue(e.flatMap(t=>BigInt(se(t))))}function vo(e){const t=e.flatMap(n=>[BigInt(n.selector),BigInt(n.offset),qm(n.builtins)]);return ue(t)}function _h(e){const t=e.bytecode.map(a=>BigInt(a)),n=e.bytecode_segment_lengths??[];let r=0;const i=n.flatMap(a=>{const o=t.slice(r,r+=a);return[BigInt(a),ue(o)]});return 1n+ue(i)}function ph(e){const n=BigInt(se("COMPILED_CLASS_V1")),r=vo(e.entry_points_by_type.EXTERNAL),i=vo(e.entry_points_by_type.L1_HANDLER),a=vo(e.entry_points_by_type.CONSTRUCTOR),o=e.bytecode_segment_lengths?_h(e):ue(e.bytecode.map(s=>BigInt(s)));return S(ue([n,r,i,a,o]))}function xo(e){const t=e.flatMap(n=>[BigInt(n.selector),BigInt(n.function_idx)]);return ue(t)}function Ym(e){const t=fi(ut(e.abi,null));return BigInt(L(on(Bn(t)).toString(16)))}function yh(e){const n=BigInt(se("CONTRACT_CLASS_V0.1.0")),r=xo(e.entry_points_by_type.EXTERNAL),i=xo(e.entry_points_by_type.L1_HANDLER),a=xo(e.entry_points_by_type.CONSTRUCTOR),o=Ym(e),s=ue(e.sierra_program.map(l=>BigInt(l)));return S(ue([n,r,i,a,o,s]))}function bh(e){const t=V(e)?Ln(e):e;return"sierra_program"in t?yh(t):gh(t)}var Zm={};K(Zm,{ZeroFeeEstimate:()=>wh,compressProgram:()=>bc,decompressProgram:()=>ma,formatSignature:()=>Ri,getFullPublicKey:()=>e1,intDAM:()=>Xm,randomAddress:()=>Km,resourceBoundsToBigInt:()=>t1,resourceBoundsToEstimateFeeResponse:()=>Wm,resourceBoundsToHexString:()=>Xn,signatureToDecimalArray:()=>Gm,signatureToHexArray:()=>Xt,toFeeVersion:()=>Jm,toOverheadOverallFee:()=>ts,toOverheadResourceBounds:()=>wa,toTransactionVersion:()=>Eh,v3Details:()=>Qm,zeroResourceBounds:()=>mh});function bc(e){const t=V(e)?e:ut(e),n=Hy(t);return If(n)}function ma(e){if(Array.isArray(e))return e;const t=vf(Fy(xf(e)));return Ln(t)}function Km(){const e=kd.randomPrivateKey();return Nd(e)}function Ri(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(t=>S(t));try{const{r:t,s:n}=e;return[S(t),S(n)]}catch{throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Gm(e){return zf(Ri(e))}function Xt(e){return cr(Ri(e))}function mh(){return wa(wh(),!1)}function wa(e,t=Rt.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:Pe(e.l2_gas_consumed,t!==!1?t.l2_gas.max_amount:0),max_price_per_unit:Pe(e.l2_gas_price,t!==!1?t.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:Pe(e.l1_gas_consumed,t!==!1?t.l1_gas.max_amount:0),max_price_per_unit:Pe(e.l1_gas_price,t!==!1?t.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:Pe(e.l1_data_gas_consumed,t!==!1?t.l1_data_gas.max_amount:0),max_price_per_unit:Pe(e.l1_data_gas_price,t!==!1?t.l1_data_gas.max_price_per_unit:0)}}}function Wm(e){return{resourceBounds:e,overall_fee:e.l1_gas.max_amount*e.l1_gas.max_price_per_unit+e.l1_data_gas.max_amount*e.l1_data_gas.max_price_per_unit+e.l2_gas.max_amount*e.l2_gas.max_price_per_unit,unit:"FRI"}}function ts(e,t=Rt.get("resourceBoundsOverhead")){return Pe(e.l1_gas_consumed,t!==!1?t.l1_gas.max_amount:0)*Pe(e.l1_gas_price,t!==!1?t.l1_gas.max_price_per_unit:0)+Pe(e.l1_data_gas_consumed,t!==!1?t.l1_data_gas.max_amount:0)*Pe(e.l1_data_gas_price,t!==!1?t.l1_data_gas.max_price_per_unit:0)+Pe(e.l2_gas_consumed,t!==!1?t.l2_gas.max_amount:0)*Pe(e.l2_gas_price,t!==!1?t.l2_gas.max_price_per_unit:0)}function wh(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function Xm(e){if(e===da.L1)return $l.L1;if(e===da.L2)return $l.L2;throw Error("EDAM conversion")}function Eh(e,t){const n=S(t||e);if(!Object.values(Eb).includes(n))throw Error(`${t?"providedVersion":"defaultVersion"} ${n} is not ETransactionVersion`);return n}function Jm(e){if(!e)return;const t=S(e);if(t===Oe.V0)return Oe.F0;if(t===Oe.V1)return Oe.F1;if(t===Oe.V2)return Oe.F2;if(t===Oe.V3)return Oe.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function Qm(e){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||da.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||da.L1,resourceBounds:e.resourceBounds??mh()}}function e1(e){const t=S(e);return L(br(js(t,!1)))}function Xn(e){const t=n=>{if(ke(n))return S(n);if(G(n)){const r={};return Object.keys(n).forEach(i=>{r[i]=t(n[i])}),r}return n};return t(e)}function t1(e){const t=n=>{if(V(n))return BigInt(n);if(G(n)){const r={};return Object.keys(n).forEach(i=>{r[i]=t(n[i])}),r}return n};return t(e)}function fr(e){return"sierra_program"in(V(e)?Ln(e):e)}function n1(e){const t={...e};if(fr(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=ph(e.casm)),!t.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??bh(e.contract),!t.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}var r1={};K(r1,{ethRandomPrivateKey:()=>i1,validateAndParseEthAddress:()=>mc});function i1(){return Nf(br(bf.utils.randomPrivateKey()))}function mc(e){rc(e,Ie,2n**160n-1n,"Ethereum Address ");const t=L(ye(S(e)).padStart(40,"0"));return m(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}var Ea=typeof globalThis<"u"&&globalThis.fetch.bind(globalThis)||typeof window<"u"&&window.fetch.bind(window)||typeof global<"u"&&global.fetch.bind(global)||(()=>{throw new me("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")}),a1={};K(a1,{Block:()=>M,createSierraContractClass:()=>Ah,extractAbi:()=>l1,getDefaultNodeUrl:()=>hi,getDefaultNodes:()=>Th,getSupportedRpcVersions:()=>u1,parseContract:()=>c1,validBlockTags:()=>Sh,wait:()=>Jt});function Mr(e){const t=e.version?S(e.version):Oe.V3;return t===Oe.V3||t===Oe.F3}function $t(e,t){const n=e.split("."),r=t.split(".");return n.every((i,a)=>i==="*"||i===r[a])}function wc(e,t={allowAnyPatchVersion:!1}){return Object.values(rn).some(n=>$t(t.allowAnyPatchVersion?o1(n):n,e))}function o1(e){const t=e.split(".");return t.length<3?e:`${t[0]}.${t[1]}.*`}function s1(e){const[t,n]=e.replace(/^v/,"").split(".");return`v${t}_${n}`}function Jt(e){return new Promise(t=>{setTimeout(t,e)})}function Ah(e){const t={...e};return delete t.sierra_program_debug_info,t.abi=fi(ut(e.abi)),t.sierra_program=fi(ut(e.sierra_program)),t.sierra_program=bc(t.sierra_program),t}function c1(e){const t=V(e)?Ln(e):e;return fr(e)?Ah(t):{...t,..."program"in t&&{program:bc(t.program)}}}function l1(e){return V(e.abi)?Ln(e.abi):e.abi}var hi=(e,t=!1,n)=>{t||pe.info("Using default public node url, please provide nodeUrl in provider options!");const i=Th(n??Rt.get("rpcVersion"))[e??mr.SN_SEPOLIA],a=Math.floor(Math.random()*i.length);return i[a]};function Th(e){const t={...$f};return Object.keys(t).forEach(function(n,r){t[n]=t[n].map(i=>`${i}${s1(e)}`)}),t}function u1(){return[...new Set(Object.values(rn))]}var Sh=Object.values(Mt),M=class{constructor(e){w(this,"hash",null);w(this,"number",null);w(this,"tag",null);w(this,"valueOf",()=>this.number);w(this,"toString",()=>this.hash);this.setIdentifier(e)}setIdentifier(e){if(V(e))if(cc(e))this.number=parseInt(e,10);else if(Fe(e))this.hash=e;else if(Sh.includes(e))this.tag=e;else throw TypeError(`Block identifier unmanaged: ${e}`);else ke(e)?this.hash=S(e):W(e)?this.number=e:this.tag=Mt.LATEST;if(W(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}get queryIdentifier(){return this.number!==null?`blockNumber=${this.number}`:this.hash!==null?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return this.number!==null?{block_number:this.number}:this.hash!==null?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}},d1={};K(d1,{fromCallsToExecuteCalldata:()=>xh,fromCallsToExecuteCalldata_cairo1:()=>Ih,getCompiledCalldata:()=>f1,getExecuteCalldata:()=>h1,getVersionsByType:()=>Ec,transformCallsToMulticallArrays:()=>vh});function f1(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}var vh=e=>{const t=[],n=[];return e.forEach(r=>{const i=Z.compile(r.calldata||[]);t.push({to:He(r.contractAddress).toString(10),selector:He(ee(r.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:i.length.toString()}),n.push(...i)}),{callArray:t,calldata:Z.compile({calldata:n})}},xh=e=>{const{callArray:t,calldata:n}=vh(e);return[...Z.compile({callArray:t}),...n]},Ih=e=>{const t=e.map(n=>({contractAddress:n.contractAddress,entrypoint:n.entrypoint,calldata:Array.isArray(n.calldata)&&"__compiled__"in n.calldata?n.calldata:Z.compile(n.calldata)}));return Z.compile({orderCalls:t})},h1=(e,t="0")=>t==="1"?Ih(e):xh(e);function Ec(e){return e==="fee"?{v3:Oe.F3}:{v3:Oe.V3}}var Io={headers:{"Content-Type":"application/json"},blockIdentifier:Mt.LATEST,retries:200},g1=class{constructor(e){w(this,"id","RPC081");w(this,"channelSpecVersion",rn.v0_8_1);w(this,"nodeUrl");w(this,"headers");w(this,"requestId");w(this,"blockIdentifier");w(this,"retries");w(this,"waitMode");w(this,"chainId");w(this,"specVersion");w(this,"transactionRetryIntervalFallback");w(this,"batchClient");w(this,"baseFetch");const{baseFetch:t,batch:n,blockIdentifier:r,chainId:i,headers:a,nodeUrl:o,retries:s,specVersion:l,transactionRetryIntervalFallback:c,waitMode:u}=e||{};Object.values(mr).includes(o)?this.nodeUrl=hi(o,e==null?void 0:e.default,this.channelSpecVersion):o?this.nodeUrl=o:this.nodeUrl=hi(void 0,e==null?void 0:e.default,this.channelSpecVersion),this.baseFetch=t||Rt.get("fetch")||Ea,this.blockIdentifier=r??Io.blockIdentifier,this.chainId=i,this.headers={...Io.headers,...a},this.retries=s??Io.retries,this.specVersion=l,this.transactionRetryIntervalFallback=c,this.waitMode=u??!1,this.requestId=0,W(n)&&(this.batchClient=new Mf({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),pe.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ut(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new ui(n,e,t);if(r instanceof me)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){var n;try{if(this.batchClient){const{error:o,result:s}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,o),s}const r=await this.fetch(e,t,this.requestId+=1),{error:i,result:a}=await r.json();return this.errorHandler(e,t,i),a}catch(r){throw this.errorHandler(e,t,(n=r==null?void 0:r.response)==null?void 0:n.data,r),r}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const e=await this.fetchEndpoint("starknet_specVersion");if($t(this.channelSpecVersion,e)||pe.error(ie.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!wc(e))throw new me(`${ie.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getMessagesStatus(e){const t=S(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(e=[],t=[],n=[],r=this.blockIdentifier){const i=new M(r).identifier,a=cr(e),o=cr(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:a,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(e){const t=S(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e,t=this.blockIdentifier){const n=S(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=S(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new M(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=S(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=S(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=S(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=t,a=new M(n).identifier,o=[];return r&&o.push(Hr.SKIP_VALIDATE),i&&o.push(Hr.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:a,transactions:e.map(s=>this.buildTransaction(s)),simulation_flags:o})}async waitForTransaction(e,t){const n=S(e);let r=(t==null?void 0:t.retries)??this.retries,i=(t==null?void 0:t.lifeCycleRetries)??3,a=!1,o=!1;const s=(t==null?void 0:t.retryInterval)??this.transactionRetryIntervalDefault,l=(t==null?void 0:t.errorStates)??[Fr.REJECTED],c=(t==null?void 0:t.successStates)??[Fr.ACCEPTED_ON_L2,Fr.ACCEPTED_ON_L1],u={[Qt.RECEIVED]:ie.txEvictedFromMempool,[Qt.PRE_CONFIRMED]:ie.consensusFailed,[Qt.CANDIDATE]:ie.txFailsBlockBuildingValidation},h=[];let d;for(;!a;){await Jt(s);try{d=await this.getTransactionStatus(n),h.push(d.finality_status);const _=d.execution_status,y=d.finality_status;if(!y)throw new Error("waiting for transaction status");if(l.includes(_)||l.includes(y)){const g=`${_}: ${y}`,p=new Error(g);throw p.response=d,o=!0,p}else(c.includes(_)||c.includes(y))&&(a=!0)}catch(_){if(_ instanceof Error&&o)throw _;if(_ instanceof ui&&_.isType("TXN_HASH_NOT_FOUND")){pe.info("txLife: ",h);const y=u[h.at(-1)];if(y&&i<=0)throw new Error(y);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;f===null;){try{f=await this.getTransactionReceipt(n)}catch{if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Jt(s)}return f}getStorageAt(e,t,n=this.blockIdentifier){const r=S(e),i=nc(t),a=new M(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:a})}getClassHashAt(e,t=this.blockIdentifier){const n=S(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=S(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=S(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}={}){const r=new M(t).identifier,i={simulation_flags:n?[Hr.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(a=>this.buildTransaction(a,"fee")),block_id:r,...i})}async invoke(e,t){let n;if(Mr(t))if(Ki(t.resourceBounds))n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:Lt.INVOKE,sender_address:e.contractAddress,calldata:Z.toHex(e.calldata),version:Le.V3,signature:Xt(e.signature),nonce:S(t.nonce),resource_bounds:Xn(t.resourceBounds),tip:S(t.tip),paymaster_data:t.paymasterData.map(r=>S(r)),account_deployment_data:t.accountDeploymentData.map(r=>S(r)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error(ie.SWOldV3);else throw Error(ie.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},i){let a;if(fr(e)&&Mr(i))if(Ki(i.resourceBounds))a=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Lt.DECLARE,sender_address:n,compiled_class_hash:r||"",version:Le.V3,signature:Xt(t),nonce:S(i.nonce),contract_class:{sierra_program:ma(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:Xn(i.resourceBounds),tip:S(i.tip),paymaster_data:i.paymasterData.map(o=>S(o)),account_deployment_data:i.accountDeploymentData.map(o=>S(o)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}});else throw Error(ie.SWOldV3);else throw Error(ie.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await a).transaction_hash):a}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},i){let a;if(Mr(i))if(Ki(i.resourceBounds))a=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:Lt.DEPLOY_ACCOUNT,version:Le.V3,signature:Xt(r),nonce:S(i.nonce),contract_address_salt:S(n||0),constructor_calldata:Z.toHex(t||[]),class_hash:S(e),resource_bounds:Xn(i.resourceBounds),tip:S(i.tip),paymaster_data:i.paymasterData.map(o=>S(o)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}});else throw Error(ie.SWOldV3);else throw Error(ie.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await a).transaction_hash):a}callContract(e,t=this.blockIdentifier){const n=new M(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:ee(e.entrypoint),calldata:Z.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:a}=e,o={from_address:mc(n),to_address:S(r),entry_point_selector:xi(i),payload:ic(a)},s=new M(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:s})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=Ec(t);let r;if(Mr(e))r={signature:Xt(e.signature),nonce:S(e.nonce),resource_bounds:Xn(e.resourceBounds),tip:S(e.tip),paymaster_data:e.paymasterData.map(i=>S(i)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(i=>S(i))};else throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(e.type===Lt.INVOKE)return{type:Lt.INVOKE,sender_address:e.contractAddress,calldata:Z.toHex(e.calldata),version:S(e.version||n.v3),...r};if(e.type===Lt.DECLARE){if(!fr(e.contract))throw pe.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:e.type,contract_class:{...e.contract,sierra_program:ma(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:S(e.version||n.v3),...r}}if(e.type===Lt.DEPLOY_ACCOUNT){const{account_deployment_data:i,...a}=r;return{type:e.type,constructor_calldata:Z.toHex(e.constructorCalldata||[]),class_hash:S(e.classHash),contract_address_salt:S(e.addressSalt||0),version:S(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},Zn={};K(Zn,{RpcChannel:()=>_1});var ko={headers:{"Content-Type":"application/json"},blockIdentifier:Mt.LATEST,retries:200},_1=class{constructor(e){w(this,"id","RPC090");w(this,"channelSpecVersion",rn.v0_9_0);w(this,"nodeUrl");w(this,"headers");w(this,"requestId");w(this,"blockIdentifier");w(this,"retries");w(this,"waitMode");w(this,"chainId");w(this,"specVersion");w(this,"transactionRetryIntervalFallback");w(this,"batchClient");w(this,"baseFetch");const{baseFetch:t,batch:n,blockIdentifier:r,chainId:i,headers:a,nodeUrl:o,retries:s,specVersion:l,transactionRetryIntervalFallback:c,waitMode:u}=e||{};Object.values(mr).includes(o)?this.nodeUrl=hi(o,e==null?void 0:e.default,this.channelSpecVersion):o?this.nodeUrl=o:this.nodeUrl=hi(void 0,e==null?void 0:e.default,this.channelSpecVersion),this.baseFetch=t||Rt.get("fetch")||Ea,this.blockIdentifier=r??ko.blockIdentifier,this.chainId=i,this.headers={...ko.headers,...a},this.retries=s??ko.retries,this.specVersion=l,this.transactionRetryIntervalFallback=c,this.waitMode=u??!1,this.requestId=0,W(n)&&(this.batchClient=new Mf({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),pe.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ut(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new ui(n,e,t);if(r instanceof me)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){var n;try{if(this.batchClient){const{error:o,result:s}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,o),s}const r=await this.fetch(e,t,this.requestId+=1),{error:i,result:a}=await r.json();return this.errorHandler(e,t,i),a}catch(r){throw this.errorHandler(e,t,(n=r==null?void 0:r.response)==null?void 0:n.data,r),r}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const e=await this.fetchEndpoint("starknet_specVersion");if($t(this.channelSpecVersion,e)||pe.error(ie.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!wc(e))throw new me(`${ie.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getMessagesStatus(e){const t=S(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(e=[],t=[],n=[],r=this.blockIdentifier){const i=new M(r).identifier,a=cr(e),o=cr(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:a,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(e){const t=S(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e,t=this.blockIdentifier){const n=S(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=S(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new M(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=S(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=S(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=S(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=t,a=new M(n).identifier,o=[];return r&&o.push(zr.SKIP_VALIDATE),i&&o.push(zr.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:a,transactions:e.map(s=>this.buildTransaction(s)),simulation_flags:o})}async waitForTransaction(e,t){const n=S(e);let r=(t==null?void 0:t.retries)??this.retries,i=(t==null?void 0:t.lifeCycleRetries)??3,a=!1,o=!1;const s=(t==null?void 0:t.retryInterval)??this.transactionRetryIntervalDefault,l=(t==null?void 0:t.errorStates)??[],c=(t==null?void 0:t.successStates)??[fn.ACCEPTED_ON_L2,fn.ACCEPTED_ON_L1],u={[Qt.RECEIVED]:ie.txEvictedFromMempool,[Qt.PRE_CONFIRMED]:ie.consensusFailed,[Qt.CANDIDATE]:ie.txFailsBlockBuildingValidation},h=[];let d;for(;!a;){await Jt(s);try{d=await this.getTransactionStatus(n),h.push(d.finality_status);const _=d.execution_status,y=d.finality_status;if(!y)throw new Error("waiting for transaction status");if(l.includes(_)||l.includes(y)){const g=`${_}: ${y}`,p=new Error(g);throw p.response=d,o=!0,p}else(c.includes(_)||c.includes(y))&&(a=!0)}catch(_){if(_ instanceof Error&&o)throw _;if(_ instanceof ui&&_.isType("TXN_HASH_NOT_FOUND")){pe.info("txLife: ",h);const y=u[h.at(-1)];if(y&&i<=0)throw new Error(y);i-=1}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let f=null;for(;f===null;){try{f=await this.getTransactionReceipt(n)}catch{if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Jt(s)}return f}async fastWaitForTransaction(e,t,n,r){const i=BigInt(n);let a=(r==null?void 0:r.retries)??50;const o=(r==null?void 0:r.retryInterval)??500,s=[Os.REVERTED],l=[fn.ACCEPTED_ON_L2,fn.ACCEPTED_ON_L1,fn.PRE_CONFIRMED];let c;const u=new Date().getTime();for(;a>0;){await Jt(o),c=await this.getTransactionStatus(e),pe.info(`${a} ${JSON.stringify(c)} ${(new Date().getTime()-u)/1e3}s.`);const h=c.execution_status??"",d=c.finality_status;if(s.includes(h)){const f=`${h}: ${d}`,_=new Error(f);throw _.response=c,_}else if(l.includes(d)){let f=i;for(;f===i&&a>0;){if(f=BigInt(await this.getNonceForAddress(t,Mt.PRE_CONFIRMED)),pe.info(`${a} Checking new nonce ${f} ${(new Date().getTime()-u)/1e3}s.`),f!==i)return!0;await Jt(o),a-=1}return!1}a-=1}return!1}getStorageAt(e,t,n=this.blockIdentifier){const r=S(e),i=nc(t),a=new M(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:a})}getClassHashAt(e,t=this.blockIdentifier){const n=S(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=S(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=S(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}={}){const r=new M(t).identifier,i={simulation_flags:n?[zr.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(a=>this.buildTransaction(a,"fee")),block_id:r,...i})}async invoke(e,t){const n=this.buildTransaction({type:U.ETransactionType.INVOKE,...e,...t},"transaction"),r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(e,t){const n=this.buildTransaction({type:U.ETransactionType.DECLARE,...e,...t},"transaction"),r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(e,t){const n=this.buildTransaction({type:U.ETransactionType.DEPLOY_ACCOUNT,...e,...t},"transaction"),r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(e,t=this.blockIdentifier){const n=new M(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:ee(e.entrypoint),calldata:Z.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:a}=e,o={from_address:mc(n),to_address:S(r),entry_point_selector:xi(i),payload:ic(a)},s=new M(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:s})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=Ec(t);m(Mr(e),ie.legacyTxRPC08Message),m(t!=="transaction"||Ki(e.resourceBounds),ie.SWOldV3);const r={signature:Xt(e.signature),nonce:S(e.nonce),resource_bounds:Xn(e.resourceBounds),tip:S(e.tip),paymaster_data:e.paymasterData.map(i=>S(i)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(i=>S(i)),version:Eh(n.v3,e.version)};if(e.type===U.ETransactionType.INVOKE)return{type:Rs.INVOKE,sender_address:e.contractAddress,calldata:Z.toHex(e.calldata),...r};if(e.type===U.ETransactionType.DECLARE)return m(fr(e.contract),"Declaring non Sierra contract using RPC 0.9"),{type:e.type,contract_class:{...e.contract,sierra_program:ma(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,...r};if(e.type===U.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:i,...a}=r;return{type:e.type,constructor_calldata:Z.toHex(e.constructorCalldata||[]),class_hash:S(e.classHash),contract_address_salt:S(e.addressSalt||0),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}};typeof WebSocket<"u"&&WebSocket||typeof globalThis<"u"&&globalThis.WebSocket||typeof window<"u"&&window.WebSocket&&window.WebSocket.bind(window)||typeof global<"u"&&global.WebSocket;var zl=class{constructor(e){w(this,"resourceBoundsOverhead");this.resourceBoundsOverhead=e}parseGetBlockResponse(e){return e}parseTransactionReceipt(e){return e}parseFeeEstimateBulkResponse(e){return e.map(t=>({resourceBounds:wa(t,this.resourceBoundsOverhead),overall_fee:ts(t,this.resourceBoundsOverhead),unit:t.unit}))}parseSimulateTransactionResponse(e){return e.map(t=>({transaction_trace:t.transaction_trace,resourceBounds:wa(t.fee_estimation,this.resourceBoundsOverhead),overall_fee:ts(t.fee_estimation,this.resourceBoundsOverhead),unit:t.fee_estimation.unit}))}parseContractClassResponse(e){return{...e,abi:V(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}};function p1(e){return e.version==="0x3"&&"tip"in e&&V(e.tip)&&(e.type==="INVOKE"||e.type==="DECLARE"||e.type==="DEPLOY_ACCOUNT")}function y1(e){return!!e.channel.batchClient}function kh(e,t=!0){return e.transactions.filter(p1).map(n=>BigInt(n.tip)).filter(n=>t||n>0n)}function Ch(e,t){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:e,transactionsTipsFound:t}}}function jl(e,t){const n=t/100*(e.length-1),r=Math.floor(n),i=Math.ceil(n);if(r===i)return e[r];const a=n-r,o=e[r],c=(e[i]-o)*BigInt(Math.round(a*1e3))/1000n;return o+c}function Bh(e){m(e.length>0,"Cannot calculate statistics from empty tip array");const t=e.reduce((f,_)=>_<f?_:f,ua.max),n=e.reduce((f,_)=>_>f?_:f,0n),i=e.reduce((f,_)=>f+_,0n)/BigInt(e.length),a=[...e].sort((f,_)=>f<_?-1:f>_?1:0),o=Math.floor(a.length/2);let s;a.length%2===0?s=(a[o-1]+a[o])/2n:s=a[o];const l=new Map;e.forEach(f=>{l.set(f,(l.get(f)||0)+1)});const{modeTip:c}=Array.from(l.entries()).reduce((f,[_,y])=>y>f.maxCount||y===f.maxCount&&_<f.modeTip?{maxCount:y,modeTip:_}:f,{maxCount:0,modeTip:0n}),u=jl(a,90),h=jl(a,95);return{minTip:t,maxTip:n,averageTip:i,medianTip:s,modeTip:c,recommendedTip:s,p90Tip:u,p95Tip:h}}async function Nh(e,t){try{const n=await e.getBlockWithTxs(t);return W(n.block_number)?n.block_number:(await e.getBlockLatestAccepted()).block_number}catch(n){throw new me(`Failed to determine starting block number: ${n instanceof Error?n.message:"Unknown error"}`)}}async function b1(e,t){try{return await e.getBlockWithTxs(t)}catch(n){return pe.warn(`Failed to fetch block ${t}:`,n),null}}function Rh(e,t){const n=Math.max(0,e-t+1),r=e-n+1;return Array.from({length:r},(i,a)=>e-a)}async function m1(e,t){const n=t.map(async r=>{try{return await e.getBlockWithTxs(r)}catch(i){return pe.warn(`Failed to fetch block ${r} in parallel:`,i),null}});return Promise.all(n)}async function w1(e,t,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:a=!0}=n;try{const o=await Nh(e,t),s=Rh(o,r),l=await m1(e,s),c=l.filter(d=>d!==null).flatMap(d=>kh(d,a)),u=l.filter(d=>d!==null).length;return c.length<i?(pe.error(`Insufficient transaction data: found ${c.length} V3 transactions with tips in ${u} blocks (block range: ${Math.max(0,o-r+1)}-${o}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),Ch(u,c)):{...Bh(c),metrics:{blocksAnalyzed:u,transactionsTipsFound:c}}}catch(o){throw new me(`Failed to analyze tip statistics (parallel): ${o instanceof Error?o.message:"Unknown error"}`)}}async function E1(e,t,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:a=!0}=n;try{const o=await Nh(e,t),s=Rh(o,r),l=[];let c=0;for(const h of s){const d=await b1(e,h);if(d){c+=1;const f=kh(d,a);if(l.push(...f),l.length>=i)break}}return l.length<i?(pe.error(`Insufficient transaction data: found ${l.length} V3 transactions with tips in ${c} blocks (block range: ${Math.max(0,o-r+1)}-${o}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),Ch(c,l)):{...Bh(l),metrics:{blocksAnalyzed:c,transactionsTipsFound:l}}}catch(o){throw new me(`Failed to analyze tip statistics (sequential): ${o instanceof Error?o.message:"Unknown error"}`)}}async function A1(e,t=Mt.LATEST,n={}){const{maxBlocks:r=3,minTxsNecessary:i=10}=n;return m(Number.isInteger(r),"maxBlocks parameter must be an integer"),m(r>=1,"maxBlocks parameter must be greater than or equal to 1"),m(r<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),m(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),m(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),y1(e)?w1(e,t,n):E1(e,t,n)}var ql=class ns{constructor(t){w(this,"statusReceipt");w(this,"value");w(this,"match");w(this,"isSuccess");w(this,"isReverted");w(this,"isError");Object.assign(this,t);const[n,r]=ns.isSuccess(t)?["SUCCEEDED",t]:ns.isReverted(t)?["REVERTED",t]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:n,writable:!1,enumerable:!1,configurable:!1},value:{value:r,writable:!1,enumerable:!1,configurable:!1},match:{value(i){return n in i?i[n](r):i._()},writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>n==="SUCCEEDED",writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>n==="REVERTED",writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>n==="ERROR",writable:!1,enumerable:!1,configurable:!1}})}static isSuccess(t){return t.execution_status===fa.SUCCEEDED}static isReverted(t){return t.execution_status===fa.REVERTED}},T1={[fa.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:e=>e,getValue:e=>e},[fa.REVERTED]:{statusReceipt:"REVERTED",getBaseData:e=>e,getValue:e=>e}};function Yl(e){const t=T1[e.execution_status];let n;if(t){const{statusReceipt:r,getBaseData:i,getValue:a}=t,o=a(e);n={...i(e),statusReceipt:r,value:o,match(s){return r in s?s[r](o):s._()},isSuccess(){return r==="SUCCEEDED"},isReverted(){return r==="REVERTED"},isError(){return!1}}}else{const r=new Error("Unknown response type");n={statusReceipt:"ERROR",value:r,match(i){return"ERROR"in i?i.ERROR(r):i._()},isSuccess(){return!1},isReverted(){return!1},isError(){return!0}}}return Object.setPrototypeOf(n,ql.prototype),Object.defineProperty(n,"constructor",{value:ql,writable:!1,enumerable:!1,configurable:!1}),n}var S1={};K(S1,{encodeData:()=>Vh,encodeType:()=>Uh,encodeValue:()=>Kr,getDependencies:()=>Tc,getMessageHash:()=>Sc,getStructHash:()=>gi,getTypeHash:()=>$h,isMerkleTreeType:()=>Ph,prepareSelector:()=>Lh,validateTypedData:()=>Wa,verifyMessage:()=>k1});var v1={};K(v1,{MerkleTree:()=>Ac,proofMerklePath:()=>Oh});var Ac=class Xi{constructor(t,n=di){w(this,"leaves");w(this,"branches",[]);w(this,"root");w(this,"hashMethod");this.hashMethod=n,this.leaves=t,this.root=this.build(t)}build(t){if(t.length===1)return t[0];t.length!==this.leaves.length&&this.branches.push(t);const n=[];for(let r=0;r<t.length;r+=2)r+1===t.length?n.push(Xi.hash(t[r],"0x0",this.hashMethod)):n.push(Xi.hash(t[r],t[r+1],this.hashMethod));return this.build(n)}static hash(t,n,r=di){const[i,a]=[BigInt(t),BigInt(n)].sort((o,s)=>o>=s?1:-1);return r(i,a)}getProof(t,n=this.leaves,r=[]){const i=n.indexOf(t);if(i===-1)throw new Error("leaf not found");if(n.length===1)return r;const a=i%2===0,o=(a?n[i+1]:n[i-1])??"0x0",s=[...r,o],l=this.leaves.length===n.length?-1:this.branches.findIndex(u=>u.length===n.length),c=this.branches[l+1]??[this.root];return this.getProof(Xi.hash(a?t:o,a?o:t,this.hashMethod),c,s)}};function Oh(e,t,n,r=di){if(n.length===0)return e===t;const[i,...a]=n;return Oh(e,Ac.hash(t,i,r),a,r)}var x1={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},$e={[U.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:fh,hashMerkleMethod:uh,escapeTypeString:e=>`"${e}"`,presetTypes:x1},[U.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:dh,hashMerkleMethod:di,escapeTypeString:e=>e,presetTypes:{}}};function Yi(e,t,{min:n,max:r}){const i=BigInt(e);m(i>=n&&i<=r,`${i} (${t}) is out of bounds [${n}, ${r}]`)}function Dh({types:e,domain:t}){var n;if($e[U.TypedDataRevision.ACTIVE].domain in e&&((n=t.revision)==null?void 0:n.toString())===U.TypedDataRevision.ACTIVE)return U.TypedDataRevision.ACTIVE;if($e[U.TypedDataRevision.LEGACY].domain in e&&(t.revision??U.TypedDataRevision.LEGACY)===U.TypedDataRevision.LEGACY)return U.TypedDataRevision.LEGACY}function Et(e){try{return S(e)}catch{if(V(e))return S(se(e));throw new Error(`Invalid BigNumberish: ${e}`)}}function Wa(e){const t=e;return!!(t.message&&t.primaryType&&t.types&&Dh(t))}function Lh(e){return Fe(e)?e:ee(e)}function Ph(e){return e.type==="merkletree"}function Tc(e,t,n=[],r="",i=U.TypedDataRevision.LEGACY){let a=[t];return t[t.length-1]==="*"?a=[t.slice(0,-1)]:i===U.TypedDataRevision.ACTIVE&&(t==="enum"?a=[r]:t.match(/^\(.*\)$/)&&(a=t.slice(1,-1).split(",").map(o=>o[o.length-1]==="*"?o.slice(0,-1):o))),a.filter(o=>!n.includes(o)&&e[o]).reduce((o,s)=>[...o,...[s,...e[s].reduce((l,c)=>[...l,...Tc(e,c.type,l,c.contains,i).filter(u=>!l.includes(u))],[])].filter(l=>!o.includes(l))],[])}function I1(e,t){if(t.parent&&t.key){const r=e[t.parent].find(a=>a.name===t.key);if(!Ph(r))throw new Error(`${t.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return r.contains}return"raw"}function Uh(e,t,n=U.TypedDataRevision.LEGACY){const r=n===U.TypedDataRevision.ACTIVE?{...e,...$e[n].presetTypes}:e,[i,...a]=Tc(r,t,void 0,void 0,n),o=i?[i,...a.sort()]:[],s=$e[n].escapeTypeString;return o.map(l=>{const c=r[l].map(u=>{const h=u.type==="enum"&&n===U.TypedDataRevision.ACTIVE?u.contains:u.type,d=h.match(/^\(.*\)$/)?`(${h.slice(1,-1).split(",").map(f=>f&&s(f)).join(",")})`:s(h);return`${s(u.name)}:${d}`});return`${s(l)}(${c})`}).join("")}function $h(e,t,n=U.TypedDataRevision.LEGACY){return ee(Uh(e,t,n))}function Kr(e,t,n,r={},i=U.TypedDataRevision.LEGACY){if(e[t])return[t,gi(e,t,n,i)];if($e[i].presetTypes[t])return[t,gi($e[i].presetTypes,t,n,i)];if(t.endsWith("*")){const a=n.map(o=>Kr(e,t.slice(0,-1),o,void 0,i)[1]);return[t,$e[i].hashMethod(a)]}switch(t){case"enum":{if(i===U.TypedDataRevision.ACTIVE){const[a,o]=Object.entries(n)[0],s=e[r.parent].find(d=>d.name===r.key),l=e[s.contains],c=l.find(d=>d.name===a),u=l.indexOf(c),h=c.type.slice(1,-1).split(",").map((d,f)=>{if(!d)return d;const _=o[f];return Kr(e,d,_,void 0,i)[1]});return[t,$e[i].hashMethod([u,...h])]}return[t,Et(n)]}case"merkletree":{const a=I1(e,r),o=n.map(l=>Kr(e,a,l,void 0,i)[1]),{root:s}=new Ac(o,$e[i].hashMerkleMethod);return["felt",s]}case"selector":return["felt",Lh(n)];case"string":{if(i===U.TypedDataRevision.ACTIVE){const a=dc(n),o=[a.data.length,...a.data,a.pending_word,a.pending_word_len];return[t,$e[i].hashMethod(o)]}return[t,Et(n)]}case"i128":{if(i===U.TypedDataRevision.ACTIVE){const a=BigInt(n);return Yi(a,t,Wn),[t,Et(a<0n?re+a:a)]}return[t,Et(n)]}case"timestamp":case"u128":return i===U.TypedDataRevision.ACTIVE&&Yi(n,t,Gn),[t,Et(n)];case"felt":case"shortstring":return i===U.TypedDataRevision.ACTIVE&&Yi(Et(n),t,ua),[t,Et(n)];case"ClassHash":case"ContractAddress":return i===U.TypedDataRevision.ACTIVE&&Yi(n,t,ua),[t,Et(n)];case"bool":return i===U.TypedDataRevision.ACTIVE&&m(ci(n),`Type mismatch for ${t} ${n}`),[t,Et(n)];default:{if(i===U.TypedDataRevision.ACTIVE)throw new Error(`Unsupported type: ${t}`);return[t,Et(n)]}}}function Vh(e,t,n,r=U.TypedDataRevision.LEGACY){const i=e[t]??$e[r].presetTypes[t],[a,o]=i.reduce(([s,l],c)=>{if(n[c.name]===void 0||n[c.name]===null&&c.type!=="enum")throw new Error(`Cannot encode data: missing data for '${c.name}'`);const u=n[c.name],h={parent:t,key:c.name},[d,f]=Kr(e,c.type,u,h,r);return[[...s,d],[...l,f]]},[["felt"],[$h(e,t,r)]]);return[a,o]}function gi(e,t,n,r=U.TypedDataRevision.LEGACY){return $e[r].hashMethod(Vh(e,t,n,r)[1])}function Sc(e,t){if(!Wa(e))throw new Error("Typed data does not match JSON schema");const n=Dh(e),{domain:r,hashMethod:i}=$e[n],a=[se("StarkNet Message"),gi(e.types,r,e.domain,n),t,gi(e.types,e.primaryType,e.message,n)];return i(a)}function k1(e,t,n,r){const i=Wa(e);if(!Nn(e)&&!i)throw new Error("message has a wrong format.");if(i&&r===void 0)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!Nn(r))throw new Error("accountAddress shall be a BigNumberish");const a=i?Sc(e,r):S(e),o=Array.isArray(t)?new jr(BigInt(t[0]),BigInt(t[1])):t,s=S(n);return Id(o,a,s)}async function C1(e,t,n,r,i,a){const o=Wa(t);if(!Nn(t)&&!o)throw new Error("message has a wrong format.");if(!Nn(r))throw new Error("accountAddress shall be a BigNumberish");const s=o?Sc(t,r):S(t),l=i?[i]:["isValidSignature","is_valid_signature"],c=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let u;for(const h of l)try{const d=await e.callContract({contractAddress:S(r),entrypoint:h,calldata:Z.compile({hash:He(s).toString(),signature:Ri(n)})});if(c.nokResponse.includes(d[0].toString()))return!1;if(c.okResponse.length===0||c.okResponse.includes(d[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(d){if(c.error.some(f=>d.message.includes(f)))return!1;u=d}throw Error(`Signature verification Error: ${u}`)}async function B1(e,t=e.blockIdentifier){const n=await e.getBlockWithTxHashes(t);return{l1DataGasPrice:BigInt(n.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(n.l1_gas_price.price_in_fri),l2GasPrice:BigInt(n.l2_gas_price.price_in_fri)}}var Mh=class{constructor(e){w(this,"responseParser");w(this,"channel");w(this,"getStateUpdate",this.getBlockStateUpdate);if(e&&"channel"in e)this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new zl;else{const t=e;if(t&&t.specVersion)if($t("0.8",t.specVersion))this.channel=new Ur.RpcChannel({...t,waitMode:!1});else if($t("0.9",t.specVersion))this.channel=new Zn.RpcChannel({...t,waitMode:!1});else throw new Error(`unsupported channel for spec version: ${t.specVersion}`);else if($t("0.8",Rt.get("rpcVersion")))this.channel=new Ur.RpcChannel({...t,waitMode:!1});else if($t("0.9",Rt.get("rpcVersion")))this.channel=new Zn.RpcChannel({...t,waitMode:!1});else throw new Error("unable to define spec version for channel");this.responseParser=new zl(t==null?void 0:t.resourceBoundsOverhead)}}static async create(e){const n=await new Ur.RpcChannel({...e}).getSpecVersion();if(wc(n)||pe.warn(`Using incompatible node spec version ${n}`),$t("0.8",n))return new this({...e,specVersion:rn.v0_8_1});if($t("0.9",n))return new this({...e,specVersion:rn.v0_9_0});throw new me(`Provided RPC node specification version ${n} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(rn).toString()}`)}fetch(e,t,n=0){return this.channel.fetch(e,t,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e=Mt.LATEST,t=5e3){if(e===Mt.LATEST||e==="pending")return;const n=await this.getBlockNumber(),r=e===Mt.PRE_CONFIRMED?n+1:Number(S(e));if(r<=n)return;const{retries:i}=this.channel;let a=i,o=!1;for(;!o;)if(await this.getBlockNumber()===r?o=!0:await Jt(t),a-=1,a<=0)throw new Error(`waitForBlock() timed-out after ${i} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(e=this.channel.blockIdentifier){if(this.channel instanceof Zn.RpcChannel)return B1(this.channel,e);throw new me("Unsupported method for RPC version")}async getL1MessageHash(e){const t=await this.channel.getTransactionByHash(e);m(t.type==="L1_HANDLER","This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:i,nonce:a}=t,o=[n[0],r,a,i,n.length-1,...n.slice(1)];return Ii(o)}async getBlockWithReceipts(e){return this.channel.getBlockWithReceipts(e)}async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){const t=await this.channel.getTransactionReceipt(e),n=this.responseParser.parseTransactionReceipt(t);return Yl(n)}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(n=>this.responseParser.parseSimulateTransactionResponse(n))}async waitForTransaction(e,t){const n=await this.channel.waitForTransaction(e,t);return Yl(n)}async fastWaitForTransaction(e,t,n,r){if(this.channel instanceof Zn.RpcChannel)return await this.channel.fastWaitForTransaction(e,t,n,r);throw new Error("Unsupported channel type")}async getStorageAt(e,t,n){return this.channel.getStorageAt(e,t,n)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let i;if(e)i=await this.getClassAt(e,n);else if(t)i=await this.getClass(t,n);else throw Error("getContractVersion require contractAddress or classHash");return fr(i)?r?{cairo:"1",compiler:gc(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(e,t,n,r){return(await this.getEstimateFeeBulk([{type:U.ETransactionType.INVOKE,...e,...t}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeclareEstimateFee(e,t,n,r){return(await this.getEstimateFeeBulk([{type:U.ETransactionType.DECLARE,...e,...t}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeployAccountEstimateFee(e,t,n,r){return(await this.getEstimateFeeBulk([{type:U.ETransactionType.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:n,skipValidate:r}))[0]}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(n=>this.responseParser.parseFeeEstimateBulkResponse(n))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){if(this.channel instanceof Ur.RpcChannel)return this.channel.getEvents(e);if(this.channel instanceof Zn.RpcChannel)return this.channel.getEvents(e);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(e,t,n,r,i){return C1(this,e,t,n,r,i)}async isClassDeclared(e,t){let n;if(!e.classHash&&"contract"in e)n=n1(e).classHash;else if(e.classHash)n=e.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(n,t)instanceof Object}catch(r){if(r instanceof me)return!1;throw r}}async prepareInvocations(e){const t=[];for(const n of e)n.type===U.ETransactionType.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||t.unshift(n):t.push(n);return t}async getL1MessagesStatus(e){return this.channel.getMessagesStatus(e)}async getStorageProof(e,t,n,r){return this.channel.getStorageProof(e,t,n,r)}async getCompiledCasm(e){return this.channel.getCompiledCasm(e)}async getEstimateTip(e,t={}){return A1(this,e,t)}},N1={};K(N1,{StarknetIdContract:()=>as,StarknetIdIdentityContract:()=>os,StarknetIdMulticallContract:()=>ss,StarknetIdPfpContract:()=>ls,StarknetIdPopContract:()=>us,StarknetIdVerifierContract:()=>cs,dynamicCallData:()=>F,dynamicFelt:()=>de,execution:()=>At,getStarknetIdContract:()=>Ji,getStarknetIdIdentityContract:()=>Hh,getStarknetIdMulticallContract:()=>Fh,getStarknetIdPfpContract:()=>jh,getStarknetIdPopContract:()=>qh,getStarknetIdVerifierContract:()=>zh,isStarkDomain:()=>Yh,useDecoded:()=>Aa,useEncoded:()=>vc});var xt="abcdefghijklmnopqrstuvwxyz0123456789-",Jn=BigInt(xt.length+1),oe="",Zl=BigInt(xt.length),rs=BigInt(oe.length),Kl=BigInt(oe.length+1);function is(e){let t=0;for(;e.endsWith(oe[oe.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function Aa(e){let t="";return e.forEach(n=>{for(;n!==Ie;){const a=n%Jn;if(n/=Jn,a===BigInt(xt.length)){const o=n/Kl;if(o===Ie){const s=n%Kl;n=o,s===Ie?t+=xt[0]:t+=oe[Number(s)-1]}else{const s=n%rs;t+=oe[Number(s)],n/=rs}}else t+=xt[Number(a)]}const[r,i]=is(t);i&&(t=r+(i%2===0?oe[oe.length-1].repeat(i/2-1)+oe[0]+xt[1]:oe[oe.length-1].repeat((i-1)/2+1))),t+="."}),t&&t.concat("stark")}function vc(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith(oe[0]+xt[1])){const[r,i]=is(e.substring(0,e.length-2));e=r+oe[oe.length-1].repeat(2*(i+1))}else{const[r,i]=is(e);i&&(e=r+oe[oe.length-1].repeat(1+2*(i-1)))}for(let r=0;r<e.length;r+=1){const i=e[r],a=xt.indexOf(i),o=BigInt(xt.indexOf(i));if(a!==-1)r===e.length-1&&e[r]===xt[0]?(t+=n*Zl,n*=Jn,n*=Jn):(t+=n*o,n*=Jn);else if(oe.indexOf(i)!==-1){t+=n*Zl,n*=Jn;const s=(r===e.length-1?1:0)+oe.indexOf(i);t+=n*BigInt(s),n*=rs}}return t}var as={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function Ji(e){switch(e){case Ce.SN_MAIN:return as.MAINNET;case Ce.SN_SEPOLIA:return as.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var os={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function Hh(e){switch(e){case Ce.SN_MAIN:return os.MAINNET;case Ce.SN_SEPOLIA:return os.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var ss="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function Fh(e){switch(e){case Ce.SN_MAIN:return ss;case Ce.SN_SEPOLIA:return ss;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var cs={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function zh(e){switch(e){case Ce.SN_MAIN:return cs.MAINNET;case Ce.SN_SEPOLIA:return cs.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var ls={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function jh(e){switch(e){case Ce.SN_MAIN:return ls.MAINNET;case Ce.SN_SEPOLIA:return ls.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var us={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function qh(e){switch(e){case Ce.SN_MAIN:return us.MAINNET;case Ce.SN_SEPOLIA:return us.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function At(e,t=void 0,n=void 0){return new Bi({Static:e,IfEqual:t?dr(t[0],t[1],t[2]):void 0,IfNotEqual:n?dr(n[0],n[1],n[2]):void 0})}function de(e,t=void 0){return new Bi({Hardcoded:e,Reference:t?dr(t[0],t[1]):void 0})}function F(e,t=void 0,n=void 0){return new Bi({Hardcoded:e,Reference:t?dr(t[0],t[1]):void 0,ArrayReference:n?dr(n[0],n[1]):void 0})}function Yh(e){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e)}var R1=class Qi{async getStarkName(t,n){return Qi.getStarkName(this,t,n)}async getAddressFromStarkName(t,n){return Qi.getAddressFromStarkName(this,t,n)}async getStarkProfile(t,n,r,i,a,o,s){return Qi.getStarkProfile(this,t,n,r,i,a,o,s)}static async getStarkName(t,n,r){const i=await t.getChainId(),a=r??Ji(i);try{const s=(await t.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:Z.compile({address:n,hint:[]})})).map(c=>BigInt(c)).slice(1),l=Aa(s);if(!l)throw Error("Starkname not found");return l}catch(o){throw o instanceof Error&&o.message==="Starkname not found"?o:Error("Could not get stark name")}}static async getAddressFromStarkName(t,n,r){const i=n.endsWith(".stark")?n:`${n}.stark`;if(!Yh(i))throw new Error("Invalid domain, must be a valid .stark domain");const a=await t.getChainId(),o=r??Ji(a);try{const s=i.replace(".stark","").split(".").map(c=>vc(c).toString(10));return(await t.callContract({contractAddress:o,entrypoint:"domain_to_address",calldata:Z.compile({domain:s,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,n,r,i,a,o,s,l){const c=await t.getChainId(),u=r??Ji(c),h=i??Hh(c),d=a??zh(c),f=o??jh(c),_=s??qh(c),y=l??Fh(c);try{const g=[{execution:At({}),to:F(u),selector:F(ee("address_to_domain")),calldata:[F(n),F("0")]},{execution:At({}),to:de(u),selector:de(ee("domain_to_id")),calldata:[F(void 0,void 0,[0,0])]},{execution:At({}),to:de(h),selector:de(ee("get_verifier_data")),calldata:[F(void 0,[1,0]),F(se("twitter")),F(d),F("0")]},{execution:At({}),to:de(h),selector:de(ee("get_verifier_data")),calldata:[F(void 0,[1,0]),F(se("github")),F(d),F("0")]},{execution:At({}),to:de(h),selector:de(ee("get_verifier_data")),calldata:[F(void 0,[1,0]),F(se("discord")),F(d),F("0")]},{execution:At({}),to:de(h),selector:de(ee("get_verifier_data")),calldata:[F(void 0,[1,0]),F(se("proof_of_personhood")),F(_),F("0")]},{execution:At({}),to:de(h),selector:de(ee("get_verifier_data")),calldata:[F(void 0,[1,0]),F(se("nft_pp_contract")),F(f),F("0")]},{execution:At({}),to:de(h),selector:de(ee("get_extended_verifier_data")),calldata:[F(void 0,[1,0]),F(se("nft_pp_id")),F("2"),F(f),F("0")]},{execution:At(void 0,void 0,[6,0,0]),to:de(void 0,[6,0]),selector:de(ee("tokenURI")),calldata:[F(void 0,[7,1]),F(void 0,[7,2])]}],p=await t.callContract({contractAddress:y,entrypoint:"aggregate",calldata:Z.compile({calls:g})});if(Array.isArray(p)){const A=parseInt(p[0],16),E=[];let b=1;for(let $=0;$<A&&b<p.length;$+=1){const Q=parseInt(p[b],16);b+=1;const I=p.slice(b,b+Q);E.push(I),b+=Q}const C=Aa(E[0].slice(1).map($=>BigInt($))),N=E[2][0]!=="0x0"?BigInt(E[2][0]).toString():void 0,T=E[3][0]!=="0x0"?BigInt(E[3][0]).toString():void 0,k=E[4][0]!=="0x0"?BigInt(E[4][0]).toString():void 0,v=E[5][0]==="0x1",O=(p[0]==="0x9"?E[8].slice(1).map($=>lr($)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(E[1][0]).toString()}`;return{name:C,twitter:N,github:T,discord:k,proofOfPersonhood:v,profilePicture:O}}throw Error("Error while calling aggregate function")}catch(g){throw g instanceof Error?g:Error("Could not get user stark profile data from address")}}};function O1(e){return e.endsWith(".brother")}function Gl(e){const t=e.endsWith(".brother")?e.replace(".brother",""):e;return vc(t)}function Wl(e){const t=Aa([e]);return t.endsWith(".stark")?t.replace(".stark",".brother"):t&&`${t}.brother`}function Co(e){switch(e){case Ce.SN_MAIN:return"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74";default:return"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}}var D1=class ea{async getBrotherName(t,n){return ea.getBrotherName(this,t,n)}async getAddressFromBrotherName(t,n){return ea.getAddressFromBrotherName(this,t,n)}async getBrotherProfile(t,n){return ea.getBrotherProfile(this,t,n)}static async getBrotherName(t,n,r){const i=await t.getChainId(),a=r??Co(i);try{const o=await t.callContract({contractAddress:a,entrypoint:"getPrimary",calldata:Z.compile({user:n})});if(!o[0]||o[0]==="0x0")throw Error("Brother name not found");const s=BigInt(o[0]);return Wl(s)}catch(o){throw o instanceof Error&&o.message==="Brother name not found"?o:Error("Could not get brother name")}}static async getAddressFromBrotherName(t,n,r){const i=n.endsWith(".brother")?n:`${n}.brother`;if(!O1(i))throw new Error("Invalid domain, must be a valid .brother domain");const a=await t.getChainId(),o=r??Co(a);try{const s=await t.callContract({contractAddress:o,entrypoint:"get_details_by_domain",calldata:Z.compile({domain:Gl(i)})});if(!s[0]||s[1]==="0x0")throw Error("Could not get address from brother name");return s[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(t,n,r){const i=await t.getChainId(),a=r??Co(i);try{const o=await t.callContract({contractAddress:a,entrypoint:"getPrimary",calldata:Z.compile({user:n})});if(!o[0]||o[0]==="0x0")throw Error("Brother profile not found");const s=BigInt(o[0]),c=Wl(s).replace(".brother",""),u=await t.callContract({contractAddress:a,entrypoint:"get_details_by_domain",calldata:Z.compile({domain:Gl(c)})});return{name:c,resolver:u[1],tokenId:u[2],expiryDate:parseInt(u[3],16),lastTransferTime:parseInt(u[4],16)}}catch(o){throw o instanceof Error&&o.message==="Brother profile not found"?o:Error("Could not get brother profile")}}};(class extends Jy(Mh,R1,D1){});new Mh({default:!0});var L1={};K(L1,{bnToUint256:()=>$1,isUint256:()=>U1,uint256ToBN:()=>P1});function P1(e){return new _e(e).toBigInt()}function U1(e){return _e.is(e)}function $1(e){return new _e(e).toUint256HexString()}function V1(e){const t=S(V(e)?L(e):e),n=ye(t).padStart(64,"0");return L(n)}function M1(e){const t=V1(e);if(!t.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return rc(t,Ie,tc-1n,"Starknet Address"),t}function ww(e){const t=ye(M1(e)).toLowerCase().split(""),n=ye(ac(e)),r=Ft(n.padStart(64,"0"));for(let i=0;i<t.length;i+=2)r[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(r[i>>1]&15)>=8&&(t[i+1]=t[i+1].toUpperCase());return L(t.join(""))}var H1={};K(H1,{buildExecuteFromOutsideCall:()=>z1,buildExecuteFromOutsideCallData:()=>Kh,getOutsideCall:()=>Zh,getTypedData:()=>F1,toOutsideCallV2:()=>Xa});function Xa(e){return"calldata_len"in e?{To:e.to,Selector:e.selector,Calldata:e.calldata}:e}function Zh(e){const t=e.calldata??[],n=Array.isArray(t)?t:Z.compile(t);return{to:e.contractAddress,selector:ee(e.entrypoint),calldata:n}}function Xl(e,t){const n=Zh(e);return t==="1"?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function Jl(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,...t==="2"?{revision:"1"}:{}}}function F1(e,t,n,r,i){return i==="1"?{types:vb,primaryType:"OutsideExecution",domain:Jl(e,i),message:{...t,nonce:n,calls_len:r.length,calls:r.map(a=>Xl(a,i))}}:{types:xb,primaryType:"OutsideExecution",domain:Jl(e,i),message:{Caller:t.caller,Nonce:n,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:r.map(a=>Xl(a,i))}}}function Kh(e){const t=e.outsideExecution,n=Ri(e.signature);return Z.compile({outside_execution:t,signature:n})}function z1(e){return(Array.isArray(e)?e:[e]).map(r=>{let i;if(r.version===Vl.V1)i="execute_from_outside";else if(r.version===Vl.V2)i="execute_from_outside_v2";else throw new Error("Unsupported OutsideExecution version");return{contractAddress:S(r.signerAddress),entrypoint:i,calldata:Kh(r)}})}var j1={};K(j1,{supportsInterface:()=>q1});async function q1(e,t,n){const r={contractAddress:S(t),entrypoint:"supports_interface",calldata:[S(n)]};try{const i=await e.callContract(r);return BigInt(i[0])!==0n}catch{return!1}}var Y1={};K(Y1,{assertCallsAreStrictlyEqual:()=>Gh,assertPaymasterTransactionSafety:()=>G1,getDefaultPaymasterNodeUrl:()=>ta});var ta=(e,t=!1)=>{t||pe.info("Using default public node url, please provide nodeUrl in provider options!");const n=Vf[e??mr.SN_SEPOLIA],r=Math.floor(Math.random()*n.length);return n[r]},Z1=(e,t)=>{const n=Xa(e[e.length-1]),i=Z.toCalldata(n.Calldata)[1];m(BigInt(i)===BigInt(t),"Gas token value is not equal to the provided gas fees")},K1=(e,t)=>{const n=Xa(e[e.length-1]);m(BigInt(n.To)===BigInt(t),"Gas token address is not equal to the provided gas token")};function Gh(e,t){const n="Provided calls are not strictly equal to the returned calls";m(t.length-1===e.length,`${n}: Expected ${e.length+1} calls, got ${t.length}`);for(let r=0;r<e.length;r+=1){const i=e[r],a=Xa(t[r]),o=h=>He(h).toString(16).toLowerCase(),s=o(i.contractAddress),l=o(a.To);m(s===l,`${n}: Contract address mismatch at call ${r}. Expected: ${i.contractAddress}, Got: ${a.To}`),m(ee(i.entrypoint)===a.Selector,`${n}: Entrypoint mismatch at call ${r}. Expected: ${i.entrypoint}, Got: ${a.Selector}`);const c=Z.toCalldata(i.calldata),u=Z.toCalldata(a.Calldata);m(c.length===u.length,`${n}: Calldata length mismatch at call ${r}. Expected length: ${c.length}, Got length: ${u.length}`);for(let h=0;h<c.length;h+=1){const d=BigInt(c[h]),f=BigInt(u[h]);m(d===f,`${n}: Calldata value mismatch at call ${r}, parameter ${h}. Expected: ${c[h]}, Got: ${u[h]}`)}}}var G1=(e,t,n,r)=>{if(n.feeMode.mode!=="sponsored"&&(e.type==="invoke"||e.type==="deploy_and_invoke")){const i="calls"in e.typed_data.message?e.typed_data.message.calls:e.typed_data.message.Calls;Gh(t,i),K1(i,n.feeMode.gasToken),r&&(m(e.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),Z1(i,e.fee.suggested_max_fee_in_gas_token))}},Ql=e=>e.map(t=>({to:t.contractAddress,selector:ee(t.entrypoint),calldata:Z.toHex(t.calldata)})),eu=e=>e.mode==="sponsored"?{mode:"sponsored"}:{mode:"default",gas_token:e.gasToken},W1=e=>e.mode==="sponsored"?{mode:"sponsored"}:{mode:"default",gasToken:e.gas_token},tu=e=>e?{execute_after:e.executeAfter||1,execute_before:e.executeBefore}:void 0,X1=e=>e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0,Bo=e=>({version:e.version,feeMode:W1(e.fee_mode),timeBounds:X1(e.time_bounds)}),No={headers:{"Content-Type":"application/json"}},J1=class Wh{constructor(t){w(this,"nodeUrl");w(this,"headers");w(this,"baseFetch");w(this,"requestId");if(t instanceof Wh){this.nodeUrl=t.nodeUrl,this.headers={...No.headers,...t.headers},this.baseFetch=t.baseFetch,this.requestId=t.requestId;return}if(t&&"nodeUrl"in t&&"headers"in t&&"baseFetch"in t){this.nodeUrl=t.nodeUrl??ta(void 0),this.headers={...No.headers,...t.headers},this.baseFetch=t.baseFetch??Ea,this.requestId=0;return}const{nodeUrl:n,headers:r,baseFetch:i}=t||{};n&&Object.values(mr).includes(n)?this.nodeUrl=ta(n,t==null?void 0:t.default):n?this.nodeUrl=n:this.nodeUrl=ta(void 0,t==null?void 0:t.default),this.baseFetch=i??Ea,this.headers={...No.headers,...r},this.requestId=0}fetch(t,n,r=0){const i={id:r,jsonrpc:"2.0",method:t,...n&&{params:n}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ut(i),headers:this.headers})}errorHandler(t,n,r,i){if(r)throw new ui(r,t,n);if(i instanceof me)throw i;if(i)throw Error(i.message)}async fetchEndpoint(t,n){var r;try{this.requestId+=1;const i=await this.fetch(t,n,this.requestId),{error:a,result:o}=await i.json();return this.errorHandler(t,n,a),o}catch(i){throw this.errorHandler(t,n,(r=i==null?void 0:i.response)==null?void 0:r.data,i),i}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(t,n){let r;switch(t.type){case"invoke":r={...t,invoke:{user_address:t.invoke.userAddress,calls:Ql(t.invoke.calls)}};break;case"deploy_and_invoke":r={...t,invoke:{user_address:t.invoke.userAddress,calls:Ql(t.invoke.calls)}};break;case"deploy":default:r=t;break}const i={version:n.version,fee_mode:eu(n.feeMode),time_bounds:tu(n.timeBounds)},a=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:r,parameters:i}),o={gas_token_price_in_strk:BigInt(a.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(a.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(a.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(a.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(a.fee.suggested_max_fee_in_gas_token)};switch(a.type){case"invoke":return{type:"invoke",typed_data:a.typed_data,parameters:Bo(a.parameters),fee:o};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:a.deployment,typed_data:a.typed_data,parameters:Bo(a.parameters),fee:o};case"deploy":default:return{type:"deploy",deployment:a.deployment,parameters:Bo(a.parameters),fee:o}}}async executeTransaction(t,n){let r;switch(t.type){case"invoke":r={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:Xt(t.invoke.signature)}};break;case"deploy_and_invoke":r={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:Xt(t.invoke.signature)}};break;case"deploy":default:r=t;break}const i={version:n.version,fee_mode:eu(n.feeMode),time_bounds:tu(n.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:r,parameters:i})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(t=>t.map(n=>({token_address:n.token_address,decimals:n.decimals,priceInStrk:BigInt(n.price_in_strk)})))}};new J1({default:!0});var Q1={};K(Q1,{addDeclareTransaction:()=>cw,addInvokeTransaction:()=>sw,addStarknetChain:()=>rw,deploymentData:()=>ow,getPermissions:()=>tw,onAccountChange:()=>dw,onNetworkChanged:()=>fw,requestAccounts:()=>ew,requestChainId:()=>aw,signMessage:()=>lw,supportedSpecs:()=>uw,switchStarknetChain:()=>iw,watchAsset:()=>nw});function ew(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function tw(e){return e.request({type:"wallet_getPermissions"})}function nw(e,t){return e.request({type:"wallet_watchAsset",params:t})}function rw(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function iw(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function aw(e){return e.request({type:"wallet_requestChainId"})}function ow(e){return e.request({type:"wallet_deploymentData"})}function sw(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function cw(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function lw(e,t){return e.request({type:"wallet_signTypedData",params:t})}function uw(e){return e.request({type:"wallet_supportedSpecs"})}function dw(e,t){e.on("accountsChanged",t)}function fw(e,t){e.on("networkChanged",t)}var hw={};K(hw,{getAbiEvents:()=>pw,isAbiEvent:()=>ds,parseEvents:()=>yw});function ds(e){return e.type==="event"}function gw(e){return e.filter(t=>t.type==="event").reduce((t,n)=>{const r=n.name,i={...n};return i.name=r,{...t,[L(on(Bn(r)).toString(16))]:i}},{})}function _w(e){const t=e.filter(i=>ds(i)&&i.kind==="struct"),n=e.filter(i=>ds(i)&&i.kind==="enum");return t.reduce((i,a)=>{let o=[],{name:s}=a,l=!1;const c=d=>d.type===s;for(;;){const d=n.find(_=>_.variants.some(c));if(be(d))break;const f=d.variants.find(c);o.unshift(f.name),f.kind==="flat"&&(l=!0),s=d.name}if(o.length===0)throw new Error("inconsistency in ABI events definition.");l&&(o=[o[o.length-1]]);const u=o.pop();let h={[L(on(Bn(u)).toString(16))]:a};for(;o.length>0;)h={[L(on(Bn(o.pop())).toString(16))]:h};return h={...h},Xh(i,h)},{})}function pw(e){return hc(e)?_w(e):gw(e)}function Xh(e,t){const n={...e};return G(e)&&G(t)&&Object.keys(t).forEach(r=>{G(t[r])?r in e?n[r]=Xh(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}function yw(e,t,n,r,i){return e.flat().reduce((o,s)=>{var y,g;const l=JSON.parse(JSON.stringify(s));let c=t[l.keys.shift()??0];if(!c)return o;for(;!c.name;){const p=l.keys.shift();m(!!p,'Not enough data in "keys" property of this event.'),c=c[p]}const u={};u[c.name]={};const h=l.keys[Symbol.iterator](),d=l.data[Symbol.iterator](),f=((y=c.members)==null?void 0:y.filter(p=>p.kind==="key"))||c.keys,_=((g=c.members)==null?void 0:g.filter(p=>p.kind==="data"))||c.data;return f.forEach(p=>{u[c.name][p.name]=ba({responseIterator:h,output:p,structs:n,enums:r,parser:i,parsedResult:u[c.name]})}),_.forEach(p=>{u[c.name][p.name]=ba({responseIterator:d,output:p,structs:n,enums:r,parser:i,parsedResult:u[c.name]})}),"block_hash"in l&&(u.block_hash=l.block_hash),"block_number"in l&&(u.block_number=l.block_number),"transaction_hash"in l&&(u.transaction_hash=l.transaction_hash),o.push(u),o},[])}U.TypedDataRevision;export{V1 as a,rb as c,ww as g};
