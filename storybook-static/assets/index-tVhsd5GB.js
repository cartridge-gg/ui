var Xh=Object.defineProperty;var Jh=(e,t,n)=>t in e?Xh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var w=(e,t,n)=>Jh(e,typeof t!="symbol"?t+"":t,n);const tu=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Ea="ACCEPTED_ON_L2",Aa="ACCEPTED_ON_L1",ds="SUCCEEDED",fs="REVERTED",nu="PENDING",hs="REJECTED",gs="RECEIVED",_s="DECLARE",ps="DEPLOY",ys="DEPLOY_ACCOUNT",bs="INVOKE",ms="L1_HANDLER",ru="struct",iu="event",au="function",ou="constructor",su="l1_handler",cu="enum",lu="view",uu="external",du="WEI",fu="FRI",hu={BLOB:"BLOB",CALLDATA:"CALLDATA"},gu={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},Lt={DECLARE:_s,DEPLOY:ps,DEPLOY_ACCOUNT:ys,INVOKE:bs,L1_HANDLER:ms},Mr={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},Hr={RECEIVED:gs,REJECTED:hs,ACCEPTED_ON_L2:Ea,ACCEPTED_ON_L1:Aa},_u={ACCEPTED_ON_L2:Ea,ACCEPTED_ON_L1:Aa},pu={SUCCEEDED:ds,REVERTED:fs},yu={LATEST:"latest",PENDING:"pending"},bu={L1:"L1",L2:"L2"},mu={L1:0,L2:1},De={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},wu={V0:De.V0,V1:De.V1,V2:De.V2,F0:De.F0,F1:De.F1,F2:De.F2},Eu={V3:De.V3,F3:De.F3},Qh=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:ou,ABI_TYPE_ENUM:cu,ABI_TYPE_FUNCTION:au,ABI_TYPE_L1_HANDLER:su,CALL_TYPE:gu,CONTRACT:tu,EBlockTag:yu,EDAMode:mu,EDataAvailabilityMode:bu,ESimulationFlag:Mr,ETransactionExecutionStatus:pu,ETransactionFinalityStatus:_u,ETransactionStatus:Hr,ETransactionType:Lt,ETransactionVersion:De,ETransactionVersion2:wu,ETransactionVersion3:Eu,EVENT_ABI_TYPE:iu,L1_DA_MODE:hu,PRICE_UNIT_FRI:fu,PRICE_UNIT_WEI:du,STATE_MUTABILITY_EXTERNAL:uu,STATE_MUTABILITY_VIEW:lu,STATUS_ACCEPTED_ON_L1:Aa,STATUS_ACCEPTED_ON_L2:Ea,STATUS_PENDING:nu,STATUS_RECEIVED:gs,STATUS_REJECTED:hs,STATUS_REVERTED:fs,STATUS_SUCCEEDED:ds,STRUCT_ABI_TYPE:ru,TXN_TYPE_DECLARE:_s,TXN_TYPE_DEPLOY:ps,TXN_TYPE_DEPLOY_ACCOUNT:ys,TXN_TYPE_INVOKE:bs,TXN_TYPE_L1_HANDLER:ms},Symbol.toStringTag,{value:"Module"})),Au={ACCOUNTS:"accounts"},Tu={ACTIVE:"1",LEGACY:"0"},e0=Object.freeze(Object.defineProperty({__proto__:null,Permission:Au,TypedDataRevision:Tu},Symbol.toStringTag,{value:"Module"})),Su=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),ws=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:ou,ABI_TYPE_ENUM:cu,ABI_TYPE_FUNCTION:au,ABI_TYPE_L1_HANDLER:su,API:Qh,CALL_TYPE:gu,CONTRACT:tu,EBlockTag:yu,EDAMode:mu,EDataAvailabilityMode:bu,ESimulationFlag:Mr,ETransactionExecutionStatus:pu,ETransactionFinalityStatus:_u,ETransactionStatus:Hr,ETransactionType:Lt,ETransactionVersion:De,ETransactionVersion2:wu,ETransactionVersion3:Eu,EVENT_ABI_TYPE:iu,L1_DA_MODE:hu,PAYMASTER_API:Su,PRICE_UNIT_FRI:fu,PRICE_UNIT_WEI:du,Permission:Au,STATE_MUTABILITY_EXTERNAL:uu,STATE_MUTABILITY_VIEW:lu,STATUS_ACCEPTED_ON_L1:Aa,STATUS_ACCEPTED_ON_L2:Ea,STATUS_PENDING:nu,STATUS_RECEIVED:gs,STATUS_REJECTED:hs,STATUS_REVERTED:fs,STATUS_SUCCEEDED:ds,STRUCT_ABI_TYPE:ru,TXN_TYPE_DECLARE:_s,TXN_TYPE_DEPLOY:ps,TXN_TYPE_DEPLOY_ACCOUNT:ys,TXN_TYPE_INVOKE:bs,TXN_TYPE_L1_HANDLER:ms,TypedDataRevision:Tu,WALLET_API:e0},Symbol.toStringTag,{value:"Module"})),vu=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),hi="ACCEPTED_ON_L2",gi="ACCEPTED_ON_L1",Es="SUCCEEDED",As="REVERTED",Ts="RECEIVED",Ss="CANDIDATE",hr="PRE_CONFIRMED",vs=hr.toLowerCase(),xs="DECLARE",Is="DEPLOY",ks="DEPLOY_ACCOUNT",Cs="INVOKE",Bs="L1_HANDLER",xu="struct",Iu="event",ku="function",Cu="constructor",Bu="l1_handler",Nu="enum",Ru="view",Ou="external",Du="WEI",Lu="FRI",Pu={BLOB:"BLOB",CALLDATA:"CALLDATA"},Uu={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},Ns={DECLARE:xs,DEPLOY:Is,DEPLOY_ACCOUNT:ks,INVOKE:Cs,L1_HANDLER:Bs},Fr={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},Qt={RECEIVED:Ts,CANDIDATE:Ss,PRE_CONFIRMED:hr,ACCEPTED_ON_L2:hi,ACCEPTED_ON_L1:gi},fn={PRE_CONFIRMED:hr,ACCEPTED_ON_L2:hi,ACCEPTED_ON_L1:gi},Rs={SUCCEEDED:Es,REVERTED:As},$u={LATEST:"latest",PRE_CONFIRMED:vs,L1_ACCEPTED:"l1_accepted"},Vu={PRE_CONFIRMED:hr,ACCEPTED_ON_L2:hi,ACCEPTED_ON_L1:gi},Mu={L1:"L1",L2:"L2"},Hu={L1:0,L2:1},At={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},Fu={V0:At.V0,V1:At.V1,V2:At.V2,F0:At.F0,F1:At.F1,F2:At.F2},zu={V3:At.V3,F3:At.F3},t0=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:Cu,ABI_TYPE_ENUM:Nu,ABI_TYPE_FUNCTION:ku,ABI_TYPE_L1_HANDLER:Bu,CALL_TYPE:Uu,CONTRACT:vu,EBlockStatus:Vu,EBlockTag:$u,EDAMode:Hu,EDataAvailabilityMode:Mu,ESimulationFlag:Fr,ETransactionExecutionStatus:Rs,ETransactionFinalityStatus:fn,ETransactionStatus:Qt,ETransactionType:Ns,ETransactionVersion:At,ETransactionVersion2:Fu,ETransactionVersion3:zu,EVENT_ABI_TYPE:Iu,L1_DA_MODE:Pu,PRICE_UNIT_FRI:Lu,PRICE_UNIT_WEI:Du,STATE_MUTABILITY_EXTERNAL:Ou,STATE_MUTABILITY_VIEW:Ru,STATUS_ACCEPTED_ON_L1:gi,STATUS_ACCEPTED_ON_L2:hi,STATUS_CANDIDATE:Ss,STATUS_PRE_CONFIRMED:hr,STATUS_PRE_CONFIRMED_LOWERCASE:vs,STATUS_RECEIVED:Ts,STATUS_REVERTED:As,STATUS_SUCCEEDED:Es,STRUCT_ABI_TYPE:xu,TXN_TYPE_DECLARE:xs,TXN_TYPE_DEPLOY:Is,TXN_TYPE_DEPLOY_ACCOUNT:ks,TXN_TYPE_INVOKE:Cs,TXN_TYPE_L1_HANDLER:Bs},Symbol.toStringTag,{value:"Module"})),ju={ACCOUNTS:"accounts"},qu={ACTIVE:"1",LEGACY:"0"},n0=Object.freeze(Object.defineProperty({__proto__:null,Permission:ju,TypedDataRevision:qu},Symbol.toStringTag,{value:"Module"})),r0=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),gr=Object.freeze(Object.defineProperty({__proto__:null,ABI_TYPE_CONSTRUCTOR:Cu,ABI_TYPE_ENUM:Nu,ABI_TYPE_FUNCTION:ku,ABI_TYPE_L1_HANDLER:Bu,API:t0,CALL_TYPE:Uu,CONTRACT:vu,EBlockStatus:Vu,EBlockTag:$u,EDAMode:Hu,EDataAvailabilityMode:Mu,ESimulationFlag:Fr,ETransactionExecutionStatus:Rs,ETransactionFinalityStatus:fn,ETransactionStatus:Qt,ETransactionType:Ns,ETransactionVersion:At,ETransactionVersion2:Fu,ETransactionVersion3:zu,EVENT_ABI_TYPE:Iu,L1_DA_MODE:Pu,PAYMASTER_API:r0,PRICE_UNIT_FRI:Lu,PRICE_UNIT_WEI:Du,Permission:ju,STATE_MUTABILITY_EXTERNAL:Ou,STATE_MUTABILITY_VIEW:Ru,STATUS_ACCEPTED_ON_L1:gi,STATUS_ACCEPTED_ON_L2:hi,STATUS_CANDIDATE:Ss,STATUS_PRE_CONFIRMED:hr,STATUS_PRE_CONFIRMED_LOWERCASE:vs,STATUS_RECEIVED:Ts,STATUS_REVERTED:As,STATUS_SUCCEEDED:Es,STRUCT_ABI_TYPE:xu,TXN_TYPE_DECLARE:xs,TXN_TYPE_DEPLOY:Is,TXN_TYPE_DEPLOY_ACCOUNT:ks,TXN_TYPE_INVOKE:Cs,TXN_TYPE_L1_HANDLER:Bs,TypedDataRevision:qu,WALLET_API:n0},Symbol.toStringTag,{value:"Module"}));/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function i0(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Yu(e,t){return Array.isArray(t)?t.length===0?!0:e?t.every(n=>typeof n=="string"):t.every(n=>Number.isSafeInteger(n)):!1}function Qi(e,t){if(typeof t!="string")throw new Error(`${e}: string expected`);return!0}function Os(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function No(e){if(!Array.isArray(e))throw new Error("array expected")}function ea(e,t){if(!Yu(!0,t))throw new Error(`${e}: array of strings expected`)}function a0(e,t){if(!Yu(!1,t))throw new Error(`${e}: array of numbers expected`)}function o0(...e){const t=a=>a,n=(a,o)=>s=>a(o(s)),r=e.map(a=>a.encode).reduceRight(n,t),i=e.map(a=>a.decode).reduce(n,t);return{encode:r,decode:i}}function s0(e){const t=typeof e=="string"?e.split(""):e,n=t.length;ea("alphabet",t);const r=new Map(t.map((i,a)=>[i,a]));return{encode:i=>(No(i),i.map(a=>{if(!Number.isSafeInteger(a)||a<0||a>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${a}". Allowed: ${e}`);return t[a]})),decode:i=>(No(i),i.map(a=>{Qi("alphabet.decode",a);const o=r.get(a);if(o===void 0)throw new Error(`Unknown letter: "${a}". Allowed: ${e}`);return o}))}}function c0(e=""){return Qi("join",e),{encode:t=>(ea("join.decode",t),t.join(e)),decode:t=>(Qi("join.decode",t),t.split(e))}}function l0(e,t="="){return Os(e),Qi("padding",t),{encode(n){for(ea("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){ea("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8===0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}const Zu=(e,t)=>t===0?e:Zu(t,e%t),ta=(e,t)=>e+(t-Zu(e,t)),Qa=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function vc(e,t,n,r){if(No(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(ta(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${ta(t,n)}`);let i=0,a=0;const o=Qa[t],s=Qa[n]-1,l=[];for(const c of e){if(Os(c),c>=o)throw new Error(`convertRadix2: invalid data word=${c} from=${t}`);if(i=i<<t|c,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)l.push((i>>a-n&s)>>>0);const u=Qa[a];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<n-a&s,!r&&a>=t)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&a>0&&l.push(i>>>0),l}function u0(e,t=!1){if(Os(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(ta(8,e)>32||ta(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!i0(n))throw new Error("radix2.encode input should be Uint8Array");return vc(Array.from(n),8,e,!t)},decode:n=>(a0("radix2.decode",n),Uint8Array.from(vc(n,e,8,t)))}}const Gu=o0(u0(6),s0("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),l0(6),c0(""));function Ta(e){return d0.test(e)}const d0=/^-?[0-9]+$/;function Ku(e){return f0.test(e)}const f0=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function h0(e,t){const n=Number.parseFloat(e),r=String(n),i=xc(e),a=xc(r);return i===a}let vr=function(e){return e.underflow="underflow",e.overflow="overflow",e.truncate_integer="truncate_integer",e.truncate_float="truncate_float",e}({});function g0(e){if(h0(e))return;if(Ta(e))return vr.truncate_integer;const t=Number.parseFloat(e);return Number.isFinite(t)?t===0?vr.underflow:vr.truncate_float:vr.overflow}function xc(e){return e.replace(_0,"").replace(y0,"").replace(b0,"").replace(p0,"")}const _0=/[eE][+-]?\d+$/,p0=/^-?(0*)?/,y0=/\./,b0=/0+$/;class m0{constructor(t){w(this,"isLosslessNumber",!0);if(!Ku(t))throw new Error(`Invalid number (value: "${t}")`);this.value=t}valueOf(){const t=g0(this.value);if(t===void 0||t===vr.truncate_float)return Number.parseFloat(this.value);if(Ta(this.value))return BigInt(this.value);throw new Error(`Cannot safely convert to number: the value '${this.value}' would ${t} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function w0(e){return e&&typeof e=="object"&&e.isLosslessNumber===!0||!1}function E0(e){return new m0(e)}function A0(e){return Ta(e)?BigInt(e):Number.parseFloat(e)}function T0(e,t){return Ds({"":e},"",e,t)}function Ds(e,t,n,r){return Array.isArray(n)?r.call(e,t,v0(n,r)):n&&typeof n=="object"&&!w0(n)?r.call(e,t,S0(n,r)):r.call(e,t,n)}function S0(e,t){for(const n of Object.keys(e)){const r=Ds(e,n,e[n],t);r!==void 0?e[n]=r:delete e[n]}return e}function v0(e,t){for(let n=0;n<e.length;n++)e[n]=Ds(e,String(n),e[n],t);return e}function Wu(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:E0,r=0;const i=s();return _(i),g(),t?T0(i,t):i;function a(){if(e.charCodeAt(r)===N0){r++,c();const T={};let I=!0;for(;r<e.length&&e.charCodeAt(r)!==kc;){I?I=!1:(d(),c());const O=r,U=u();if(U===void 0){E();return}c(),f();const V=s();if(V===void 0){x();return}Object.prototype.hasOwnProperty.call(T,U)&&!Ro(V,T[U])&&b(U,O+1),T[U]=V}return e.charCodeAt(r)!==kc&&C(),r++,T}}function o(){if(e.charCodeAt(r)===R0){r++,c();const T=[];let I=!0;for(;r<e.length&&e.charCodeAt(r)!==Cc;){I?I=!1:d();const O=s();y(O),T.push(O)}return e.charCodeAt(r)!==Cc&&N(),r++,T}}function s(){c();const T=u()??h()??a()??o()??l("true",!0)??l("false",!1)??l("null",null);return c(),T}function l(T,I){if(e.slice(r,r+T.length)===T)return r+=T.length,I}function c(){for(;x0(e.charCodeAt(r));)r++}function u(){if(e.charCodeAt(r)===eo){r++;let T="";for(;r<e.length&&e.charCodeAt(r)!==eo;){if(e.charCodeAt(r)===B0){const I=e[r+1],O=C0[I];O!==void 0?(T+=O,r++):I==="u"?Bi(e.charCodeAt(r+2))&&Bi(e.charCodeAt(r+3))&&Bi(e.charCodeAt(r+4))&&Bi(e.charCodeAt(r+5))?(T+=String.fromCharCode(Number.parseInt(e.slice(r+2,r+6),16)),r+=5):R(r):k(r)}else k0(e.charCodeAt(r))?T+=e[r]:S(e[r]);r++}return A(),r++,T}}function h(){const T=r;if(e.charCodeAt(r)===Bc&&(r++,p(T)),e.charCodeAt(r)===Ls)r++;else if(I0(e.charCodeAt(r)))for(r++;Ni(e.charCodeAt(r));)r++;if(e.charCodeAt(r)===M0)for(r++,p(T);Ni(e.charCodeAt(r));)r++;if(e.charCodeAt(r)===q0||e.charCodeAt(r)===j0)for(r++,(e.charCodeAt(r)===Bc||e.charCodeAt(r)===U0)&&r++,p(T);Ni(e.charCodeAt(r));)r++;if(r>T)return n(e.slice(T,r))}function d(){if(e.charCodeAt(r)!==V0)throw new SyntaxError(`Comma ',' expected after value ${q()}`);r++}function f(){if(e.charCodeAt(r)!==H0)throw new SyntaxError(`Colon ':' expected after property name ${q()}`);r++}function _(T){if(T===void 0)throw new SyntaxError(`JSON value expected ${q()}`)}function y(T){if(T===void 0)throw new SyntaxError(`Array item expected ${q()}`)}function g(){if(r<e.length)throw new SyntaxError(`Expected end of input ${q()}`)}function p(T){if(!Ni(e.charCodeAt(r))){const I=e.slice(T,r);throw new SyntaxError(`Invalid number '${I}', expecting a digit ${q()}`)}}function A(){if(e.charCodeAt(r)!==eo)throw new SyntaxError(`End of string '"' expected ${q()}`)}function E(){throw new SyntaxError(`Quoted object key expected ${q()}`)}function b(T,I){throw new SyntaxError(`Duplicate key '${T}' encountered at position ${I}`)}function C(){throw new SyntaxError(`Quoted object key or end of object '}' expected ${q()}`)}function N(){throw new SyntaxError(`Array item or end of array ']' expected ${q()}`)}function S(T){throw new SyntaxError(`Invalid character '${T}' ${B()}`)}function k(T){const I=e.slice(T,T+2);throw new SyntaxError(`Invalid escape character '${I}' ${B()}`)}function x(){throw new SyntaxError(`Object value expected after ':' ${B()}`)}function R(T){const I=e.slice(T,T+6);throw new SyntaxError(`Invalid unicode character '${I}' ${B()}`)}function B(){return`at position ${r}`}function P(){return r<e.length?`but got '${e[r]}'`:"but reached end of input"}function q(){return`${P()} ${B()}`}}function x0(e){return e===O0||e===D0||e===L0||e===P0}function Bi(e){return e>=Ls&&e<=Ps||e>=F0&&e<=Y0||e>=z0&&e<=Z0}function Ni(e){return e>=Ls&&e<=Ps}function I0(e){return e>=$0&&e<=Ps}function k0(e){return e>=32&&e<=1114111}function Ro(e,t){return e===t?!0:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((n,r)=>Ro(n,t[r])):Ic(e)&&Ic(t)?[...new Set([...Object.keys(e),...Object.keys(t)])].every(r=>Ro(e[r],t[r])):!1}function Ic(e){return typeof e=="object"&&e!==null}const C0={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},B0=92,N0=123,kc=125,R0=91,Cc=93,O0=32,D0=10,L0=9,P0=13,eo=34,U0=43,Bc=45,Ls=48,$0=49,Ps=57,V0=44,M0=46,H0=58,F0=65,z0=97,j0=69,q0=101,Y0=70,Z0=102;function Xu(e,t,n,r){const i=G0(n),a=typeof t=="function"?t.call({"":e},"",e):e;return o(a,"");function o(u,h){if(Array.isArray(r)){const d=r.find(f=>f.test(u));if(d){const f=d.stringify(u);if(typeof f!="string"||!Ku(f))throw new Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${f})`);return f}}if(typeof u=="boolean"||typeof u=="number"||typeof u=="string"||u===null||u instanceof Date||u instanceof Boolean||u instanceof Number||u instanceof String)return JSON.stringify(u);if(u!=null&&u.isLosslessNumber||typeof u=="bigint")return u.toString();if(Array.isArray(u))return s(u,h);if(u&&typeof u=="object")return l(u,h)}function s(u,h){if(u.length===0)return"[]";const d=i?h+i:void 0;let f=i?`[
`:"[";for(let _=0;_<u.length;_++){const y=typeof t=="function"?t.call(u,String(_),u[_]):u[_];i&&(f+=d),typeof y<"u"&&typeof y!="function"?f+=o(y,d):f+="null",_<u.length-1&&(f+=i?`,
`:",")}return f+=i?`
${h}]`:"]",f}function l(u,h){if(typeof u.toJSON=="function")return Xu(u.toJSON(),t,n,void 0);const d=Array.isArray(t)?t.map(String):Object.keys(u);if(d.length===0)return"{}";const f=i?h+i:void 0;let _=!0,y=i?`{
`:"{";for(const g of d){const p=typeof t=="function"?t.call(u,g,u[g]):u[g];if(c(g,p)){_?_=!1:y+=i?`,
`:",";const A=JSON.stringify(g);y+=i?`${f+A}: `:`${A}:`,y+=o(p,f)}}return y+=i?`
${h}}`:"}",y}function c(u,h){return typeof h<"u"&&typeof h!="function"&&typeof h!="symbol"}}function G0(e){if(typeof e=="number")return" ".repeat(e);if(typeof e=="string"&&e!=="")return e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sa=BigInt(0),va=BigInt(1),K0=BigInt(2);function xn(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function _i(e){if(!xn(e))throw new Error("Uint8Array expected")}function tr(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}const W0=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ht(e){_i(e);let t="";for(let n=0;n<e.length;n++)t+=W0[e[n]];return t}function Gn(e){const t=e.toString(16);return t.length&1?"0"+t:t}function xa(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Sa:BigInt("0x"+e)}const Ot={_0:48,_9:57,A:65,F:70,a:97,f:102};function Nc(e){if(e>=Ot._0&&e<=Ot._9)return e-Ot._0;if(e>=Ot.A&&e<=Ot.F)return e-(Ot.A-10);if(e>=Ot.a&&e<=Ot.f)return e-(Ot.a-10)}function Ft(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,a=0;i<n;i++,a+=2){const o=Nc(e.charCodeAt(a)),s=Nc(e.charCodeAt(a+1));if(o===void 0||s===void 0){const l=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+a)}r[i]=o*16+s}return r}function Ae(e){return xa(Ht(e))}function Us(e){return _i(e),xa(Ht(Uint8Array.from(e).reverse()))}function nr(e,t){return Ft(e.toString(16).padStart(t*2,"0"))}function $s(e,t){return nr(e,t).reverse()}function Vs(e){return Ft(Gn(e))}function je(e,t,n){let r;if(typeof t=="string")try{r=Ft(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else if(xn(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}function rr(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];_i(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const a=e[r];n.set(a,i),i+=a.length}return n}function X0(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return n===0}function J0(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}const to=e=>typeof e=="bigint"&&Sa<=e;function Ia(e,t,n){return to(e)&&to(t)&&to(n)&&t<=e&&e<n}function wn(e,t,n,r){if(!Ia(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Ju(e){let t;for(t=0;e>Sa;e>>=va,t+=1);return t}function Q0(e,t){return e>>BigInt(t)&va}function eg(e,t,n){return e|(n?va:Sa)<<BigInt(t)}const ka=e=>(K0<<BigInt(e-1))-va,no=e=>new Uint8Array(e),Rc=e=>Uint8Array.from(e);function Qu(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=no(e),i=no(e),a=0;const o=()=>{r.fill(1),i.fill(0),a=0},s=(...h)=>n(i,r,...h),l=(h=no())=>{i=s(Rc([0]),h),r=s(),h.length!==0&&(i=s(Rc([1]),h),r=s())},c=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const d=[];for(;h<t;){r=s();const f=r.slice();d.push(f),h+=r.length}return rr(...d)};return(h,d)=>{o(),l(h);let f;for(;!(f=d(c()));)l();return o(),f}}const tg={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||xn(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function pi(e,t,n={}){const r=(i,a,o)=>{const s=tg[a];if(typeof s!="function")throw new Error("invalid validator function");const l=e[i];if(!(o&&l===void 0)&&!s(l,e))throw new Error("param "+String(i)+" is invalid. Expected "+a+", got "+l)};for(const[i,a]of Object.entries(t))r(i,a,!1);for(const[i,a]of Object.entries(n))r(i,a,!0);return e}const ng=()=>{throw new Error("not implemented")};function Oo(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const a=e(n,...r);return t.set(n,a),a}}const rg=Object.freeze(Object.defineProperty({__proto__:null,aInRange:wn,abool:tr,abytes:_i,bitGet:Q0,bitLen:Ju,bitMask:ka,bitSet:eg,bytesToHex:Ht,bytesToNumberBE:Ae,bytesToNumberLE:Us,concatBytes:rr,createHmacDrbg:Qu,ensureBytes:je,equalBytes:X0,hexToBytes:Ft,hexToNumber:xa,inRange:Ia,isBytes:xn,memoized:Oo,notImplemented:ng,numberToBytesBE:nr,numberToBytesLE:$s,numberToHexUnpadded:Gn,numberToVarBytesBE:Vs,utf8ToBytes:J0,validateObject:pi},Symbol.toStringTag,{value:"Module"}));function na(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function ig(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function yi(e,...t){if(!ig(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ag(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");na(e.outputLen),na(e.blockLen)}function ir(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ed(e,t){yi(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const zn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const og=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),ro=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),bt=(e,t)=>e<<32-t|e>>>t,Oc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,sg=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;function Dc(e){for(let t=0;t<e.length;t++)e[t]=sg(e[t])}function td(e){if(typeof e!="string")throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function Ca(e){return typeof e=="string"&&(e=td(e)),yi(e),e}function cg(...e){let t=0;for(let r=0;r<e.length;r++){const i=e[r];yi(i),t+=i.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const a=e[r];n.set(a,i),i+=a.length}return n}class Ms{clone(){return this._cloneInto()}}function nd(e){const t=r=>e().update(Ca(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function lg(e=32){if(zn&&typeof zn.getRandomValues=="function")return zn.getRandomValues(new Uint8Array(e));if(zn&&typeof zn.randomBytes=="function")return zn.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function ug(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),o=Number(n>>i&a),s=Number(n&a),l=r?4:0,c=r?0:4;e.setUint32(t+l,o,r),e.setUint32(t+c,s,r)}const dg=(e,t,n)=>e&t^~e&n,fg=(e,t,n)=>e&t^e&n^t&n;class hg extends Ms{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=ro(this.buffer)}update(t){ir(this);const{view:n,buffer:r,blockLen:i}=this;t=Ca(t);const a=t.length;for(let o=0;o<a;){const s=Math.min(i-this.pos,a-o);if(s===i){const l=ro(t);for(;i<=a-o;o+=i)this.process(l,o);continue}r.set(t.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ir(this),ed(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:a}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let h=o;h<i;h++)n[h]=0;ug(r,i-8,BigInt(this.length*8),a),this.process(r,0);const s=ro(t),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)s.setUint32(4*h,u[h],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:a,destroyed:o,pos:s}=this;return t.length=i,t.pos=s,t.finished=a,t.destroyed=o,i%n&&t.buffer.set(r),t}}const gg=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),qt=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yt=new Uint32Array(64);class _g extends hg{constructor(){super(64,32,8,!1),this.A=qt[0]|0,this.B=qt[1]|0,this.C=qt[2]|0,this.D=qt[3]|0,this.E=qt[4]|0,this.F=qt[5]|0,this.G=qt[6]|0,this.H=qt[7]|0}get(){const{A:t,B:n,C:r,D:i,E:a,F:o,G:s,H:l}=this;return[t,n,r,i,a,o,s,l]}set(t,n,r,i,a,o,s,l){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=a|0,this.F=o|0,this.G=s|0,this.H=l|0}process(t,n){for(let h=0;h<16;h++,n+=4)Yt[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){const d=Yt[h-15],f=Yt[h-2],_=bt(d,7)^bt(d,18)^d>>>3,y=bt(f,17)^bt(f,19)^f>>>10;Yt[h]=y+Yt[h-7]+_+Yt[h-16]|0}let{A:r,B:i,C:a,D:o,E:s,F:l,G:c,H:u}=this;for(let h=0;h<64;h++){const d=bt(s,6)^bt(s,11)^bt(s,25),f=u+d+dg(s,l,c)+gg[h]+Yt[h]|0,y=(bt(r,2)^bt(r,13)^bt(r,22))+fg(r,i,a)|0;u=c,c=l,l=s,s=o+f|0,o=a,a=i,i=r,r=f+y|0}r=r+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,s=s+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,i,a,o,s,l,c,u)}roundClean(){Yt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const bi=nd(()=>new _g),Ri=BigInt(2**32-1),Lc=BigInt(32);function pg(e,t=!1){return t?{h:Number(e&Ri),l:Number(e>>Lc&Ri)}:{h:Number(e>>Lc&Ri)|0,l:Number(e&Ri)|0}}function yg(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:o}=pg(e[i],t);[n[i],r[i]]=[a,o]}return[n,r]}const bg=(e,t,n)=>e<<n|t>>>32-n,mg=(e,t,n)=>t<<n|e>>>32-n,wg=(e,t,n)=>t<<n-32|e>>>64-n,Eg=(e,t,n)=>e<<n-32|t>>>64-n,rd=[],id=[],ad=[],Ag=BigInt(0),Tr=BigInt(1),Tg=BigInt(2),Sg=BigInt(7),vg=BigInt(256),xg=BigInt(113);for(let e=0,t=Tr,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],rd.push(2*(5*r+n)),id.push((e+1)*(e+2)/2%64);let i=Ag;for(let a=0;a<7;a++)t=(t<<Tr^(t>>Sg)*xg)%vg,t&Tg&&(i^=Tr<<(Tr<<BigInt(a))-Tr);ad.push(i)}const[Ig,kg]=yg(ad,!0),Pc=(e,t,n)=>n>32?wg(e,t,n):bg(e,t,n),Uc=(e,t,n)=>n>32?Eg(e,t,n):mg(e,t,n);function Cg(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)n[o]=e[o]^e[o+10]^e[o+20]^e[o+30]^e[o+40];for(let o=0;o<10;o+=2){const s=(o+8)%10,l=(o+2)%10,c=n[l],u=n[l+1],h=Pc(c,u,1)^n[s],d=Uc(c,u,1)^n[s+1];for(let f=0;f<50;f+=10)e[o+f]^=h,e[o+f+1]^=d}let i=e[2],a=e[3];for(let o=0;o<24;o++){const s=id[o],l=Pc(i,a,s),c=Uc(i,a,s),u=rd[o];i=e[u],a=e[u+1],e[u]=l,e[u+1]=c}for(let o=0;o<50;o+=10){for(let s=0;s<10;s++)n[s]=e[o+s];for(let s=0;s<10;s++)e[o+s]^=~n[(s+2)%10]&n[(s+4)%10]}e[0]^=Ig[r],e[1]^=kg[r]}n.fill(0)}class Hs extends Ms{constructor(t,n,r,i=!1,a=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,na(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=og(this.state)}keccak(){Oc||Dc(this.state32),Cg(this.state32,this.rounds),Oc||Dc(this.state32),this.posOut=0,this.pos=0}update(t){ir(this);const{blockLen:n,state:r}=this;t=Ca(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(n-this.pos,i-a);for(let s=0;s<o;s++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,(n&128)!==0&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){ir(this,!1),yi(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,a=t.length;i<a;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,a-i);t.set(n.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return na(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ed(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:a,enableXOF:o}=this;return t||(t=new Hs(n,r,i,o,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=i,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Bg=(e,t,n)=>nd(()=>new Hs(t,e,n)),od=Bg(1,136,256/8);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oe=BigInt(0),Q=BigInt(1),hn=BigInt(2),Ng=BigInt(3),Do=BigInt(4),$c=BigInt(5),Vc=BigInt(8);function de(e,t){const n=e%t;return n>=oe?n:t+n}function Rg(e,t,n){if(t<oe)throw new Error("invalid exponent, negatives unsupported");if(n<=oe)throw new Error("invalid modulus");if(n===Q)return oe;let r=Q;for(;t>oe;)t&Q&&(r=r*e%n),e=e*e%n,t>>=Q;return r}function ze(e,t,n){let r=e;for(;t-- >oe;)r*=r,r%=n;return r}function ra(e,t){if(e===oe)throw new Error("invert: expected non-zero number");if(t<=oe)throw new Error("invert: expected positive modulus, got "+t);let n=de(e,t),r=t,i=oe,a=Q;for(;n!==oe;){const s=r/n,l=r%n,c=i-a*s;r=n,n=l,i=a,a=c}if(r!==Q)throw new Error("invert: does not exist");return de(i,t)}function Og(e){const t=(e-Q)/hn;let n,r,i;for(n=e-Q,r=0;n%hn===oe;n/=hn,r++);for(i=hn;i<e&&Rg(i,t,e)!==e-Q;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(e+Q)/Do;return function(l,c){const u=l.pow(c,o);if(!l.eql(l.sqr(u),c))throw new Error("Cannot find square root");return u}}const a=(n+Q)/hn;return function(s,l){if(s.pow(l,t)===s.neg(s.ONE))throw new Error("Cannot find square root");let c=r,u=s.pow(s.mul(s.ONE,i),n),h=s.pow(l,a),d=s.pow(l,n);for(;!s.eql(d,s.ONE);){if(s.eql(d,s.ZERO))return s.ZERO;let f=1;for(let y=s.sqr(d);f<c&&!s.eql(y,s.ONE);f++)y=s.sqr(y);const _=s.pow(u,Q<<BigInt(c-f-1));u=s.sqr(_),h=s.mul(h,_),d=s.mul(d,u),c=f}return h}}function Dg(e){if(e%Do===Ng){const t=(e+Q)/Do;return function(r,i){const a=r.pow(i,t);if(!r.eql(r.sqr(a),i))throw new Error("Cannot find square root");return a}}if(e%Vc===$c){const t=(e-$c)/Vc;return function(r,i){const a=r.mul(i,hn),o=r.pow(a,t),s=r.mul(i,o),l=r.mul(r.mul(s,hn),o),c=r.mul(s,r.sub(l,r.ONE));if(!r.eql(r.sqr(c),i))throw new Error("Cannot find square root");return c}}return Og(e)}const Lg=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ba(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=Lg.reduce((r,i)=>(r[i]="function",r),t);return pi(e,n)}function sd(e,t,n){if(n<oe)throw new Error("invalid exponent, negatives unsupported");if(n===oe)return e.ONE;if(n===Q)return t;let r=e.ONE,i=t;for(;n>oe;)n&Q&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Q;return r}function Pg(e,t){const n=new Array(t.length),r=t.reduce((a,o,s)=>e.is0(o)?a:(n[s]=a,e.mul(a,o)),e.ONE),i=e.inv(r);return t.reduceRight((a,o,s)=>e.is0(o)?a:(n[s]=e.mul(a,n[s]),e.mul(a,o)),i),n}function cd(e,t){const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Na(e,t,n=!1,r={}){if(e<=oe)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:a}=cd(e,t);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const s=Object.freeze({ORDER:e,BITS:i,BYTES:a,MASK:ka(i),ZERO:oe,ONE:Q,create:l=>de(l,e),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return oe<=l&&l<e},is0:l=>l===oe,isOdd:l=>(l&Q)===Q,neg:l=>de(-l,e),eql:(l,c)=>l===c,sqr:l=>de(l*l,e),add:(l,c)=>de(l+c,e),sub:(l,c)=>de(l-c,e),mul:(l,c)=>de(l*c,e),pow:(l,c)=>sd(s,l,c),div:(l,c)=>de(l*ra(c,e),e),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>ra(l,e),sqrt:r.sqrt||(l=>(o||(o=Dg(e)),o(s,l))),invertBatch:l=>Pg(s,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>n?$s(l,a):nr(l,a),fromBytes:l=>{if(l.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+l.length);return n?Us(l):Ae(l)}});return Object.freeze(s)}function ld(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function ud(e){const t=ld(e);return t+Math.ceil(t/2)}function Ug(e,t,n=!1){const r=e.length,i=ld(t),a=ud(t);if(r<16||r<a||r>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+r);const o=n?Ae(e):Us(e),s=de(o,t-Q)+Q;return n?$s(s,i):nr(s,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function dd(e){const{Fp:t,mds:n,reversePartialPowIdx:r,roundConstants:i}=e,{roundsFull:a,roundsPartial:o,sboxPower:s,t:l}=e;Ba(t);for(const _ of["t","roundsFull","roundsPartial"])if(typeof e[_]!="number"||!Number.isSafeInteger(e[_]))throw new Error("invalid number "+_);if(!Array.isArray(n)||n.length!==l)throw new Error("Poseidon: invalid MDS matrix");const c=n.map(_=>{if(!Array.isArray(_)||_.length!==l)throw new Error("invalid MDS matrix row: "+_);return _.map(y=>{if(typeof y!="bigint")throw new Error("invalid MDS matrix bigint: "+y);return t.create(y)})});if(r!==void 0&&typeof r!="boolean")throw new Error("invalid param reversePartialPowIdx="+r);if(a&1)throw new Error("roundsFull is not even"+a);const u=a+o;if(!Array.isArray(i)||i.length!==u)throw new Error("Poseidon: invalid round constants");const h=i.map(_=>{if(!Array.isArray(_)||_.length!==l)throw new Error("invalid round constants");return _.map(y=>{if(typeof y!="bigint"||!t.isValid(y))throw new Error("invalid round constant");return t.create(y)})});if(!s||![3,5,7].includes(s))throw new Error("invalid sboxPower");const d=BigInt(s);let f=_=>sd(t,_,d);return s===3?f=_=>t.mul(t.sqrN(_),_):s===5&&(f=_=>t.mul(t.sqrN(t.sqrN(_)),_)),Object.freeze({...e,rounds:u,sboxFn:f,roundConstants:h,mds:c})}function $g(e,t){if(typeof t!="number")throw new Error("poseidonSplitConstants: invalid t");if(!Array.isArray(e)||e.length%t)throw new Error("poseidonSplitConstants: invalid rc");const n=[];let r=[];for(let i=0;i<e.length;i++)r.push(e[i]),r.length===t&&(n.push(r),r=[]);return n}function fd(e){const t=dd(e),{Fp:n,mds:r,roundConstants:i,rounds:a,roundsPartial:o,sboxFn:s,t:l}=t,c=t.roundsFull/2,u=t.reversePartialPowIdx?l-1:0,h=(f,_,y)=>(f=f.map((g,p)=>n.add(g,i[y][p])),_?f=f.map(g=>s(g)):f[u]=s(f[u]),f=r.map(g=>g.reduce((p,A,E)=>n.add(p,n.mulN(A,f[E])),n.ZERO)),f),d=function(_){if(!Array.isArray(_)||_.length!==l)throw new Error("invalid values, expected array of bigints with length "+l);_=_.map(g=>{if(typeof g!="bigint")throw new Error("invalid bigint="+g);return n.create(g)});let y=0;for(let g=0;g<c;g++)_=h(_,!0,y++);for(let g=0;g<o;g++)_=h(_,!1,y++);for(let g=0;g<c;g++)_=h(_,!0,y++);if(y!==a)throw new Error("invalid number of rounds");return _};return d.roundConstants=i,d}const Vg=Object.freeze(Object.defineProperty({__proto__:null,poseidon:fd,splitConstants:$g,validateOpts:dd},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mc=BigInt(0),Oi=BigInt(1);function io(e,t){const n=t.negate();return e?n:t}function hd(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function ao(e,t){hd(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1);return{windows:n,windowSize:r}}function Mg(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Hg(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const oo=new WeakMap,gd=new WeakMap;function so(e){return gd.get(e)||1}function Fg(e,t){return{constTimeNegate:io,hasPrecomputes(n){return so(n)!==1},unsafeLadder(n,r,i=e.ZERO){let a=n;for(;r>Mc;)r&Oi&&(i=i.add(a)),a=a.double(),r>>=Oi;return i},precomputeWindow(n,r){const{windows:i,windowSize:a}=ao(r,t),o=[];let s=n,l=s;for(let c=0;c<i;c++){l=s,o.push(l);for(let u=1;u<a;u++)l=l.add(s),o.push(l);s=l.double()}return o},wNAF(n,r,i){const{windows:a,windowSize:o}=ao(n,t);let s=e.ZERO,l=e.BASE;const c=BigInt(2**n-1),u=2**n,h=BigInt(n);for(let d=0;d<a;d++){const f=d*o;let _=Number(i&c);i>>=h,_>o&&(_-=u,i+=Oi);const y=f,g=f+Math.abs(_)-1,p=d%2!==0,A=_<0;_===0?l=l.add(io(p,r[y])):s=s.add(io(A,r[g]))}return{p:s,f:l}},wNAFUnsafe(n,r,i,a=e.ZERO){const{windows:o,windowSize:s}=ao(n,t),l=BigInt(2**n-1),c=2**n,u=BigInt(n);for(let h=0;h<o;h++){const d=h*s;if(i===Mc)break;let f=Number(i&l);if(i>>=u,f>s&&(f-=c,i+=Oi),f===0)continue;let _=r[d+Math.abs(f)-1];f<0&&(_=_.negate()),a=a.add(_)}return a},getPrecomputes(n,r,i){let a=oo.get(r);return a||(a=this.precomputeWindow(r,n),n!==1&&oo.set(r,i(a))),a},wNAFCached(n,r,i){const a=so(n);return this.wNAF(a,this.getPrecomputes(a,n,i),r)},wNAFCachedUnsafe(n,r,i,a){const o=so(n);return o===1?this.unsafeLadder(n,r,a):this.wNAFUnsafe(o,this.getPrecomputes(o,n,i),r,a)},setWindowSize(n,r){hd(r,t),gd.set(n,r),oo.delete(n)}}}function zg(e,t,n,r){if(Mg(n,e),Hg(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=Ju(BigInt(n.length)),o=a>12?a-3:a>4?a-2:a?2:1,s=(1<<o)-1,l=new Array(s+1).fill(i),c=Math.floor((t.BITS-1)/o)*o;let u=i;for(let h=c;h>=0;h-=o){l.fill(i);for(let f=0;f<r.length;f++){const _=r[f],y=Number(_>>BigInt(h)&BigInt(s));l[y]=l[y].add(n[f])}let d=i;for(let f=l.length-1,_=i;f>0;f--)_=_.add(l[f]),d=d.add(_);if(u=u.add(d),h!==0)for(let f=0;f<o;f++)u=u.double()}return u}function _d(e){return Ba(e.Fp),pi(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...cd(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hc(e){e.lowS!==void 0&&tr("lowS",e.lowS),e.prehash!==void 0&&tr("prehash",e.prehash)}function jg(e){const t=_d(e);pi(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:qg,hexToBytes:Yg}=rg,ht={Err:class extends Error{constructor(t=""){super(t)}},_tlv:{encode:(e,t)=>{const{Err:n}=ht;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=Gn(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const a=r>127?Gn(i.length/2|128):"";return Gn(e)+a+i+t},decode(e,t){const{Err:n}=ht;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],a=!!(i&128);let o=0;if(!a)o=i;else{const l=i&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=t.subarray(r,r+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of c)o=o<<8|u;if(r+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const s=t.subarray(r,r+o);if(s.length!==o)throw new n("tlv.decode: wrong value length");return{v:s,l:t.subarray(r+o)}}},_int:{encode(e){const{Err:t}=ht;if(e<gt)throw new t("integer: negative integers are not allowed");let n=Gn(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ht;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return qg(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ht,i=typeof e=="string"?Yg(e):e;_i(i);const{v:a,l:o}=r.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:s,l}=r.decode(2,a),{v:c,l:u}=r.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(s),s:n.decode(c)}},hexFromSig(e){const{_tlv:t,_int:n}=ht,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),a=r+i;return t.encode(48,a)}},gt=BigInt(0),Y=BigInt(1),Zt=BigInt(2),ia=BigInt(3),Fc=BigInt(4);function pd(e){const t=jg(e),{Fp:n}=t,r=Na(t.n,t.nBitLength),i=t.toBytes||((y,g,p)=>{const A=g.toAffine();return rr(Uint8Array.from([4]),n.toBytes(A.x),n.toBytes(A.y))}),a=t.fromBytes||(y=>{const g=y.subarray(1),p=n.fromBytes(g.subarray(0,n.BYTES)),A=n.fromBytes(g.subarray(n.BYTES,2*n.BYTES));return{x:p,y:A}});function o(y){const{a:g,b:p}=t,A=n.sqr(y),E=n.mul(A,y);return n.add(n.add(E,n.mul(y,g)),p)}if(!n.eql(n.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(y){return Ia(y,Y,t.n)}function l(y){const{allowedPrivateKeyLengths:g,nByteLength:p,wrapPrivateKey:A,n:E}=t;if(g&&typeof y!="bigint"){if(xn(y)&&(y=Ht(y)),typeof y!="string"||!g.includes(y.length))throw new Error("invalid private key");y=y.padStart(p*2,"0")}let b;try{b=typeof y=="bigint"?y:Ae(je("private key",y,p))}catch{throw new Error("invalid private key, expected hex or "+p+" bytes, got "+typeof y)}return A&&(b=de(b,E)),wn("private key",b,Y,E),b}function c(y){if(!(y instanceof d))throw new Error("ProjectivePoint expected")}const u=Oo((y,g)=>{const{px:p,py:A,pz:E}=y;if(n.eql(E,n.ONE))return{x:p,y:A};const b=y.is0();g==null&&(g=b?n.ONE:n.inv(E));const C=n.mul(p,g),N=n.mul(A,g),S=n.mul(E,g);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(S,n.ONE))throw new Error("invZ was invalid");return{x:C,y:N}}),h=Oo(y=>{if(y.is0()){if(t.allowInfinityPoint&&!n.is0(y.py))return;throw new Error("bad point: ZERO")}const{x:g,y:p}=y.toAffine();if(!n.isValid(g)||!n.isValid(p))throw new Error("bad point: x or y not FE");const A=n.sqr(p),E=o(g);if(!n.eql(A,E))throw new Error("bad point: equation left != right");if(!y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class d{constructor(g,p,A){if(this.px=g,this.py=p,this.pz=A,g==null||!n.isValid(g))throw new Error("x required");if(p==null||!n.isValid(p))throw new Error("y required");if(A==null||!n.isValid(A))throw new Error("z required");Object.freeze(this)}static fromAffine(g){const{x:p,y:A}=g||{};if(!g||!n.isValid(p)||!n.isValid(A))throw new Error("invalid affine point");if(g instanceof d)throw new Error("projective point not allowed");const E=b=>n.eql(b,n.ZERO);return E(p)&&E(A)?d.ZERO:new d(p,A,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){const p=n.invertBatch(g.map(A=>A.pz));return g.map((A,E)=>A.toAffine(p[E])).map(d.fromAffine)}static fromHex(g){const p=d.fromAffine(a(je("pointHex",g)));return p.assertValidity(),p}static fromPrivateKey(g){return d.BASE.multiply(l(g))}static msm(g,p){return zg(d,r,g,p)}_setWindowSize(g){_.setWindowSize(this,g)}assertValidity(){h(this)}hasEvenY(){const{y:g}=this.toAffine();if(n.isOdd)return!n.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){c(g);const{px:p,py:A,pz:E}=this,{px:b,py:C,pz:N}=g,S=n.eql(n.mul(p,N),n.mul(b,E)),k=n.eql(n.mul(A,N),n.mul(C,E));return S&&k}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:g,b:p}=t,A=n.mul(p,ia),{px:E,py:b,pz:C}=this;let N=n.ZERO,S=n.ZERO,k=n.ZERO,x=n.mul(E,E),R=n.mul(b,b),B=n.mul(C,C),P=n.mul(E,b);return P=n.add(P,P),k=n.mul(E,C),k=n.add(k,k),N=n.mul(g,k),S=n.mul(A,B),S=n.add(N,S),N=n.sub(R,S),S=n.add(R,S),S=n.mul(N,S),N=n.mul(P,N),k=n.mul(A,k),B=n.mul(g,B),P=n.sub(x,B),P=n.mul(g,P),P=n.add(P,k),k=n.add(x,x),x=n.add(k,x),x=n.add(x,B),x=n.mul(x,P),S=n.add(S,x),B=n.mul(b,C),B=n.add(B,B),x=n.mul(B,P),N=n.sub(N,x),k=n.mul(B,R),k=n.add(k,k),k=n.add(k,k),new d(N,S,k)}add(g){c(g);const{px:p,py:A,pz:E}=this,{px:b,py:C,pz:N}=g;let S=n.ZERO,k=n.ZERO,x=n.ZERO;const R=t.a,B=n.mul(t.b,ia);let P=n.mul(p,b),q=n.mul(A,C),T=n.mul(E,N),I=n.add(p,A),O=n.add(b,C);I=n.mul(I,O),O=n.add(P,q),I=n.sub(I,O),O=n.add(p,E);let U=n.add(b,N);return O=n.mul(O,U),U=n.add(P,T),O=n.sub(O,U),U=n.add(A,E),S=n.add(C,N),U=n.mul(U,S),S=n.add(q,T),U=n.sub(U,S),x=n.mul(R,O),S=n.mul(B,T),x=n.add(S,x),S=n.sub(q,x),x=n.add(q,x),k=n.mul(S,x),q=n.add(P,P),q=n.add(q,P),T=n.mul(R,T),O=n.mul(B,O),q=n.add(q,T),T=n.sub(P,T),T=n.mul(R,T),O=n.add(O,T),P=n.mul(q,O),k=n.add(k,P),P=n.mul(U,O),S=n.mul(I,S),S=n.sub(S,P),P=n.mul(I,q),x=n.mul(U,x),x=n.add(x,P),new d(S,k,x)}subtract(g){return this.add(g.negate())}is0(){return this.equals(d.ZERO)}wNAF(g){return _.wNAFCached(this,g,d.normalizeZ)}multiplyUnsafe(g){const{endo:p,n:A}=t;wn("scalar",g,gt,A);const E=d.ZERO;if(g===gt)return E;if(this.is0()||g===Y)return this;if(!p||_.hasPrecomputes(this))return _.wNAFCachedUnsafe(this,g,d.normalizeZ);let{k1neg:b,k1:C,k2neg:N,k2:S}=p.splitScalar(g),k=E,x=E,R=this;for(;C>gt||S>gt;)C&Y&&(k=k.add(R)),S&Y&&(x=x.add(R)),R=R.double(),C>>=Y,S>>=Y;return b&&(k=k.negate()),N&&(x=x.negate()),x=new d(n.mul(x.px,p.beta),x.py,x.pz),k.add(x)}multiply(g){const{endo:p,n:A}=t;wn("scalar",g,Y,A);let E,b;if(p){const{k1neg:C,k1:N,k2neg:S,k2:k}=p.splitScalar(g);let{p:x,f:R}=this.wNAF(N),{p:B,f:P}=this.wNAF(k);x=_.constTimeNegate(C,x),B=_.constTimeNegate(S,B),B=new d(n.mul(B.px,p.beta),B.py,B.pz),E=x.add(B),b=R.add(P)}else{const{p:C,f:N}=this.wNAF(g);E=C,b=N}return d.normalizeZ([E,b])[0]}multiplyAndAddUnsafe(g,p,A){const E=d.BASE,b=(N,S)=>S===gt||S===Y||!N.equals(E)?N.multiplyUnsafe(S):N.multiply(S),C=b(this,p).add(b(g,A));return C.is0()?void 0:C}toAffine(g){return u(this,g)}isTorsionFree(){const{h:g,isTorsionFree:p}=t;if(g===Y)return!0;if(p)return p(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:g,clearCofactor:p}=t;return g===Y?this:p?p(d,this):this.multiplyUnsafe(t.h)}toRawBytes(g=!0){return tr("isCompressed",g),this.assertValidity(),i(d,this,g)}toHex(g=!0){return tr("isCompressed",g),Ht(this.toRawBytes(g))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,_=Fg(d,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:s}}function Zg(e){const t=_d(e);return pi(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Fs(e){const t=Zg(e),{Fp:n,n:r}=t,i=n.BYTES+1,a=2*n.BYTES+1;function o(T){return de(T,r)}function s(T){return ra(T,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:h}=pd({...t,toBytes(T,I,O){const U=I.toAffine(),V=n.toBytes(U.x),ee=rr;return tr("isCompressed",O),O?ee(Uint8Array.from([I.hasEvenY()?2:3]),V):ee(Uint8Array.from([4]),V,n.toBytes(U.y))},fromBytes(T){const I=T.length,O=T[0],U=T.subarray(1);if(I===i&&(O===2||O===3)){const V=Ae(U);if(!Ia(V,Y,n.ORDER))throw new Error("Point is not on curve");const ee=u(V);let Te;try{Te=n.sqrt(ee)}catch(ft){const Se=ft instanceof Error?": "+ft.message:"";throw new Error("Point is not on curve"+Se)}const me=(Te&Y)===Y;return(O&1)===1!==me&&(Te=n.neg(Te)),{x:V,y:Te}}else if(I===a&&O===4){const V=n.fromBytes(U.subarray(0,n.BYTES)),ee=n.fromBytes(U.subarray(n.BYTES,2*n.BYTES));return{x:V,y:ee}}else{const V=i,ee=a;throw new Error("invalid Point, expected length of "+V+", or uncompressed "+ee+", got "+I)}}}),d=T=>Ht(nr(T,t.nByteLength));function f(T){const I=r>>Y;return T>I}function _(T){return f(T)?o(-T):T}const y=(T,I,O)=>Ae(T.slice(I,O));class g{constructor(I,O,U){this.r=I,this.s=O,this.recovery=U,this.assertValidity()}static fromCompact(I){const O=t.nByteLength;return I=je("compactSignature",I,O*2),new g(y(I,0,O),y(I,O,2*O))}static fromDER(I){const{r:O,s:U}=ht.toSig(je("DER",I));return new g(O,U)}assertValidity(){wn("r",this.r,Y,r),wn("s",this.s,Y,r)}addRecoveryBit(I){return new g(this.r,this.s,I)}recoverPublicKey(I){const{r:O,s:U,recovery:V}=this,ee=N(je("msgHash",I));if(V==null||![0,1,2,3].includes(V))throw new Error("recovery id invalid");const Te=V===2||V===3?O+t.n:O;if(Te>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const me=(V&1)===0?"02":"03",Rt=l.fromHex(me+d(Te)),ft=s(Te),Se=o(-ee*ft),Mn=o(U*ft),jt=l.BASE.multiplyAndAddUnsafe(Rt,Se,Mn);if(!jt)throw new Error("point at infinify");return jt.assertValidity(),jt}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Ft(this.toDERHex())}toDERHex(){return ht.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ft(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const p={isValidPrivateKey(T){try{return c(T),!0}catch{return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const T=ud(t.n);return Ug(t.randomBytes(T),t.n)},precompute(T=8,I=l.BASE){return I._setWindowSize(T),I.multiply(BigInt(3)),I}};function A(T,I=!0){return l.fromPrivateKey(T).toRawBytes(I)}function E(T){const I=xn(T),O=typeof T=="string",U=(I||O)&&T.length;return I?U===i||U===a:O?U===2*i||U===2*a:T instanceof l}function b(T,I,O=!0){if(E(T))throw new Error("first arg must be private key");if(!E(I))throw new Error("second arg must be public key");return l.fromHex(I).multiply(c(T)).toRawBytes(O)}const C=t.bits2int||function(T){if(T.length>8192)throw new Error("input is too large");const I=Ae(T),O=T.length*8-t.nBitLength;return O>0?I>>BigInt(O):I},N=t.bits2int_modN||function(T){return o(C(T))},S=ka(t.nBitLength);function k(T){return wn("num < 2^"+t.nBitLength,T,gt,S),nr(T,t.nByteLength)}function x(T,I,O=R){if(["recovered","canonical"].some(un=>un in O))throw new Error("sign() legacy options not supported");const{hash:U,randomBytes:V}=t;let{lowS:ee,prehash:Te,extraEntropy:me}=O;ee==null&&(ee=!0),T=je("msgHash",T),Hc(O),Te&&(T=je("prehashed msgHash",U(T)));const Rt=N(T),ft=c(I),Se=[k(ft),k(Rt)];if(me!=null&&me!==!1){const un=me===!0?V(n.BYTES):me;Se.push(je("extraEntropy",un))}const Mn=rr(...Se),jt=Rt;function Xa(un){const Hn=C(un);if(!h(Hn))return;const Ja=s(Hn),wr=l.BASE.multiply(Hn).toAffine(),dn=o(wr.x);if(dn===gt)return;const Er=o(Ja*o(jt+dn*ft));if(Er===gt)return;let Ar=(wr.x===dn?0:2)|Number(wr.y&Y),Fn=Er;return ee&&f(Er)&&(Fn=_(Er),Ar^=1),new g(dn,Fn,Ar)}return{seed:Mn,k2sig:Xa}}const R={lowS:t.lowS,prehash:!1},B={lowS:t.lowS,prehash:!1};function P(T,I,O=R){const{seed:U,k2sig:V}=x(T,I,O),ee=t;return Qu(ee.hash.outputLen,ee.nByteLength,ee.hmac)(U,V)}l.BASE._setWindowSize(8);function q(T,I,O,U=B){var Ar;const V=T;I=je("msgHash",I),O=je("publicKey",O);const{lowS:ee,prehash:Te,format:me}=U;if(Hc(U),"strict"in U)throw new Error("options.strict was renamed to lowS");if(me!==void 0&&me!=="compact"&&me!=="der")throw new Error("format must be compact or der");const Rt=typeof V=="string"||xn(V),ft=!Rt&&!me&&typeof V=="object"&&V!==null&&typeof V.r=="bigint"&&typeof V.s=="bigint";if(!Rt&&!ft)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Se,Mn;try{if(ft&&(Se=new g(V.r,V.s)),Rt){try{me!=="compact"&&(Se=g.fromDER(V))}catch(Fn){if(!(Fn instanceof ht.Err))throw Fn}!Se&&me!=="der"&&(Se=g.fromCompact(V))}Mn=l.fromHex(O)}catch{return!1}if(!Se||ee&&Se.hasHighS())return!1;Te&&(I=t.hash(I));const{r:jt,s:Xa}=Se,un=N(I),Hn=s(Xa),Ja=o(un*Hn),wr=o(jt*Hn),dn=(Ar=l.BASE.multiplyAndAddUnsafe(Mn,Ja,wr))==null?void 0:Ar.toAffine();return dn?o(dn.x)===jt:!1}return{CURVE:t,getPublicKey:A,getSharedSecret:b,sign:P,verify:q,ProjectivePoint:l,Signature:g,utils:p}}function yd(e,t){const n=e.ORDER;let r=gt;for(let _=n-Y;_%Zt===gt;_/=Zt)r+=Y;const i=r,a=Zt<<i-Y-Y,o=a*Zt,s=(n-Y)/o,l=(s-Y)/Zt,c=o-Y,u=a,h=e.pow(t,s),d=e.pow(t,(s+Y)/Zt);let f=(_,y)=>{let g=h,p=e.pow(y,c),A=e.sqr(p);A=e.mul(A,y);let E=e.mul(_,A);E=e.pow(E,l),E=e.mul(E,p),p=e.mul(E,y),A=e.mul(E,_);let b=e.mul(A,p);E=e.pow(b,u);let C=e.eql(E,e.ONE);p=e.mul(A,d),E=e.mul(b,g),A=e.cmov(p,A,C),b=e.cmov(E,b,C);for(let N=i;N>Y;N--){let S=N-Zt;S=Zt<<S-Y;let k=e.pow(b,S);const x=e.eql(k,e.ONE);p=e.mul(A,g),g=e.mul(g,g),k=e.mul(b,g),A=e.cmov(p,A,x),b=e.cmov(k,b,x)}return{isValid:C,value:A}};if(e.ORDER%Fc===ia){const _=(e.ORDER-ia)/Fc,y=e.sqrt(e.neg(t));f=(g,p)=>{let A=e.sqr(p);const E=e.mul(g,p);A=e.mul(A,E);let b=e.pow(A,_);b=e.mul(b,E);const C=e.mul(b,y),N=e.mul(e.sqr(b),p),S=e.eql(N,g);let k=e.cmov(C,b,S);return{isValid:S,value:k}}}return f}function Gg(e,t){if(Ba(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=yd(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let i,a,o,s,l,c,u,h;i=e.sqr(r),i=e.mul(i,t.Z),a=e.sqr(i),a=e.add(a,i),o=e.add(a,e.ONE),o=e.mul(o,t.B),s=e.cmov(t.Z,e.neg(a),!e.eql(a,e.ZERO)),s=e.mul(s,t.A),a=e.sqr(o),c=e.sqr(s),l=e.mul(c,t.A),a=e.add(a,l),a=e.mul(a,o),c=e.mul(c,s),l=e.mul(c,t.B),a=e.add(a,l),u=e.mul(i,o);const{isValid:d,value:f}=n(a,c);h=e.mul(i,r),h=e.mul(h,f),u=e.cmov(u,o,d),h=e.cmov(h,f,d);const _=e.isOdd(r)===e.isOdd(h);return h=e.cmov(e.neg(h),h,_),u=e.div(u,s),{x:u,y:h}}}const Kg=Object.freeze(Object.defineProperty({__proto__:null,DER:ht,SWUFpSqrtRatio:yd,mapToCurveSimpleSWU:Gg,weierstrass:Fs,weierstrassPoints:pd},Symbol.toStringTag,{value:"Module"}));class bd extends Ms{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,ag(t);const r=Ca(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(r.length>i?t.create().update(r).digest():r);for(let o=0;o<a.length;o++)a[o]^=54;this.iHash.update(a),this.oHash=t.create();for(let o=0;o<a.length;o++)a[o]^=106;this.oHash.update(a),a.fill(0)}update(t){return ir(this),this.iHash.update(t),this}digestInto(t){ir(this),yi(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:i,destroyed:a,blockLen:o,outputLen:s}=this;return t=t,t.finished=i,t.destroyed=a,t.blockLen=o,t.outputLen=s,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const md=(e,t,n)=>new bd(e,t).update(n).digest();md.create=(e,t)=>new bd(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wd(e){return{hash:e,hmac:(t,...n)=>md(e,t,cg(...n)),randomBytes:lg}}function Wg(e,t){const n=r=>Fs({...e,...wd(r)});return Object.freeze({...n(t),create:n})}/*! scure-starknet - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Gr=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),gn=BigInt("0x800000000000000000000000000000000000000000000000000000000000000"),Ed=252;function zc(e){for(;e[0]===0;)e=e.subarray(1);const t=e.length*8-Ed,n=Ae(e);return t>0?n>>BigInt(t):n}function Ad(e){return typeof e=="string"&&(e=js(e),e.length&1&&(e="0"+e)),Ft(e)}const On=Fs({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:Na(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:Gr,nBitLength:Ed,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...wd(bi),bits2int:zc,bits2int_modN:e=>{const t=Ae(e).toString(16);return t.length===63&&(e=Ad(t+"0")),de(zc(e),Gr)}}),Xg=On;function ar(e){return je("",typeof e=="string"?Ad(e):e)}function Ra(e){return Ht(ar(e)).padStart(64,"0")}function zs(e,t=!1){return On.getPublicKey(Ra(e),t)}function Jg(e,t){return On.getSharedSecret(Ra(e),t)}function Td(e){const{r:t,s:n}=e;if(t<0n||t>=gn)throw new Error(`Signature.r should be [1, ${gn})`);const r=ra(n,Gr);if(r<0n||r>=gn)throw new Error(`inv(Signature.s) should be [1, ${gn})`)}function Sd(e){const t=ar(e);if(Ae(t)>=gn)throw new Error(`msgHash should be [0, ${gn})`);return t}function Qg(e,t,n){const r=On.sign(Sd(e),Ra(t),n);return Td(r),r}function vd(e,t,n){if(!(e instanceof zr)){const r=ar(e);try{e=zr.fromDER(r)}catch(i){if(!(i instanceof ht.Err))throw i;e=zr.fromCompact(r)}}return Td(e),On.verify(e,Sd(t),ar(n))}const{CURVE:e_,ProjectivePoint:Yn,Signature:zr,utils:xd}=On;function Id(e){return`0x${Ht(e.subarray(1)).replace(/^0+/gm,"")}`}function js(e){return e.replace(/^0x/i,"")}function kd(e){const t=ar(e),n=2n**256n,r=n-de(n,Gr);for(let i=0;;i++){const a=Lo(rr(t,Vs(BigInt(i))));if(a<r)return de(a,Gr).toString(16);if(i===1e5)throw new Error("grindKey is broken: tried 100k vals")}}function Cd(e){return Id(zs(e,!0))}function t_(e){if(e=js(e),e.length!==130)throw new Error("Wrong ethereum signature");return kd(e.substring(0,64))}const n_=2n**31n-1n,Di=e=>Number(e&n_);function r_(e,t,n,r){const i=Di(Lo(e)),a=Di(Lo(t)),o=xa(js(n));return`m/2645'/${i}'/${a}'/${Di(o)}'/${Di(o>>31n)}'/${r}`}const Kr=[new Yn(2089986280348253421170679821480865132823066470938446095505822317253594081284n,1713931329540660377023406109199410414810705867260802078187082345529207694986n,1n),new Yn(996781205833008774514500082376783249102396023663454813447423147977397232763n,1668503676786377725805489344771023921079126552019160156920634619255970485781n,1n),new Yn(2251563274489750535117886426533222435294046428347329203627021249169616184184n,1798716007562728905295480679789526322175868328062420237419143593021674992973n,1n),new Yn(2138414695194151160943305727036575959195309218611738193261179310511854807447n,113410276730064486255102093846540133784865286929052426931474106396135072156n,1n),new Yn(2379962749567351885752724891227938183011949129833673362440656643086021394946n,776496453633298175483985398648758586525933812536653089401905292063708816422n,1n)];function Bd(e,t){const n=[];let r=e;for(let i=0;i<248;i++)n.push(r),r=r.double();r=t;for(let i=0;i<4;i++)n.push(r),r=r.double();return n}const i_=Bd(Kr[1],Kr[2]),a_=Bd(Kr[3],Kr[4]);function o_(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"){if(!Number.isSafeInteger(e))throw new Error(`Invalid pedersenArg: ${e}`);t=BigInt(e)}else t=Ae(ar(e));if(!(0n<=t&&t<On.CURVE.Fp.ORDER))throw new Error(`PedersenArg should be 0 <= value < CURVE.P: ${t}`);return t}function jc(e,t,n){let r=o_(t);for(let i=0;i<252;i++){const a=n[i];if(!a)throw new Error("invalid constant index");if(a.equals(e))throw new Error("Same point");(r&1n)!==0n&&(e=e.add(a)),r>>=1n}return e}function mi(e,t){let n=Kr[0];return n=jc(n,e,i_),n=jc(n,t,a_),Id(n.toRawBytes(!0))}const s_=(e,t=mi)=>[0,...e,e.length].reduce((n,r)=>t(n,r)),c_=ka(250),on=e=>Ae(od(e))&c_,Lo=e=>Ae(bi(e)),Nd=Na(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function Po(e,t,n){const r=e.fromBytes(bi(td(`${t}${n}`)));return e.create(r)}function Rd(e,t,n,r=0){const i=[],a=[];for(let o=0;o<n;o++)i.push(Po(e,`${t}x`,r*n+o)),a.push(Po(e,`${t}y`,r*n+o));if(new Set([...i,...a]).size!==2*n)throw new Error("X and Y values are not distinct");return i.map(o=>a.map(s=>e.inv(e.sub(o,s))))}const l_=[[3,1,1],[1,-1,1],[1,1,-2]].map(e=>e.map(BigInt));function qs(e,t){if(Ba(e.Fp),!Number.isSafeInteger(e.rate)||!Number.isSafeInteger(e.capacity))throw new Error(`Wrong poseidon opts: ${e}`);const n=e.rate+e.capacity,r=e.roundsFull+e.roundsPartial,i=[];for(let o=0;o<r;o++){const s=[];for(let l=0;l<n;l++)s.push(Po(e.Fp,"Hades",n*o+l));i.push(s)}const a=fd({...e,t:n,sboxPower:3,reversePartialPowIdx:!0,mds:t,roundConstants:i});return a.m=n,a.rate=e.rate,a.capacity=e.capacity,a}function u_(e,t=0){const n=e.rate+e.capacity;if(!Number.isSafeInteger(t))throw new Error(`Wrong mdsAttempt=${t}`);return qs(e,Rd(e.Fp,"HadesMDS",n,t))}const wi=qs({Fp:Nd,rate:2,capacity:1,roundsFull:8,roundsPartial:83},l_);function Ys(e,t,n=wi){return n([e,t,2n])[0]}function d_(e,t,n=wi){return Vs(Ys(Ae(e),Ae(t),n))}function f_(e,t=wi){return t([e,0n,1n])[0]}function ce(e,t=wi){const{m:n,rate:r}=t;if(!Array.isArray(e))throw new Error("bigint array expected in values");const i=Array.from(e);for(i.push(1n);i.length%r!==0;)i.push(0n);let a=new Array(n).fill(0n);for(let o=0;o<i.length;o+=r){for(let s=0;s<r;s++){const l=i[o+s];if(typeof l>"u")throw new Error("invalid index");if(typeof a[s]>"u")throw new Error("state[j] is undefined");a[s]=a[s]+l}a=t(a)}return a[0]}const h_=Object.freeze(Object.defineProperty({__proto__:null,CURVE:e_,Fp251:Nd,MAX_VALUE:gn,ProjectivePoint:Yn,Signature:zr,_poseidonMDS:Rd,_starkCurve:Xg,computeHashOnElements:s_,ethSigToPrivate:t_,getAccountPath:r_,getPublicKey:zs,getSharedSecret:Jg,getStarkKey:Cd,grindKey:kd,keccak:on,normalizePrivateKey:Ra,pedersen:mi,poseidonBasic:qs,poseidonCreate:u_,poseidonHash:Ys,poseidonHashFunc:d_,poseidonHashMany:ce,poseidonHashSingle:f_,poseidonSmall:wi,sign:Qg,utils:xd,verify:vd},Symbol.toStringTag,{value:"Module"}));/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const g_=4,qc=0,Yc=1,__=2;function _r(e){let t=e.length;for(;--t>=0;)e[t]=0}const p_=0,Od=1,y_=2,b_=3,m_=258,Zs=29,Ei=256,Wr=Ei+1+Zs,Qn=30,Gs=19,Dd=2*Wr+1,_n=15,co=16,w_=7,Ks=256,Ld=16,Pd=17,Ud=18,Uo=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ji=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),E_=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),$d=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),A_=512,Pt=new Array((Wr+2)*2);_r(Pt);const jr=new Array(Qn*2);_r(jr);const Xr=new Array(A_);_r(Xr);const Jr=new Array(m_-b_+1);_r(Jr);const Ws=new Array(Zs);_r(Ws);const aa=new Array(Qn);_r(aa);function lo(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let Vd,Md,Hd;function uo(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const Fd=e=>e<256?Xr[e]:Xr[256+(e>>>7)],Qr=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},ve=(e,t,n)=>{e.bi_valid>co-n?(e.bi_buf|=t<<e.bi_valid&65535,Qr(e,e.bi_buf),e.bi_buf=t>>co-e.bi_valid,e.bi_valid+=n-co):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},St=(e,t,n)=>{ve(e,n[t*2],n[t*2+1])},zd=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},T_=e=>{e.bi_valid===16?(Qr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},S_=(e,t)=>{const n=t.dyn_tree,r=t.max_code,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length;let c,u,h,d,f,_,y=0;for(d=0;d<=_n;d++)e.bl_count[d]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<Dd;c++)u=e.heap[c],d=n[n[u*2+1]*2+1]+1,d>l&&(d=l,y++),n[u*2+1]=d,!(u>r)&&(e.bl_count[d]++,f=0,u>=s&&(f=o[u-s]),_=n[u*2],e.opt_len+=_*(d+f),a&&(e.static_len+=_*(i[u*2+1]+f)));if(y!==0){do{for(d=l-1;e.bl_count[d]===0;)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[l]--,y-=2}while(y>0);for(d=l;d!==0;d--)for(u=e.bl_count[d];u!==0;)h=e.heap[--c],!(h>r)&&(n[h*2+1]!==d&&(e.opt_len+=(d-n[h*2+1])*n[h*2],n[h*2+1]=d),u--)}},jd=(e,t,n)=>{const r=new Array(_n+1);let i=0,a,o;for(a=1;a<=_n;a++)i=i+n[a-1]<<1,r[a]=i;for(o=0;o<=t;o++){let s=e[o*2+1];s!==0&&(e[o*2]=zd(r[s]++,s))}},v_=()=>{let e,t,n,r,i;const a=new Array(_n+1);for(n=0,r=0;r<Zs-1;r++)for(Ws[r]=n,e=0;e<1<<Uo[r];e++)Jr[n++]=r;for(Jr[n-1]=r,i=0,r=0;r<16;r++)for(aa[r]=i,e=0;e<1<<ji[r];e++)Xr[i++]=r;for(i>>=7;r<Qn;r++)for(aa[r]=i<<7,e=0;e<1<<ji[r]-7;e++)Xr[256+i++]=r;for(t=0;t<=_n;t++)a[t]=0;for(e=0;e<=143;)Pt[e*2+1]=8,e++,a[8]++;for(;e<=255;)Pt[e*2+1]=9,e++,a[9]++;for(;e<=279;)Pt[e*2+1]=7,e++,a[7]++;for(;e<=287;)Pt[e*2+1]=8,e++,a[8]++;for(jd(Pt,Wr+1,a),e=0;e<Qn;e++)jr[e*2+1]=5,jr[e*2]=zd(e,5);Vd=new lo(Pt,Uo,Ei+1,Wr,_n),Md=new lo(jr,ji,0,Qn,_n),Hd=new lo(new Array(0),E_,0,Gs,w_)},qd=e=>{let t;for(t=0;t<Wr;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Qn;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Gs;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Ks*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Yd=e=>{e.bi_valid>8?Qr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},Zc=(e,t,n,r)=>{const i=t*2,a=n*2;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]},fo=(e,t,n)=>{const r=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&Zc(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Zc(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r},Gc=(e,t,n)=>{let r,i,a=0,o,s;if(e.sym_next!==0)do r=e.pending_buf[e.sym_buf+a++]&255,r+=(e.pending_buf[e.sym_buf+a++]&255)<<8,i=e.pending_buf[e.sym_buf+a++],r===0?St(e,i,t):(o=Jr[i],St(e,o+Ei+1,t),s=Uo[o],s!==0&&(i-=Ws[o],ve(e,i,s)),r--,o=Fd(r),St(e,o,n),s=ji[o],s!==0&&(r-=aa[o],ve(e,r,s)));while(a<e.sym_next);St(e,Ks,t)},$o=(e,t)=>{const n=t.dyn_tree,r=t.stat_desc.static_tree,i=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,l=-1,c;for(e.heap_len=0,e.heap_max=Dd,o=0;o<a;o++)n[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=l<2?++l:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,i&&(e.static_len-=r[c*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)fo(e,n,o);c=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],fo(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[c*2]=n[o*2]+n[s*2],e.depth[c]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[o*2+1]=n[s*2+1]=c,e.heap[1]=c++,fo(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],S_(e,t),jd(n,l,e.bl_count)},Kc=(e,t,n)=>{let r,i=-1,a,o=t[0*2+1],s=0,l=7,c=4;for(o===0&&(l=138,c=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)a=o,o=t[(r+1)*2+1],!(++s<l&&a===o)&&(s<c?e.bl_tree[a*2]+=s:a!==0?(a!==i&&e.bl_tree[a*2]++,e.bl_tree[Ld*2]++):s<=10?e.bl_tree[Pd*2]++:e.bl_tree[Ud*2]++,s=0,i=a,o===0?(l=138,c=3):a===o?(l=6,c=3):(l=7,c=4))},Wc=(e,t,n)=>{let r,i=-1,a,o=t[0*2+1],s=0,l=7,c=4;for(o===0&&(l=138,c=3),r=0;r<=n;r++)if(a=o,o=t[(r+1)*2+1],!(++s<l&&a===o)){if(s<c)do St(e,a,e.bl_tree);while(--s!==0);else a!==0?(a!==i&&(St(e,a,e.bl_tree),s--),St(e,Ld,e.bl_tree),ve(e,s-3,2)):s<=10?(St(e,Pd,e.bl_tree),ve(e,s-3,3)):(St(e,Ud,e.bl_tree),ve(e,s-11,7));s=0,i=a,o===0?(l=138,c=3):a===o?(l=6,c=3):(l=7,c=4)}},x_=e=>{let t;for(Kc(e,e.dyn_ltree,e.l_desc.max_code),Kc(e,e.dyn_dtree,e.d_desc.max_code),$o(e,e.bl_desc),t=Gs-1;t>=3&&e.bl_tree[$d[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},I_=(e,t,n,r)=>{let i;for(ve(e,t-257,5),ve(e,n-1,5),ve(e,r-4,4),i=0;i<r;i++)ve(e,e.bl_tree[$d[i]*2+1],3);Wc(e,e.dyn_ltree,t-1),Wc(e,e.dyn_dtree,n-1)},k_=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return qc;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Yc;for(n=32;n<Ei;n++)if(e.dyn_ltree[n*2]!==0)return Yc;return qc};let Xc=!1;const C_=e=>{Xc||(v_(),Xc=!0),e.l_desc=new uo(e.dyn_ltree,Vd),e.d_desc=new uo(e.dyn_dtree,Md),e.bl_desc=new uo(e.bl_tree,Hd),e.bi_buf=0,e.bi_valid=0,qd(e)},Zd=(e,t,n,r)=>{ve(e,(p_<<1)+(r?1:0),3),Yd(e),Qr(e,n),Qr(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},B_=e=>{ve(e,Od<<1,3),St(e,Ks,Pt),T_(e)},N_=(e,t,n,r)=>{let i,a,o=0;e.level>0?(e.strm.data_type===__&&(e.strm.data_type=k_(e)),$o(e,e.l_desc),$o(e,e.d_desc),o=x_(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&t!==-1?Zd(e,t,n,r):e.strategy===g_||a===i?(ve(e,(Od<<1)+(r?1:0),3),Gc(e,Pt,jr)):(ve(e,(y_<<1)+(r?1:0),3),I_(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),Gc(e,e.dyn_ltree,e.dyn_dtree)),qd(e),r&&Yd(e)},R_=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(Jr[n]+Ei+1)*2]++,e.dyn_dtree[Fd(t)*2]++),e.sym_next===e.sym_end);var O_=C_,D_=Zd,L_=N_,P_=R_,U_=B_,$_={_tr_init:O_,_tr_stored_block:D_,_tr_flush_block:L_,_tr_tally:P_,_tr_align:U_};const V_=(e,t,n,r)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var ei=V_;const M_=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},H_=new Uint32Array(M_()),F_=(e,t,n,r)=>{const i=H_,a=r+n;e^=-1;for(let o=r;o<a;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var re=F_,In={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Oa={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:z_,_tr_stored_block:Vo,_tr_flush_block:j_,_tr_tally:en,_tr_align:q_}=$_,{Z_NO_FLUSH:tn,Z_PARTIAL_FLUSH:Y_,Z_FULL_FLUSH:Z_,Z_FINISH:st,Z_BLOCK:Jc,Z_OK:ue,Z_STREAM_END:Qc,Z_STREAM_ERROR:kt,Z_DATA_ERROR:G_,Z_BUF_ERROR:ho,Z_DEFAULT_COMPRESSION:K_,Z_FILTERED:W_,Z_HUFFMAN_ONLY:Li,Z_RLE:X_,Z_FIXED:J_,Z_DEFAULT_STRATEGY:Q_,Z_UNKNOWN:ep,Z_DEFLATED:Da}=Oa,tp=9,np=15,rp=8,ip=29,ap=256,Mo=ap+1+ip,op=30,sp=19,cp=2*Mo+1,lp=15,H=3,Kt=258,Ct=Kt+H+1,up=32,or=42,Xs=57,Ho=69,Fo=73,zo=91,jo=103,pn=113,xr=666,Ee=1,pr=2,kn=3,yr=4,dp=3,yn=(e,t)=>(e.msg=In[t],t),el=e=>e*2-(e>4?9:0),Gt=e=>{let t=e.length;for(;--t>=0;)e[t]=0},fp=e=>{let t,n,r,i=e.w_size;t=e.hash_size,r=t;do n=e.head[--r],e.head[r]=n>=i?n-i:0;while(--t);t=i,r=t;do n=e.prev[--r],e.prev[r]=n>=i?n-i:0;while(--t)};let hp=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,nn=hp;const Be=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},Ve=(e,t)=>{j_(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Be(e.strm)},j=(e,t)=>{e.pending_buf[e.pending++]=t},Sr=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},qo=(e,t,n,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),e.state.wrap===1?e.adler=ei(e.adler,t,i,n):e.state.wrap===2&&(e.adler=re(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Gd=(e,t)=>{let n=e.max_chain_length,r=e.strstart,i,a,o=e.prev_length,s=e.nice_match;const l=e.strstart>e.w_size-Ct?e.strstart-(e.w_size-Ct):0,c=e.window,u=e.w_mask,h=e.prev,d=e.strstart+Kt;let f=c[r+o-1],_=c[r+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(i=t,!(c[i+o]!==_||c[i+o-1]!==f||c[i]!==c[r]||c[++i]!==c[r+1])){r+=2,i++;do;while(c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&c[++r]===c[++i]&&r<d);if(a=Kt-(d-r),r=d-Kt,a>o){if(e.match_start=t,o=a,a>=s)break;f=c[r+o-1],_=c[r+o]}}while((t=h[t&u])>l&&--n!==0);return o<=e.lookahead?o:e.lookahead},sr=e=>{const t=e.w_size;let n,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ct)&&(e.window.set(e.window.subarray(t,t+t-r),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),fp(e),r+=t),e.strm.avail_in===0)break;if(n=qo(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=n,e.lookahead+e.insert>=H)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=nn(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=nn(e,e.ins_h,e.window[i+H-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<H)););}while(e.lookahead<Ct&&e.strm.avail_in!==0)},Kd=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,i,a,o=0,s=e.strm.avail_in;do{if(r=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>a&&(r=a),r<n&&(r===0&&t!==st||t===tn||r!==i+e.strm.avail_in)))break;o=t===st&&r===i+e.strm.avail_in?1:0,Vo(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,Be(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(qo(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(o===0);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?yr:t!==tn&&t!==st&&e.strm.avail_in===0&&e.strstart===e.block_start?pr:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(qo(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,n=a>e.w_size?e.w_size:a,i=e.strstart-e.block_start,(i>=n||(i||t===st)&&t!==tn&&e.strm.avail_in===0&&i<=a)&&(r=i>a?a:i,o=t===st&&e.strm.avail_in===0&&r===i?1:0,Vo(e,e.block_start,r,o),e.block_start+=r,Be(e.strm)),o?kn:Ee)},go=(e,t)=>{let n,r;for(;;){if(e.lookahead<Ct){if(sr(e),e.lookahead<Ct&&t===tn)return Ee;if(e.lookahead===0)break}if(n=0,e.lookahead>=H&&(e.ins_h=nn(e,e.ins_h,e.window[e.strstart+H-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Ct&&(e.match_length=Gd(e,n)),e.match_length>=H)if(r=en(e,e.strstart-e.match_start,e.match_length-H),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=H){e.match_length--;do e.strstart++,e.ins_h=nn(e,e.ins_h,e.window[e.strstart+H-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=nn(e,e.ins_h,e.window[e.strstart+1]);else r=en(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(Ve(e,!1),e.strm.avail_out===0))return Ee}return e.insert=e.strstart<H-1?e.strstart:H-1,t===st?(Ve(e,!0),e.strm.avail_out===0?kn:yr):e.sym_next&&(Ve(e,!1),e.strm.avail_out===0)?Ee:pr},jn=(e,t)=>{let n,r,i;for(;;){if(e.lookahead<Ct){if(sr(e),e.lookahead<Ct&&t===tn)return Ee;if(e.lookahead===0)break}if(n=0,e.lookahead>=H&&(e.ins_h=nn(e,e.ins_h,e.window[e.strstart+H-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=H-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Ct&&(e.match_length=Gd(e,n),e.match_length<=5&&(e.strategy===W_||e.match_length===H&&e.strstart-e.match_start>4096)&&(e.match_length=H-1)),e.prev_length>=H&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-H,r=en(e,e.strstart-1-e.prev_match,e.prev_length-H),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=nn(e,e.ins_h,e.window[e.strstart+H-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=H-1,e.strstart++,r&&(Ve(e,!1),e.strm.avail_out===0))return Ee}else if(e.match_available){if(r=en(e,0,e.window[e.strstart-1]),r&&Ve(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ee}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=en(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<H-1?e.strstart:H-1,t===st?(Ve(e,!0),e.strm.avail_out===0?kn:yr):e.sym_next&&(Ve(e,!1),e.strm.avail_out===0)?Ee:pr},gp=(e,t)=>{let n,r,i,a;const o=e.window;for(;;){if(e.lookahead<=Kt){if(sr(e),e.lookahead<=Kt&&t===tn)return Ee;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=H&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+Kt;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=Kt-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=H?(n=en(e,1,e.match_length-H),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=en(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(Ve(e,!1),e.strm.avail_out===0))return Ee}return e.insert=0,t===st?(Ve(e,!0),e.strm.avail_out===0?kn:yr):e.sym_next&&(Ve(e,!1),e.strm.avail_out===0)?Ee:pr},_p=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(sr(e),e.lookahead===0)){if(t===tn)return Ee;break}if(e.match_length=0,n=en(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(Ve(e,!1),e.strm.avail_out===0))return Ee}return e.insert=0,t===st?(Ve(e,!0),e.strm.avail_out===0?kn:yr):e.sym_next&&(Ve(e,!1),e.strm.avail_out===0)?Ee:pr};function mt(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}const Ir=[new mt(0,0,0,0,Kd),new mt(4,4,8,4,go),new mt(4,5,16,8,go),new mt(4,6,32,32,go),new mt(4,4,16,16,jn),new mt(8,16,32,32,jn),new mt(8,16,128,128,jn),new mt(8,32,128,256,jn),new mt(32,128,258,1024,jn),new mt(32,258,258,4096,jn)],pp=e=>{e.window_size=2*e.w_size,Gt(e.head),e.max_lazy_match=Ir[e.level].max_lazy,e.good_match=Ir[e.level].good_length,e.nice_match=Ir[e.level].nice_length,e.max_chain_length=Ir[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=H-1,e.match_available=0,e.ins_h=0};function yp(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Da,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(cp*2),this.dyn_dtree=new Uint16Array((2*op+1)*2),this.bl_tree=new Uint16Array((2*sp+1)*2),Gt(this.dyn_ltree),Gt(this.dyn_dtree),Gt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(lp+1),this.heap=new Uint16Array(2*Mo+1),Gt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Mo+1),Gt(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ai=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==or&&t.status!==Xs&&t.status!==Ho&&t.status!==Fo&&t.status!==zo&&t.status!==jo&&t.status!==pn&&t.status!==xr?1:0},Wd=e=>{if(Ai(e))return yn(e,kt);e.total_in=e.total_out=0,e.data_type=ep;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Xs:t.wrap?or:pn,e.adler=t.wrap===2?0:1,t.last_flush=-2,z_(t),ue},Xd=e=>{const t=Wd(e);return t===ue&&pp(e.state),t},bp=(e,t)=>Ai(e)||e.state.wrap!==2?kt:(e.state.gzhead=t,ue),Jd=(e,t,n,r,i,a)=>{if(!e)return kt;let o=1;if(t===K_&&(t=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),i<1||i>tp||n!==Da||r<8||r>15||t<0||t>9||a<0||a>J_||r===8&&o!==1)return yn(e,kt);r===8&&(r=9);const s=new yp;return e.state=s,s.strm=e,s.status=or,s.wrap=o,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+H-1)/H),s.window=new Uint8Array(s.w_size*2),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=a,s.method=n,Xd(e)},mp=(e,t)=>Jd(e,t,Da,np,rp,Q_),wp=(e,t)=>{if(Ai(e)||t>Jc||t<0)return e?yn(e,kt):kt;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===xr&&t!==st)return yn(e,e.avail_out===0?ho:kt);const r=n.last_flush;if(n.last_flush=t,n.pending!==0){if(Be(e),e.avail_out===0)return n.last_flush=-1,ue}else if(e.avail_in===0&&el(t)<=el(r)&&t!==st)return yn(e,ho);if(n.status===xr&&e.avail_in!==0)return yn(e,ho);if(n.status===or&&n.wrap===0&&(n.status=pn),n.status===or){let i=Da+(n.w_bits-8<<4)<<8,a=-1;if(n.strategy>=Li||n.level<2?a=0:n.level<6?a=1:n.level===6?a=2:a=3,i|=a<<6,n.strstart!==0&&(i|=up),i+=31-i%31,Sr(n,i),n.strstart!==0&&(Sr(n,e.adler>>>16),Sr(n,e.adler&65535)),e.adler=1,n.status=pn,Be(e),n.pending!==0)return n.last_flush=-1,ue}if(n.status===Xs){if(e.adler=0,j(n,31),j(n,139),j(n,8),n.gzhead)j(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),j(n,n.gzhead.time&255),j(n,n.gzhead.time>>8&255),j(n,n.gzhead.time>>16&255),j(n,n.gzhead.time>>24&255),j(n,n.level===9?2:n.strategy>=Li||n.level<2?4:0),j(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(j(n,n.gzhead.extra.length&255),j(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=re(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Ho;else if(j(n,0),j(n,0),j(n,0),j(n,0),j(n,0),j(n,n.level===9?2:n.strategy>=Li||n.level<2?4:0),j(n,dp),n.status=pn,Be(e),n.pending!==0)return n.last_flush=-1,ue}if(n.status===Ho){if(n.gzhead.extra){let i=n.pending,a=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+a>n.pending_buf_size;){let s=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex+=s,Be(e),n.pending!==0)return n.last_flush=-1,ue;i=0,a-=s}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending+=a,n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=Fo}if(n.status===Fo){if(n.gzhead.name){let i=n.pending,a;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i)),Be(e),n.pending!==0)return n.last_flush=-1,ue;i=0}n.gzindex<n.gzhead.name.length?a=n.gzhead.name.charCodeAt(n.gzindex++)&255:a=0,j(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=zo}if(n.status===zo){if(n.gzhead.comment){let i=n.pending,a;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i)),Be(e),n.pending!==0)return n.last_flush=-1,ue;i=0}n.gzindex<n.gzhead.comment.length?a=n.gzhead.comment.charCodeAt(n.gzindex++)&255:a=0,j(n,a)}while(a!==0);n.gzhead.hcrc&&n.pending>i&&(e.adler=re(e.adler,n.pending_buf,n.pending-i,i))}n.status=jo}if(n.status===jo){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(Be(e),n.pending!==0))return n.last_flush=-1,ue;j(n,e.adler&255),j(n,e.adler>>8&255),e.adler=0}if(n.status=pn,Be(e),n.pending!==0)return n.last_flush=-1,ue}if(e.avail_in!==0||n.lookahead!==0||t!==tn&&n.status!==xr){let i=n.level===0?Kd(n,t):n.strategy===Li?_p(n,t):n.strategy===X_?gp(n,t):Ir[n.level].func(n,t);if((i===kn||i===yr)&&(n.status=xr),i===Ee||i===kn)return e.avail_out===0&&(n.last_flush=-1),ue;if(i===pr&&(t===Y_?q_(n):t!==Jc&&(Vo(n,0,0,!1),t===Z_&&(Gt(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Be(e),e.avail_out===0))return n.last_flush=-1,ue}return t!==st?ue:n.wrap<=0?Qc:(n.wrap===2?(j(n,e.adler&255),j(n,e.adler>>8&255),j(n,e.adler>>16&255),j(n,e.adler>>24&255),j(n,e.total_in&255),j(n,e.total_in>>8&255),j(n,e.total_in>>16&255),j(n,e.total_in>>24&255)):(Sr(n,e.adler>>>16),Sr(n,e.adler&65535)),Be(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?ue:Qc)},Ep=e=>{if(Ai(e))return kt;const t=e.state.status;return e.state=null,t===pn?yn(e,G_):ue},Ap=(e,t)=>{let n=t.length;if(Ai(e))return kt;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==or||r.lookahead)return kt;if(i===1&&(e.adler=ei(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){i===0&&(Gt(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(t.subarray(n-r.w_size,n),0),t=l,n=r.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,sr(r);r.lookahead>=H;){let l=r.strstart,c=r.lookahead-(H-1);do r.ins_h=nn(r,r.ins_h,r.window[l+H-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--c);r.strstart=l,r.lookahead=H-1,sr(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=H-1,r.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,r.wrap=i,ue};var Tp=mp,Sp=Jd,vp=Xd,xp=Wd,Ip=bp,kp=wp,Cp=Ep,Bp=Ap,Np="pako deflate (from Nodeca project)",qr={deflateInit:Tp,deflateInit2:Sp,deflateReset:vp,deflateResetKeep:xp,deflateSetHeader:Ip,deflate:kp,deflateEnd:Cp,deflateSetDictionary:Bp,deflateInfo:Np};const Rp=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Op=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)Rp(n,r)&&(e[r]=n[r])}}return e},Dp=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,a=e.length;r<a;r++){let o=e[r];n.set(o,i),i+=o.length}return n},La={assign:Op,flattenChunks:Dp};let Qd=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Qd=!1}const ti=new Uint8Array(256);for(let e=0;e<256;e++)ti[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;ti[254]=ti[254]=1;var Lp=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t};const Pp=(e,t)=>{if(t<65534&&e.subarray&&Qd)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var Up=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const a=new Array(n*2);for(i=0,r=0;r<n;){let o=e[r++];if(o<128){a[i++]=o;continue}let s=ti[o];if(s>4){a[i++]=65533,r+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&r<n;)o=o<<6|e[r++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return Pp(a,i)},$p=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+ti[e[n]]>t?n:t},ni={string2buf:Lp,buf2string:Up,utf8border:$p};function Vp(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ef=Vp;const tf=Object.prototype.toString,{Z_NO_FLUSH:Mp,Z_SYNC_FLUSH:Hp,Z_FULL_FLUSH:Fp,Z_FINISH:zp,Z_OK:oa,Z_STREAM_END:jp,Z_DEFAULT_COMPRESSION:qp,Z_DEFAULT_STRATEGY:Yp,Z_DEFLATED:Zp}=Oa;function Pa(e){this.options=La.assign({level:qp,method:Zp,chunkSize:16384,windowBits:15,memLevel:8,strategy:Yp},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ef,this.strm.avail_out=0;let n=qr.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==oa)throw new Error(In[n]);if(t.header&&qr.deflateSetHeader(this.strm,t.header),t.dictionary){let r;if(typeof t.dictionary=="string"?r=ni.string2buf(t.dictionary):tf.call(t.dictionary)==="[object ArrayBuffer]"?r=new Uint8Array(t.dictionary):r=t.dictionary,n=qr.deflateSetDictionary(this.strm,r),n!==oa)throw new Error(In[n]);this._dict_set=!0}}Pa.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(t===~~t?a=t:a=t===!0?zp:Mp,typeof e=="string"?n.input=ni.string2buf(e):tf.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===Hp||a===Fp)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(i=qr.deflate(n,a),i===jp)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=qr.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===oa;if(n.avail_out===0){this.onData(n.output);continue}if(a>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Pa.prototype.onData=function(e){this.chunks.push(e)};Pa.prototype.onEnd=function(e){e===oa&&(this.result=La.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Gp(e,t){const n=new Pa(t);if(n.push(e,!0),n.err)throw n.msg||In[n.err];return n.result}function Kp(e,t){return t=t||{},t.gzip=!0,Gp(e,t)}var Wp=Kp,Xp={gzip:Wp};const Pi=16209,Jp=16191;var Qp=function(t,n){let r,i,a,o,s,l,c,u,h,d,f,_,y,g,p,A,E,b,C,N,S,k,x,R;const B=t.state;r=t.next_in,x=t.input,i=r+(t.avail_in-5),a=t.next_out,R=t.output,o=a-(n-t.avail_out),s=a+(t.avail_out-257),l=B.dmax,c=B.wsize,u=B.whave,h=B.wnext,d=B.window,f=B.hold,_=B.bits,y=B.lencode,g=B.distcode,p=(1<<B.lenbits)-1,A=(1<<B.distbits)-1;e:do{_<15&&(f+=x[r++]<<_,_+=8,f+=x[r++]<<_,_+=8),E=y[f&p];t:for(;;){if(b=E>>>24,f>>>=b,_-=b,b=E>>>16&255,b===0)R[a++]=E&65535;else if(b&16){C=E&65535,b&=15,b&&(_<b&&(f+=x[r++]<<_,_+=8),C+=f&(1<<b)-1,f>>>=b,_-=b),_<15&&(f+=x[r++]<<_,_+=8,f+=x[r++]<<_,_+=8),E=g[f&A];n:for(;;){if(b=E>>>24,f>>>=b,_-=b,b=E>>>16&255,b&16){if(N=E&65535,b&=15,_<b&&(f+=x[r++]<<_,_+=8,_<b&&(f+=x[r++]<<_,_+=8)),N+=f&(1<<b)-1,N>l){t.msg="invalid distance too far back",B.mode=Pi;break e}if(f>>>=b,_-=b,b=a-o,N>b){if(b=N-b,b>u&&B.sane){t.msg="invalid distance too far back",B.mode=Pi;break e}if(S=0,k=d,h===0){if(S+=c-b,b<C){C-=b;do R[a++]=d[S++];while(--b);S=a-N,k=R}}else if(h<b){if(S+=c+h-b,b-=h,b<C){C-=b;do R[a++]=d[S++];while(--b);if(S=0,h<C){b=h,C-=b;do R[a++]=d[S++];while(--b);S=a-N,k=R}}}else if(S+=h-b,b<C){C-=b;do R[a++]=d[S++];while(--b);S=a-N,k=R}for(;C>2;)R[a++]=k[S++],R[a++]=k[S++],R[a++]=k[S++],C-=3;C&&(R[a++]=k[S++],C>1&&(R[a++]=k[S++]))}else{S=a-N;do R[a++]=R[S++],R[a++]=R[S++],R[a++]=R[S++],C-=3;while(C>2);C&&(R[a++]=R[S++],C>1&&(R[a++]=R[S++]))}}else if((b&64)===0){E=g[(E&65535)+(f&(1<<b)-1)];continue n}else{t.msg="invalid distance code",B.mode=Pi;break e}break}}else if((b&64)===0){E=y[(E&65535)+(f&(1<<b)-1)];continue t}else if(b&32){B.mode=Jp;break e}else{t.msg="invalid literal/length code",B.mode=Pi;break e}break}}while(r<i&&a<s);C=_>>3,r-=C,_-=C<<3,f&=(1<<_)-1,t.next_in=r,t.next_out=a,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=a<s?257+(s-a):257-(a-s),B.hold=f,B.bits=_};const qn=15,tl=852,nl=592,rl=0,_o=1,il=2,ey=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ty=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ny=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ry=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),iy=(e,t,n,r,i,a,o,s)=>{const l=s.bits;let c=0,u=0,h=0,d=0,f=0,_=0,y=0,g=0,p=0,A=0,E,b,C,N,S,k=null,x;const R=new Uint16Array(qn+1),B=new Uint16Array(qn+1);let P=null,q,T,I;for(c=0;c<=qn;c++)R[c]=0;for(u=0;u<r;u++)R[t[n+u]]++;for(f=l,d=qn;d>=1&&R[d]===0;d--);if(f>d&&(f=d),d===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(h=1;h<d&&R[h]===0;h++);for(f<h&&(f=h),g=1,c=1;c<=qn;c++)if(g<<=1,g-=R[c],g<0)return-1;if(g>0&&(e===rl||d!==1))return-1;for(B[1]=0,c=1;c<qn;c++)B[c+1]=B[c]+R[c];for(u=0;u<r;u++)t[n+u]!==0&&(o[B[t[n+u]]++]=u);if(e===rl?(k=P=o,x=20):e===_o?(k=ey,P=ty,x=257):(k=ny,P=ry,x=0),A=0,u=0,c=h,S=a,_=f,y=0,C=-1,p=1<<f,N=p-1,e===_o&&p>tl||e===il&&p>nl)return 1;for(;;){q=c-y,o[u]+1<x?(T=0,I=o[u]):o[u]>=x?(T=P[o[u]-x],I=k[o[u]-x]):(T=96,I=0),E=1<<c-y,b=1<<_,h=b;do b-=E,i[S+(A>>y)+b]=q<<24|T<<16|I|0;while(b!==0);for(E=1<<c-1;A&E;)E>>=1;if(E!==0?(A&=E-1,A+=E):A=0,u++,--R[c]===0){if(c===d)break;c=t[n+o[u]]}if(c>f&&(A&N)!==C){for(y===0&&(y=f),S+=h,_=c-y,g=1<<_;_+y<d&&(g-=R[_+y],!(g<=0));)_++,g<<=1;if(p+=1<<_,e===_o&&p>tl||e===il&&p>nl)return 1;C=A&N,i[C]=f<<24|_<<16|S-a|0}}return A!==0&&(i[S+A]=c-y<<24|64<<16|0),s.bits=f,0};var Yr=iy;const ay=0,nf=1,rf=2,{Z_FINISH:al,Z_BLOCK:oy,Z_TREES:Ui,Z_OK:Cn,Z_STREAM_END:sy,Z_NEED_DICT:cy,Z_STREAM_ERROR:ct,Z_DATA_ERROR:af,Z_MEM_ERROR:of,Z_BUF_ERROR:ly,Z_DEFLATED:ol}=Oa,Ua=16180,sl=16181,cl=16182,ll=16183,ul=16184,dl=16185,fl=16186,hl=16187,gl=16188,_l=16189,sa=16190,Dt=16191,po=16192,pl=16193,yo=16194,yl=16195,bl=16196,ml=16197,wl=16198,$i=16199,Vi=16200,El=16201,Al=16202,Tl=16203,Sl=16204,vl=16205,bo=16206,xl=16207,Il=16208,X=16209,sf=16210,cf=16211,uy=852,dy=592,fy=15,hy=fy,kl=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function gy(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Dn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Ua||t.mode>cf?1:0},lf=e=>{if(Dn(e))return ct;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Ua,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(uy),t.distcode=t.distdyn=new Int32Array(dy),t.sane=1,t.back=-1,Cn},uf=e=>{if(Dn(e))return ct;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,lf(e)},df=(e,t)=>{let n;if(Dn(e))return ct;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ct:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,uf(e))},ff=(e,t)=>{if(!e)return ct;const n=new gy;e.state=n,n.strm=e,n.window=null,n.mode=Ua;const r=df(e,t);return r!==Cn&&(e.state=null),r},_y=e=>ff(e,hy);let Cl=!0,mo,wo;const py=e=>{if(Cl){mo=new Int32Array(512),wo=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Yr(nf,e.lens,0,288,mo,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Yr(rf,e.lens,0,32,wo,0,e.work,{bits:5}),Cl=!1}e.lencode=mo,e.lenbits=9,e.distcode=wo,e.distbits=5},hf=(e,t,n,r)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},yy=(e,t)=>{let n,r,i,a,o,s,l,c,u,h,d,f,_,y,g=0,p,A,E,b,C,N,S,k;const x=new Uint8Array(4);let R,B;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Dn(e)||!e.output||!e.input&&e.avail_in!==0)return ct;n=e.state,n.mode===Dt&&(n.mode=po),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,h=s,d=l,k=Cn;e:for(;;)switch(n.mode){case Ua:if(n.wrap===0){n.mode=po;break}for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(n.wrap&2&&c===35615){n.wbits===0&&(n.wbits=15),n.check=0,x[0]=c&255,x[1]=c>>>8&255,n.check=re(n.check,x,2,0),c=0,u=0,n.mode=sl;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=X;break}if((c&15)!==ol){e.msg="unknown compression method",n.mode=X;break}if(c>>>=4,u-=4,S=(c&15)+8,n.wbits===0&&(n.wbits=S),S>15||S>n.wbits){e.msg="invalid window size",n.mode=X;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=c&512?_l:Dt,c=0,u=0;break;case sl:for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(n.flags=c,(n.flags&255)!==ol){e.msg="unknown compression method",n.mode=X;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=X;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&n.wrap&4&&(x[0]=c&255,x[1]=c>>>8&255,n.check=re(n.check,x,2,0)),c=0,u=0,n.mode=cl;case cl:for(;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.head&&(n.head.time=c),n.flags&512&&n.wrap&4&&(x[0]=c&255,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,n.check=re(n.check,x,4,0)),c=0,u=0,n.mode=ll;case ll:for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&n.wrap&4&&(x[0]=c&255,x[1]=c>>>8&255,n.check=re(n.check,x,2,0)),c=0,u=0,n.mode=ul;case ul:if(n.flags&1024){for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&n.wrap&4&&(x[0]=c&255,x[1]=c>>>8&255,n.check=re(n.check,x,2,0)),c=0,u=0}else n.head&&(n.head.extra=null);n.mode=dl;case dl:if(n.flags&1024&&(f=n.length,f>s&&(f=s),f&&(n.head&&(S=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+f),S)),n.flags&512&&n.wrap&4&&(n.check=re(n.check,r,f,a)),s-=f,a+=f,n.length-=f),n.length))break e;n.length=0,n.mode=fl;case fl:if(n.flags&2048){if(s===0)break e;f=0;do S=r[a+f++],n.head&&S&&n.length<65536&&(n.head.name+=String.fromCharCode(S));while(S&&f<s);if(n.flags&512&&n.wrap&4&&(n.check=re(n.check,r,f,a)),s-=f,a+=f,S)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=hl;case hl:if(n.flags&4096){if(s===0)break e;f=0;do S=r[a+f++],n.head&&S&&n.length<65536&&(n.head.comment+=String.fromCharCode(S));while(S&&f<s);if(n.flags&512&&n.wrap&4&&(n.check=re(n.check,r,f,a)),s-=f,a+=f,S)break e}else n.head&&(n.head.comment=null);n.mode=gl;case gl:if(n.flags&512){for(;u<16;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(n.wrap&4&&c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=X;break}c=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Dt;break;case _l:for(;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}e.adler=n.check=kl(c),c=0,u=0,n.mode=sa;case sa:if(n.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=u,cy;e.adler=n.check=1,n.mode=Dt;case Dt:if(t===oy||t===Ui)break e;case po:if(n.last){c>>>=u&7,u-=u&7,n.mode=bo;break}for(;u<3;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}switch(n.last=c&1,c>>>=1,u-=1,c&3){case 0:n.mode=pl;break;case 1:if(py(n),n.mode=$i,t===Ui){c>>>=2,u-=2;break e}break;case 2:n.mode=bl;break;case 3:e.msg="invalid block type",n.mode=X}c>>>=2,u-=2;break;case pl:for(c>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=X;break}if(n.length=c&65535,c=0,u=0,n.mode=yo,t===Ui)break e;case yo:n.mode=yl;case yl:if(f=n.length,f){if(f>s&&(f=s),f>l&&(f=l),f===0)break e;i.set(r.subarray(a,a+f),o),s-=f,a+=f,l-=f,o+=f,n.length-=f;break}n.mode=Dt;break;case bl:for(;u<14;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(n.nlen=(c&31)+257,c>>>=5,u-=5,n.ndist=(c&31)+1,c>>>=5,u-=5,n.ncode=(c&15)+4,c>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=X;break}n.have=0,n.mode=ml;case ml:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.lens[P[n.have++]]=c&7,c>>>=3,u-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},k=Yr(ay,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,k){e.msg="invalid code lengths set",n.mode=X;break}n.have=0,n.mode=wl;case wl:for(;n.have<n.nlen+n.ndist;){for(;g=n.lencode[c&(1<<n.lenbits)-1],p=g>>>24,A=g>>>16&255,E=g&65535,!(p<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(E<16)c>>>=p,u-=p,n.lens[n.have++]=E;else{if(E===16){for(B=p+2;u<B;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(c>>>=p,u-=p,n.have===0){e.msg="invalid bit length repeat",n.mode=X;break}S=n.lens[n.have-1],f=3+(c&3),c>>>=2,u-=2}else if(E===17){for(B=p+3;u<B;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=p,u-=p,S=0,f=3+(c&7),c>>>=3,u-=3}else{for(B=p+7;u<B;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=p,u-=p,S=0,f=11+(c&127),c>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=X;break}for(;f--;)n.lens[n.have++]=S}}if(n.mode===X)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=X;break}if(n.lenbits=9,R={bits:n.lenbits},k=Yr(nf,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,k){e.msg="invalid literal/lengths set",n.mode=X;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},k=Yr(rf,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,k){e.msg="invalid distances set",n.mode=X;break}if(n.mode=$i,t===Ui)break e;case $i:n.mode=Vi;case Vi:if(s>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=u,Qp(e,d),o=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,c=n.hold,u=n.bits,n.mode===Dt&&(n.back=-1);break}for(n.back=0;g=n.lencode[c&(1<<n.lenbits)-1],p=g>>>24,A=g>>>16&255,E=g&65535,!(p<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(A&&(A&240)===0){for(b=p,C=A,N=E;g=n.lencode[N+((c&(1<<b+C)-1)>>b)],p=g>>>24,A=g>>>16&255,E=g&65535,!(b+p<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=p,u-=p,n.back+=p,n.length=E,A===0){n.mode=vl;break}if(A&32){n.back=-1,n.mode=Dt;break}if(A&64){e.msg="invalid literal/length code",n.mode=X;break}n.extra=A&15,n.mode=El;case El:if(n.extra){for(B=n.extra;u<B;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Al;case Al:for(;g=n.distcode[c&(1<<n.distbits)-1],p=g>>>24,A=g>>>16&255,E=g&65535,!(p<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if((A&240)===0){for(b=p,C=A,N=E;g=n.distcode[N+((c&(1<<b+C)-1)>>b)],p=g>>>24,A=g>>>16&255,E=g&65535,!(b+p<=u);){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}c>>>=b,u-=b,n.back+=b}if(c>>>=p,u-=p,n.back+=p,A&64){e.msg="invalid distance code",n.mode=X;break}n.offset=E,n.extra=A&15,n.mode=Tl;case Tl:if(n.extra){for(B=n.extra;u<B;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=X;break}n.mode=Sl;case Sl:if(l===0)break e;if(f=d-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=X;break}f>n.wnext?(f-=n.wnext,_=n.wsize-f):_=n.wnext-f,f>n.length&&(f=n.length),y=n.window}else y=i,_=o-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do i[o++]=y[_++];while(--f);n.length===0&&(n.mode=Vi);break;case vl:if(l===0)break e;i[o++]=n.length,l--,n.mode=Vi;break;case bo:if(n.wrap){for(;u<32;){if(s===0)break e;s--,c|=r[a++]<<u,u+=8}if(d-=l,e.total_out+=d,n.total+=d,n.wrap&4&&d&&(e.adler=n.check=n.flags?re(n.check,i,d,o-d):ei(n.check,i,d,o-d)),d=l,n.wrap&4&&(n.flags?c:kl(c))!==n.check){e.msg="incorrect data check",n.mode=X;break}c=0,u=0}n.mode=xl;case xl:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break e;s--,c+=r[a++]<<u,u+=8}if(n.wrap&4&&c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=X;break}c=0,u=0}n.mode=Il;case Il:k=sy;break e;case X:k=af;break e;case sf:return of;case cf:default:return ct}return e.next_out=o,e.avail_out=l,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=u,(n.wsize||d!==e.avail_out&&n.mode<X&&(n.mode<bo||t!==al))&&hf(e,e.output,e.next_out,d-e.avail_out),h-=e.avail_in,d-=e.avail_out,e.total_in+=h,e.total_out+=d,n.total+=d,n.wrap&4&&d&&(e.adler=n.check=n.flags?re(n.check,i,d,e.next_out-d):ei(n.check,i,d,e.next_out-d)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Dt?128:0)+(n.mode===$i||n.mode===yo?256:0),(h===0&&d===0||t===al)&&k===Cn&&(k=ly),k},by=e=>{if(Dn(e))return ct;let t=e.state;return t.window&&(t.window=null),e.state=null,Cn},my=(e,t)=>{if(Dn(e))return ct;const n=e.state;return(n.wrap&2)===0?ct:(n.head=t,t.done=!1,Cn)},wy=(e,t)=>{const n=t.length;let r,i,a;return Dn(e)||(r=e.state,r.wrap!==0&&r.mode!==sa)?ct:r.mode===sa&&(i=1,i=ei(i,t,n,0),i!==r.check)?af:(a=hf(e,t,n,n),a?(r.mode=sf,of):(r.havedict=1,Cn))};var Ey=uf,Ay=df,Ty=lf,Sy=_y,vy=ff,xy=yy,Iy=by,ky=my,Cy=wy,By="pako inflate (from Nodeca project)",Ut={inflateReset:Ey,inflateReset2:Ay,inflateResetKeep:Ty,inflateInit:Sy,inflateInit2:vy,inflate:xy,inflateEnd:Iy,inflateGetHeader:ky,inflateSetDictionary:Cy,inflateInfo:By};function Ny(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Ry=Ny;const gf=Object.prototype.toString,{Z_NO_FLUSH:Oy,Z_FINISH:Dy,Z_OK:ri,Z_STREAM_END:Eo,Z_NEED_DICT:Ao,Z_STREAM_ERROR:Ly,Z_DATA_ERROR:Bl,Z_MEM_ERROR:Py}=Oa;function $a(e){this.options=La.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ef,this.strm.avail_out=0;let n=Ut.inflateInit2(this.strm,t.windowBits);if(n!==ri)throw new Error(In[n]);if(this.header=new Ry,Ut.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=ni.string2buf(t.dictionary):gf.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ut.inflateSetDictionary(this.strm,t.dictionary),n!==ri)))throw new Error(In[n])}$a.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?Dy:Oy,gf.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=Ut.inflate(n,o),a===Ao&&i&&(a=Ut.inflateSetDictionary(n,i),a===ri?a=Ut.inflate(n,o):a===Bl&&(a=Ao));n.avail_in>0&&a===Eo&&n.state.wrap>0&&e[n.next_in]!==0;)Ut.inflateReset(n),a=Ut.inflate(n,o);switch(a){case Ly:case Bl:case Ao:case Py:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||a===Eo))if(this.options.to==="string"){let l=ni.utf8border(n.output,n.next_out),c=n.next_out-l,u=ni.buf2string(n.output,l);n.next_out=c,n.avail_out=r-c,c&&n.output.set(n.output.subarray(l,l+c),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===ri&&s===0)){if(a===Eo)return a=Ut.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};$a.prototype.onData=function(e){this.chunks.push(e)};$a.prototype.onEnd=function(e){e===ri&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=La.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Uy(e,t){const n=new $a(t);if(n.push(e),n.err)throw n.msg||In[n.err];return n.result}var $y=Uy,Vy={ungzip:$y};const{gzip:My}=Xp,{ungzip:Hy}=Vy;var Fy=My,zy=Hy;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _f=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Nl=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),jy=BigInt(1),Yo=BigInt(2),Rl=(e,t)=>(e+t/Yo)/t;function qy(e){const t=_f,n=BigInt(3),r=BigInt(6),i=BigInt(11),a=BigInt(22),o=BigInt(23),s=BigInt(44),l=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=ze(u,n,t)*u%t,d=ze(h,n,t)*u%t,f=ze(d,Yo,t)*c%t,_=ze(f,i,t)*f%t,y=ze(_,a,t)*_%t,g=ze(y,s,t)*y%t,p=ze(g,l,t)*g%t,A=ze(p,s,t)*y%t,E=ze(A,n,t)*u%t,b=ze(E,o,t)*_%t,C=ze(b,r,t)*c%t,N=ze(C,Yo,t);if(!Zo.eql(Zo.sqr(N),e))throw new Error("Cannot find square root");return N}const Zo=Na(_f,void 0,void 0,{sqrt:qy}),pf=Wg({a:BigInt(0),b:BigInt(7),Fp:Zo,n:Nl,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Nl,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-jy*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=n,o=BigInt("0x100000000000000000000000000000000"),s=Rl(a*e,t),l=Rl(-r*e,t);let c=de(e-s*n-l*i,t),u=de(-s*r-l*a,t);const h=c>o,d=u>o;if(h&&(c=t-c),d&&(u=t-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:c,k2neg:d,k2:u}}}},bi);BigInt(0);pf.ProjectivePoint;const yf=(e,t,n=[])=>{const r=Object.getOwnPropertyDescriptors(t);for(let i of n)delete r[i];Object.defineProperties(e,r)},ii=(e,t=[e])=>{const n=Object.getPrototypeOf(e);return n===null?t:ii(n,[...t,n])},Yy=(...e)=>{if(e.length===0)return;let t;const n=e.map(r=>ii(r));for(;n.every(r=>r.length>0);){const r=n.map(a=>a.pop()),i=r[0];if(r.every(a=>a===i))t=i;else break}return t},Ol=(e,t,n=[])=>{var r;const i=(r=Yy(...e))!==null&&r!==void 0?r:Object.prototype,a=Object.create(i),o=ii(i);for(let s of e){let l=ii(s);for(let c=l.length-1;c>=0;c--){let u=l[c];o.indexOf(u)===-1&&(yf(a,u,["constructor",...n]),o.push(u))}}return a.constructor=t,a},Go=e=>e.filter((t,n)=>e.indexOf(t)==n),bf=new WeakMap,Zy=e=>bf.get(e),Gy=(e,t)=>bf.set(e,t),Dl=(e,t)=>{var n,r;const i=Go([...Object.getOwnPropertyNames(e),...Object.getOwnPropertyNames(t)]),a={};for(let o of i)a[o]=Go([...(n=e==null?void 0:e[o])!==null&&n!==void 0?n:[],...(r=t==null?void 0:t[o])!==null&&r!==void 0?r:[]]);return a},Ll=(e,t)=>{var n,r,i,a;return{property:Dl((n=e==null?void 0:e.property)!==null&&n!==void 0?n:{},(r=t==null?void 0:t.property)!==null&&r!==void 0?r:{}),method:Dl((i=e==null?void 0:e.method)!==null&&i!==void 0?i:{},(a=t==null?void 0:t.method)!==null&&a!==void 0?a:{})}},Ky=(e,t)=>{var n,r,i,a,o,s;return{class:Go([...(n=e==null?void 0:e.class)!==null&&n!==void 0?n:[],...(r=t==null?void 0:t.class)!==null&&r!==void 0?r:[]]),static:Ll((i=e==null?void 0:e.static)!==null&&i!==void 0?i:{},(a=t==null?void 0:t.static)!==null&&a!==void 0?a:{}),instance:Ll((o=e==null?void 0:e.instance)!==null&&o!==void 0?o:{},(s=t==null?void 0:t.instance)!==null&&s!==void 0?s:{})}},Wy=new Map,Xy=(...e)=>{var t;const n=new Set,r=new Set([...e]);for(;r.size>0;)for(let i of r){const a=ii(i.prototype).map(c=>c.constructor),o=(t=Zy(i))!==null&&t!==void 0?t:[],l=[...a,...o].filter(c=>!n.has(c));for(let c of l)r.add(c);n.add(i),r.delete(i)}return[...n]},Jy=(...e)=>{const t=Xy(...e).map(n=>Wy.get(n)).filter(n=>!!n);return t.length==0?{}:t.length==1?t[0]:t.reduce((n,r)=>Ky(n,r))};function Qy(...e){var t,n,r;const i=e.map(s=>s.prototype);function a(...s){for(const l of e)yf(this,new l(...s))}a.prototype=Ol(i,a),Object.setPrototypeOf(a,Ol(e,null,["prototype"]));let o=a;{const s=Jy(...e);for(let l of(t=s==null?void 0:s.class)!==null&&t!==void 0?t:[]){const c=l(o);c&&(o=c)}Pl((n=s==null?void 0:s.static)!==null&&n!==void 0?n:{},o),Pl((r=s==null?void 0:s.instance)!==null&&r!==void 0?r:{},o.prototype)}return Gy(o,e),o}const Pl=(e,t)=>{const n=e.property,r=e.method;if(n)for(let i in n)for(let a of n[i])a(t,i);if(r)for(let i in r)for(let a of r[i])a(t,i,Object.getOwnPropertyDescriptor(t,i))};var mf=Object.defineProperty,eb=Object.getOwnPropertyDescriptor,tb=Object.getOwnPropertyNames,nb=Object.prototype.hasOwnProperty,G=(e,t)=>{for(var n in t)mf(e,n,{get:t[n],enumerable:!0})},rb=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of tb(t))!nb.call(e,i)&&i!==n&&mf(e,i,{get:()=>t[i],enumerable:!(r=eb(t,i))||r.enumerable});return e},wf=(e,t,n)=>(rb(e,t,"default"),n),ib={};G(ib,{ADDR_BOUND:()=>ec,API_VERSION:()=>Df,BaseUrl:()=>mb,DEFAULT_GLOBAL_CONFIG:()=>Pf,HARDENING_4BYTES:()=>bb,HARDENING_BYTE:()=>yb,IS_BROWSER:()=>Af,LegacyUDC:()=>fb,MASK_250:()=>Rf,MASK_31:()=>Of,MAX_STORAGE_ITEM_SIZE:()=>Lf,NetworkName:()=>mr,OutsideExecutionCallerAny:()=>gb,PAYMASTER_RPC_NODES:()=>$f,PRIME:()=>te,RANGE_FELT:()=>ca,RANGE_I128:()=>Wn,RANGE_I16:()=>Or,RANGE_I32:()=>Dr,RANGE_I64:()=>Lr,RANGE_I8:()=>Rr,RANGE_U128:()=>Kn,RANGE_U16:()=>Cr,RANGE_U32:()=>db,RANGE_U64:()=>Br,RANGE_U8:()=>kr,RANGE_U96:()=>Nr,RPC_DEFAULT_NODES:()=>Uf,SNIP9_V1_INTERFACE_ID:()=>_b,SNIP9_V2_INTERFACE_ID:()=>pb,SYSTEM_MESSAGES:()=>ne,StarknetChainId:()=>ke,SupportedRpcVersion:()=>rn,TEXT_TO_FELT_MAX_LEN:()=>Qs,TransactionHashPrefix:()=>cn,UDC:()=>hb,ZERO:()=>xe});var L={};G(L,{JRPC:()=>ab,PAYMASTER_API:()=>Su,RPCSPEC08:()=>ws,RPCSPEC09:()=>gr});var ab={},Ef={};wf(Ef,gr);wf(L,Ef);var ob={};G(ob,{IS_BROWSER:()=>Af,addHexPrefix:()=>D,arrayBufferToString:()=>Tf,atobUniversal:()=>Sf,bigIntToUint8Array:()=>se,btoaUniversal:()=>vf,buf2hex:()=>br,calcByteLength:()=>If,concatenateArrayBuffer:()=>Bf,hexStringToUint8Array:()=>Nf,padLeft:()=>xf,pascalToSnake:()=>cb,removeHexPrefix:()=>_e,sanitizeBytes:()=>kf,sanitizeHex:()=>Cf,stringToUint8Array:()=>Ma,uint8ArrayToBigInt:()=>ai,utf8ToArray:()=>Bn,utf8ToBigInt:()=>ut,utf8ToUint8Array:()=>Va});var Af=typeof window<"u",Js="0";function Tf(e){return new Uint8Array(e).reduce((t,n)=>t+String.fromCharCode(n),"")}function Va(e){return new TextEncoder().encode(e)}var Bn=Va;function ut(e){return ai(Va(e))}function Sf(e){return Gu.decode(e)}function vf(e){return Gu.encode(new Uint8Array(e))}function br(e){return e.reduce((t,n)=>t+n.toString(16).padStart(2,"0"),"")}function _e(e){return e.replace(/^0x/i,"")}function D(e){return`0x${_e(e)}`}function sb(e,t,n,r=Js){const i=t-e.length;let a=e;return i>0&&(a=r.repeat(i)+e),a}function xf(e,t,n=Js){return sb(e,t,!0,n)}function If(e,t=8){const{length:n}=e,r=n%t;return r?(n-r)/t*t+t:n}function kf(e,t=8,n=Js){return xf(e,If(e,t),n)}function Cf(e){const t=_e(e),n=kf(t,2);return n&&D(n)}var cb=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function Bf(e){const t=e.reduce((i,a)=>i+a.byteLength,0),n=new Uint8Array(t);let r=0;return e.forEach(i=>{n.set(i,r),r+=i.byteLength}),n}function Nf(e){const t=e.startsWith("0x")?e.slice(2):e;if(t.length>0&&!/^[0-9a-fA-F]+$/.test(t))throw new Error(`Invalid hex string: "${e}" contains non-hexadecimal characters`);const n=t.length%2!==0?`0${t}`:t,r=new Uint8Array(n.length/2);for(let i=0;i<n.length;i+=2)r[i/2]=parseInt(n.substring(i,i+2),16);return r}function lb(e){return/^0[xX][0-9a-fA-F]*$/.test(e)}function ub(e){return/^[0-9]+$/.test(e)}function Ma(e){if(lb(e))return Nf(e);if(ub(e)){const t=BigInt(e);return se(t)}return Va(e)}function se(e){if(e<0n)throw new Error(`Cannot convert negative bigint ${e} to Uint8Array`);if(e===0n)return new Uint8Array([0]);let t=e.toString(16);t.length%2!==0&&(t=`0${t}`);const n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r/2]=parseInt(t.substring(r,r+2),16);return n}function ai(e){if(!e||e.length===0)return 0n;let t="0x";for(let n=0;n<e.length;n+=1)t+=e[n].toString(16).padStart(2,"0");return BigInt(t)}var Qs=31,xe=0n,Rf=2n**250n-1n,Of=2n**31n-1n,Df=xe,te=2n**251n+17n*2n**192n+1n,Lf=256n,ec=2n**251n-Lf,dt=(e,t)=>({min:e,max:t}),ca=dt(xe,te-1n),kr=dt(xe,2n**8n-1n),Cr=dt(xe,2n**16n-1n),db=dt(xe,2n**32n-1n),Br=dt(xe,2n**64n-1n),Nr=dt(xe,2n**96n-1n),Kn=dt(xe,2n**128n-1n),Rr=dt(-(2n**7n),2n**7n-1n),Or=dt(-(2n**15n),2n**15n-1n),Dr=dt(-(2n**31n),2n**31n-1n),Lr=dt(-(2n**63n),2n**63n-1n),Wn=dt(-(2n**127n),2n**127n-1n),fb={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},hb={ADDRESS:"0x02ceed65a4bd731034c01113685c831b01c15d7d432f71afb1cf1634b53a2125",ENTRYPOINT:"deploy_contract"},gb="0x414e595f43414c4c4552",_b="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",pb="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",yb=128,bb=2147483648n,mb={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},mr={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},ke={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},cn={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},rn={"0.8.1":"0.8.1","0.9.0":"0.9.0",v0_8_1:"0.8.1",v0_9_0:"0.9.0"},Pf={rpcVersion:"0.9.0",transactionVersion:L.ETransactionVersion.V3,logLevel:"INFO",resourceBoundsOverhead:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},defaultTipType:"recommendedTip",fetch:void 0,websocket:void 0,buffer:void 0},Uf={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},$f={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},ne={legacyTxWarningMessage:`You are using a deprecated transaction version (V0,V1,V2)!
Update to the latest V3 transactions!`,legacyTxRPC08Message:"RPC 0.8+ do not support legacy transactions, use RPC 0.8+ v3 transactions!",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8+",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead",declareNonSierra:"Declaring non Sierra (Cairo0)contract using RPC 0.8+",unsupportedMethodForRpcVersion:"Unsupported method for RPC version",txEvictedFromMempool:"Transaction TTL, evicted from the mempool, try to increase the tip",consensusFailed:"Consensus failed to finalize the block proposal",txFailsBlockBuildingValidation:"Transaction fails block building validation"},xt,wb=(xt=class{constructor(){w(this,"config");this.initialize()}initialize(){this.config={...Pf}}static getInstance(){return xt.instance||(xt.instance=new xt),xt.instance}get(t,n){return this.config[t]??n}set(t,n){this.config[t]=n}update(t){this.config={...this.config,...t}}getAll(){return{...this.config}}reset(){this.initialize()}delete(t){delete this.config[t]}hasKey(t){return t in this.config}},w(xt,"instance"),xt),Nt=wb.getInstance(),Mi={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},It,Eb=(It=class{constructor(){w(this,"config");this.config=Nt}static getInstance(){return It.instance||(It.instance=new It),It.instance}getTimestamp(){return new Date().toISOString()}shouldLog(t){const n=this.config.get("logLevel","INFO");return t<=Mi[n]}formatMessage(t){const{level:n,message:r,timestamp:i,data:a}=t;let o=`[${i}] ${n}: ${r}`;if(a)try{o+=`
${JSON.stringify(a,null,2)}`}catch(s){o+=`
[JSON.stringify Error/Circular]: ${s}`}return o}log(t,n,r){if(!this.shouldLog(Mi[t]))return;const i={level:t,message:n,timestamp:this.getTimestamp(),data:r},a=this.formatMessage(i);switch(t){case"DEBUG":console.debug(a);break;case"INFO":console.info(a);break;case"WARN":console.warn(a);break;case"ERROR":case"FATAL":console.error(a);break;case"OFF":break;default:console.log(a);break}}debug(t,n){this.log("DEBUG",t,n)}info(t,n){this.log("INFO",t,n)}warn(t,n){this.log("WARN",t,n)}error(t,n){this.log("ERROR",t,n)}fatal(t,n){this.log("FATAL",t,n)}setLogLevel(t){this.config.set("logLevel",t)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(Mi).filter(t=>this.shouldLog(Mi[t])&&t!=="OFF")}},w(It,"instance"),It),ge=Eb.getInstance(),Pr={};G(Pr,{RpcChannel:()=>_1});var{ETransactionVersion:Re}=gr,{ETransactionVersion3:Ab}=gr,{EDataAvailabilityMode:la}=ws,{EDAMode:Ul}=ws;function qi(e){return"l1_data_gas"in e}var{ETransactionExecutionStatus:ua}=gr,{EBlockTag:Mt}=gr,Hi={DEPLOY:"DEPLOY",INVOKE:"INVOKE"},Ne={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u96:"core::integer::u96",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},Tb={i8:"core::integer::i8",i16:"core::integer::i16",i32:"core::integer::i32",i64:"core::integer::i64",i128:"core::integer::i128"},bn={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},Sb="core::starknet::eth_address::EthAddress",vb="core::zeroable::NonZero::",xb={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},Ib={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},$l={V1:"1",V2:"2"},kb={};G(kb,{parse:()=>Ln,parseAlwaysAsBig:()=>Bb,stringify:()=>lt});var Cb=e=>{if(!Ta(e))return parseFloat(e);const t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},Ln=e=>Wu(String(e),void 0,Cb),Bb=e=>Wu(String(e),void 0,A0),lt=(e,t,n,r)=>Xu(e,t,n,r),Vf=class{constructor(e){w(this,"nodeUrl");w(this,"headers");w(this,"interval");w(this,"requestId",0);w(this,"pendingRequests",{});w(this,"batchPromises",{});w(this,"delayTimer");w(this,"delayPromise");w(this,"delayPromiseResolve");w(this,"baseFetch");w(this,"rpcMethods");this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch,this.rpcMethods=e.rpcMethods}async wait(){return(!this.delayPromise||!this.delayPromiseResolve)&&(this.delayPromise=new Promise(e=>{this.delayPromiseResolve=e})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(e,t,n){const r={id:n??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:e.description||String(e),params:t??void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:lt(e),headers:this.headers})).json()}async fetch(e,t,n){const r=this.addPendingRequest(e,t,n);await this.wait();const i=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){const s=this.sendBatch(Object.values(i));Object.keys(i).forEach(l=>{this.batchPromises[l]=s})}const a=await this.batchPromises[r];delete this.batchPromises[r];const o=a.find(s=>s.id===r);if(!o)throw new Error(`Couldn't find the result for the request. Method: ${String(e)}`);return o}};function m(e,t){if(!e)throw new Error(t||"Assertion failure")}var Nb={};G(Nb,{addPercent:()=>Le,assertInRange:()=>nc,bigNumberishArrayToDecimalStringArray:()=>Ff,bigNumberishArrayToHexadecimalStringArray:()=>cr,cleanHex:()=>Pb,getDecimalString:()=>Ub,getHexString:()=>zf,getHexStringArray:()=>rc,getNext:()=>z,hexToBytes:()=>Ha,hexToDecimalString:()=>Hf,isBigNumberish:()=>Nn,isHex:()=>Fe,isHexString:()=>Ob,isStringWholeNumber:()=>Pn,stringToSha256ToArrayBuff4:()=>Vb,toBigInt:()=>He,toCairoBool:()=>$b,toHex:()=>v,toHex64:()=>Lb,toHexString:()=>Mf,toStorageKey:()=>tc,tryToBigInt:()=>Db});var pe=e=>typeof e>"u"||e===void 0;function W(e){return typeof e=="number"}function oi(e){return typeof e=="boolean"}function Ie(e){return typeof e=="bigint"}function $(e){return typeof e=="string"}function Yi(e){return typeof Buffer<"u"&&e instanceof Buffer}function K(e){return!!e&&typeof e=="object"&&!Array.isArray(e)}function Rb(e){return Number.isInteger(e)}function Fe(e){return/^0[xX][0-9a-fA-F]*$/.test(e)}var Ob=Fe;function He(e){return BigInt(e)}function Db(e){return e?BigInt(e):void 0}function v(e){return D(He(e).toString(16))}var Mf=v;function tc(e){return D(He(e).toString(16).padStart(64,"0"))}function Lb(e){const t=D(He(e).toString(16).padStart(64,"0"));if(t.length!==66)throw TypeError("number is too big for hex 0x(64) representation");return t}function Hf(e){return BigInt(D(e)).toString(10)}function Pb(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function nc(e,t,n,r=""){const i=r===""?"invalid length":`invalid ${r} length`,a=BigInt(e),o=BigInt(t),s=BigInt(n);m(a>=o&&a<=s,`Message not signable, ${i}.`)}function Ff(e){return e.map(t=>He(t).toString(10))}function cr(e){return e.map(t=>v(t))}function Pn(e){return/^\d+$/.test(e)}function Ub(e){if(Fe(e))return Hf(e);if(Pn(e))return e;throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function zf(e){if(Fe(e))return e;if(Pn(e))return Mf(e);throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function rc(e){return e.map(zf)}function $b(e){return(+e).toString()}function Ha(e){if(!Fe(e))throw new Error(`${e} needs to be a hex-string`);let t=_e(e);return t.length%2!==0&&(t=`0${t}`),Ft(t)}function Le(e,t){const n=BigInt(e);return n+n*BigInt(t)/100n}function Vb(e){const n=(r=>Number(r&Of))(BigInt(D(br(bi(e)))));return Ha(v(n))}function Nn(e){return W(e)||Ie(e)||$(e)&&(Fe(e)||Pn(e))}function z(e){const t=e.next();if(t.done)throw new Error("Unexpected end of response");return t.value}var Mb={};G(Mb,{getL1MessageHash:()=>qf,getL2MessageHash:()=>jf,getSelector:()=>Ti,getSelectorFromName:()=>J,keccakBn:()=>ic,solidityUint256PackedKeccak256:()=>Si,starknetKeccak:()=>ac});function ic(e){const t=_e(v(BigInt(e))),n=t.length%2===0?t:`0${t}`;return D(on(Ha(D(n))).toString(16))}function Hb(e){return D(on(Bn(e)).toString(16))}function ac(e){return BigInt(Hb(e))&Rf}function J(e){return v(ac(e))}function Ti(e){return W(e)||Ie(e)?v(e):Fe(e)?e:Pn(e)?v(e):J(e)}function Si(e){const t=D(e.reduce((n,r)=>n+_e(v(r)).padStart(64,"0"),""));return D(Ht(od(Ha(t))))}function jf(e,t,n,r,i){return Si([e,t,i,n,r.length,...r])}function qf(e,t,n){return Si([e,t,n.length,...n])}var Fb={};G(Fb,{decodeShortString:()=>lr,encodeShortString:()=>ae,isASCII:()=>oc,isDecimalString:()=>sc,isLongText:()=>cc,isShortString:()=>vi,isShortText:()=>zb,isText:()=>be,splitLongString:()=>lc});function oc(e){return/^[\x00-\x7F]*$/.test(e)}function vi(e){return e.length<=Qs}function sc(e){return/^[0-9]*$/i.test(e)}function be(e){return $(e)&&!Fe(e)&&!Pn(e)}var zb=e=>be(e)&&vi(e),cc=e=>be(e)&&!vi(e);function lc(e){const t=RegExp(`[^]{1,${Qs}}`,"g");return e.match(t)||[]}function ae(e){if(!oc(e))throw new Error(`${e} is not an ASCII string`);if(!vi(e))throw new Error(`${e} is too long`);return D(e.replace(/./g,t=>t.charCodeAt(0).toString(16)))}function lr(e){if(!oc(e))throw new Error(`${e} is not an ASCII string`);if(Fe(e))return _e(e).replace(/.{2}/g,t=>String.fromCharCode(parseInt(t,16)));if(sc(e))return lr("0X".concat(BigInt(e).toString(16)));throw new Error(`${e} is not Hex or decimal`)}var jb={};G(jb,{byteArrayFromString:()=>uc,stringFromByteArray:()=>qb});function qb(e){const t=BigInt(e.pending_word)===0n?"":lr(v(e.pending_word));return e.data.reduce((n,r)=>{const i=BigInt(r)===0n?"":lr(v(r));return n+i},"")+t}function uc(e){const t=lc(e),n=t[t.length-1],r=t.map(ae),[i,a]=n===void 0||n.length===31?["0x00",0]:[r.pop(),n.length];return{data:r.length===0?[]:r,pending_word:i,pending_word_len:a}}var Yb={};G(Yb,{felt:()=>fe,getAbiContractVersion:()=>hc,getArrayType:()=>Bt,isCairo1Abi:()=>fc,isCairo1Type:()=>sn,isLen:()=>Rn,isTypeArray:()=>zt,isTypeBool:()=>ja,isTypeContractAddress:()=>im,isTypeEnum:()=>Un,isTypeEthAddress:()=>$n,isTypeFelt:()=>ur,isTypeInt:()=>nm,isTypeLiteral:()=>dc,isTypeNamedTuple:()=>Yf,isTypeNonZero:()=>Vn,isTypeOption:()=>Fa,isTypeResult:()=>za,isTypeSecp256k1Point:()=>qa,isTypeStruct:()=>xi,isTypeTuple:()=>ln,isTypeU96:()=>Zf,isTypeUint:()=>si,isTypeUint256:()=>rm,tuple:()=>dr,uint256:()=>Ko,uint512:()=>am});function Ce(e){return Object.defineProperty(e,"__compiled__",{enumerable:!1,writable:!1,value:!0}),e}function mn(e){if(Ie(e)||Number.isInteger(e))return e.toString();if($(e)){if(Fe(e))return BigInt(e).toString();if(be(e)){if(!vi(e))throw new Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(ae(e)).toString()}if(Pn(e))return e}if(oi(e))return`${+e}`;throw new Error(`${e} can't be computed by felt()`)}var Ye,Wt=(Ye=class{constructor(t){w(this,"data");Ye.validate(t),this.data=Ye.__processData(t)}static __processData(t){if($(t))return Ma(t);if(Ie(t))return se(t);if(Number.isInteger(t))return se(BigInt(t));if(oi(t))return se(BigInt(t?1:0));throw new Error(`${t} can't be computed by felt()`)}toBigInt(){return ai(this.data)}decodeUtf8(){return new TextDecoder().decode(this.data)}toHexString(){return D(this.toBigInt().toString(16))}toApiRequest(){return Ce([this.toHexString()])}static validate(t){m(t!==null,"null value is not allowed for felt252"),m(t!==void 0,"undefined value is not allowed for felt252"),m($(t)||W(t)||Ie(t)||oi(t),`Unsupported data type '${typeof t}' for felt252. Expected string, number, bigint, or boolean`);const n=Ye.__processData(t),r=ai(n);m(r>=0n&&r<te,`Value ${n} is out of felt252 range [0, ${te})`)}static is(t){try{return Ye.validate(t),!0}catch{return!1}}static isAbiType(t){return t===Ye.abiSelector}static factoryFromApiResponse(t){return new Ye(z(t))}},w(Ye,"abiSelector","core::felt252"),Ye),Ur=(1n<<128n)-1n,Zb=(1n<<256n)-1n,Gb=0n,Kb=340282366920938463463374607431768211455n,Wb=340282366920938463463374607431768211455n,Xb=0n,Jb=0n,Ze,he=(Ze=class{constructor(...t){w(this,"low");w(this,"high");if(K(t[0])&&t.length===1&&"low"in t[0]&&"high"in t[0]){const n=Ze.validateProps(t[0].low,t[0].high);this.low=n.low,this.high=n.high}else if(t.length===1){const n=Ze.validate(t[0]);this.low=n&Ur,this.high=n>>128n}else if(t.length===2){const n=Ze.validateProps(t[0],t[1]);this.low=n.low,this.high=n.high}else throw Error("Incorrect constructor parameters")}static validate(t){m(t!==null,"null value is not allowed for u256"),m(t!==void 0,"undefined value is not allowed for u256"),m(Nn(t)||K(t),`Unsupported data type '${typeof t}' for u256. Expected string, number, bigint, or Uint256 object`);const n=BigInt(t);return m(n>=Gb,"bigNumberish is smaller than UINT_256_MIN"),m(n<=Zb,"bigNumberish is bigger than UINT_256_MAX"),n}static validateProps(t,n){const r=BigInt(t),i=BigInt(n);return m(r>=Xb&&r<=Kb,"low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX"),m(i>=Jb&&i<=Wb,"high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX"),{low:r,high:i}}static is(t){try{Ze.validate(t)}catch{return!1}return!0}static isAbiType(t){return t===Ze.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=z(t);return new Ze(n,r)}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:D(this.low.toString(16)),high:D(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[mn(this.low),mn(this.high)]}},w(Ze,"abiSelector","core::integer::u256"),Ze),Qb=(1n<<512n)-1n,em=0n,tm=0n,Ge,Me=(Ge=class{constructor(...t){w(this,"limb0");w(this,"limb1");w(this,"limb2");w(this,"limb3");if(K(t[0])&&t.length===1&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){const n=Ge.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(t.length===1){const n=Ge.validate(t[0]);this.limb0=n&Ur,this.limb1=(n&Ur<<128n)>>128n,this.limb2=(n&Ur<<256n)>>256n,this.limb3=n>>384n}else if(t.length===4){const n=Ge.validateProps(t[0],t[1],t[2],t[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(t){m(t!==null,"null value is not allowed for u512"),m(t!==void 0,"undefined value is not allowed for u512"),m(Nn(t)||K(t),`Unsupported data type '${typeof t}' for u512. Expected string, number, bigint, or Uint512 object`);const n=BigInt(t);return m(n>=em,"bigNumberish is smaller than UINT_512_MIN."),m(n<=Qb,"bigNumberish is bigger than UINT_512_MAX."),n}static validateProps(t,n,r,i){const a=BigInt(t),o=BigInt(n),s=BigInt(r),l=BigInt(i);return[a,o,s,l].forEach((c,u)=>{m(c>=tm&&c<=Ur,`limb${u} is not in the range of a u128 number`)}),{limb0:a,limb1:o,limb2:s,limb3:l}}static is(t){try{Ge.validate(t)}catch{return!1}return!0}static isAbiType(t){return t===Ge.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=z(t),i=z(t),a=z(t);return new Ge(n,r,i,a)}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:D(this.limb0.toString(16)),limb1:D(this.limb1.toString(16)),limb2:D(this.limb2.toString(16)),limb3:D(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[mn(this.limb0),mn(this.limb1),mn(this.limb2),mn(this.limb3)]}},w(Ge,"abiSelector","core::integer::u512"),Ge),Rn=e=>/_len$/.test(e),ur=e=>e==="felt"||e==="core::felt252",zt=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),ln=e=>/^\(.*\)$/i.test(e),Yf=e=>/\(.*\)/i.test(e)&&e.includes(":"),xi=(e,t)=>e in t,Un=(e,t)=>e in t,Fa=e=>e.startsWith("core::option::Option::"),za=e=>e.startsWith("core::result::Result::"),si=e=>Object.values(Ne).includes(e),nm=e=>Object.values(Tb).includes(e),rm=e=>he.isAbiType(e),dc=e=>Object.values(bn).includes(e),ja=e=>e==="core::bool",im=e=>e===bn.ContractAddress,$n=e=>e===Sb,Zf=e=>e==="core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>",qa=e=>e===bn.Secp256k1Point,sn=e=>e.includes("::"),Bt=e=>sn(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function fc(e){const{cairo:t}=hc(e);if(t===void 0)throw Error("Unable to determine Cairo version");return t==="1"}function Vn(e){return e.startsWith(vb)}function hc(e){if(e.find(r=>r.type==="interface"))return{cairo:"1",compiler:"2"};const t=e.find(r=>(r.type==="function"||r.type==="constructor")&&(r.inputs.length||r.outputs.length));if(!t)return{cairo:void 0,compiler:void 0};const n=t.inputs.length?t.inputs:t.outputs;return sn(n[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var Ko=e=>new he(e).toUint256DecimalString(),am=e=>new Me(e).toUint512DecimalString(),dr=(...e)=>({...e});function fe(e){return mn(e)}var Ii=class{constructor(e){w(this,"variant");const t=Object.values(e);if(t.length===0)throw new Error("This Enum must have at least 1 variant");if(t.filter(r=>!pe(r)).length!==1)throw new Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){return Object.values(this.variant).find(t=>!pe(t))}activeVariant(){const t=Object.entries(this.variant).find(n=>!pe(n[1]));return pe(t)?"":t[0]}},pt={Some:0,None:1},Wo=class{constructor(e,t){w(this,"Some");w(this,"None");if(!(e in Object.values(pt)))throw new Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===pt.Some){if(pe(t))throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!pe(this.Some)}isNone(){return this.None===!0}},Pe={Ok:0,Err:1},Xo=class{constructor(e,t){w(this,"Ok");w(this,"Err");if(!(e in Object.values(Pe)))throw new Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===Pe.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(!pe(this.Ok))return this.Ok;if(!pe(this.Err))return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!pe(this.Ok)}isErr(){return!pe(this.Err)}},To={isBN:(e,t,n)=>{if(!Ie(e[n]))throw new Error(`Data and formatter mismatch on ${n}:${t[n]}, expected response data ${n}:${e[n]} to be BN instead it is ${typeof e[n]}`)},unknown:(e,t,n)=>{throw new Error(`Unhandled formatter type on ${n}:${t[n]} for data ${n}:${e[n]}`)}};function Zi(e,t,n){return Object.entries(e).reduce((r,[i,a])=>{const o=n??t[i];if(!(i in t)&&!n)return r[i]=a,r;if(o==="string"){if(Array.isArray(e[i])){const s=Zi(e[i],e[i].map(l=>o));return r[i]=Object.values(s).join(""),r}return To.isBN(e,t,i),r[i]=lr(a),r}if(o==="number")return To.isBN(e,t,i),r[i]=Number(a),r;if(typeof o=="function")return r[i]=o(a),r;if(Array.isArray(o)){const s=Zi(e[i],o,o[0]);return r[i]=Object.values(s),r}return K(o)?(r[i]=Zi(e[i],o),r):(To.unknown(e,t,i),r)},{})}var $e,yt=($e=class{constructor(t){w(this,"data");$e.validate(t),this.data=$e.__processData(t)}static __processData(t){if($(t))return Ma(t);if(Yi(t))return new Uint8Array(t);if(t instanceof Uint8Array)return new Uint8Array(t);throw new Error("Invalid input type for CairoBytes31. Expected string, Buffer, or Uint8Array")}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return ai(this.data)}decodeUtf8(){return new TextDecoder().decode(this.data)}toHexString(){const t=this.data.length===0?"0":br(this.data);return D(t)}static validate(t){const n=$e.__processData(t).length;m(n<=this.MAX_BYTE_SIZE,`Data is too long: ${n} bytes (max ${this.MAX_BYTE_SIZE} bytes)`)}static is(t){try{return $e.validate(t),!0}catch{return!1}}static isAbiType(t){return t===$e.abiSelector}static factoryFromApiResponse(t){return new $e(z(t))}},w($e,"MAX_BYTE_SIZE",31),w($e,"abiSelector","core::bytes_31::bytes31"),$e),om={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},sm=om;function cm(e,t=e.constructor){const{captureStackTrace:n}=Error;n&&n(e,t)}function lm(e,t){const{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}var um=class extends Error{constructor(t){super(t);w(this,"name");Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),lm(this,new.target.prototype),cm(this)}},ye=class extends um{},ci=class extends ye{constructor(t,n,r){super(`RPC: ${n} with params ${lt(r,null,2)}

      ${t.code}: ${t.message}: ${lt(t.data)}`);w(this,"request");this.baseError=t,this.request={method:n,params:r}}get code(){return this.baseError.code}isType(t){return sm[t]===this.code}},dm=Nt.get("buffer")||typeof Buffer<"u"&&Buffer||typeof globalThis<"u"&&globalThis.Buffer||typeof window<"u"&&window.Buffer||typeof global<"u"&&global.Buffer||class{constructor(){throw new ye(`Buffer not detected, use 'config.set("buffer", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support`)}static from(e){throw new ye(`Buffer not detected, use 'config.set("buffer", YourBufferPolyfill)' or polyfill or Node.js environment for Buffer support`)}static isBuffer(e){const t=Nt.get("buffer")||typeof Buffer<"u"&&Buffer;return t&&t.isBuffer&&t.isBuffer(e)}},Ke,Fi=(Ke=class{constructor(t){w(this,"data");Ke.validate(t),this.data=Ke.__processData(t)}static __processData(t){return $(t)&&be(t)?ut(t):BigInt(t)}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(se(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!K(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=Ke.__processData(t);m(n>=0n&&n<=2n**32n-1n,"Value is out of u32 range [0, 2^32)")}static is(t){try{return Ke.validate(t),!0}catch{return!1}}static isAbiType(t){return t===Ke.abiSelector}static factoryFromApiResponse(t){return new Ke(z(t))}},w(Ke,"abiSelector","core::u32::u32"),Ke),_t,Vt=(_t=class{constructor(...t){w(this,"data",[]);w(this,"pending_word");w(this,"pending_word_len");if(t.length===3){const[o,s,l]=t;m(Array.isArray(o)&&s instanceof Wt&&l instanceof Fi,"Invalid constructor parameters. Expected (CairoBytes31[], CairoFelt252, CairoUint32)"),this.data=o,this.pending_word=s,this.pending_word_len=l;return}const n=t[0];_t.validate(n);const{data:r,pending_word:i,pending_word_len:a}=_t.__processData(n);this.data=r,this.pending_word=i,this.pending_word_len=a}static __processData(t){let n;if(t instanceof Uint8Array)n=t;else if(Yi(t))n=new Uint8Array(t);else if($(t))n=Ma(t);else if(Ie(t))n=se(t);else if(Rb(t))n=se(BigInt(t));else throw new Error("Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint");const r=yt.MAX_BYTE_SIZE,i=Math.floor(n.length/r),a=n.length%r,o=[];let s,l;for(let c=0;c<i;c+=1){const u=c*r,h=u+r,d=n.slice(u,h);o.push(new yt(d))}if(a>0){const c=n.slice(i*r);let u="0x";for(let h=0;h<c.length;h+=1)u+=c[h].toString(16).padStart(2,"0");s=new Wt(u),l=new Fi(a)}else s=new Wt(0),l=new Fi(0);return{data:o,pending_word:s,pending_word_len:l}}toApiRequest(){return this.assertInitialized(),Ce([D(this.data.length.toString(16)),...this.data.flatMap(t=>t.toApiRequest()),...this.pending_word.toApiRequest(),...this.pending_word_len.toApiRequest()])}decodeUtf8(){const t=this.reconstructBytes();return new TextDecoder().decode(t)}toBigInt(){const t=this.reconstructBytes();if(t.length===0)return 0n;let n=0n;return t.forEach(r=>{n=n*256n+BigInt(r)}),n}toHexString(){const t=this.reconstructBytes(),n=t.length===0?"0":br(t);return D(n)}toBuffer(){this.assertInitialized();const t=this.reconstructBytes();return dm.from(t)}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!Array.isArray(t)||t instanceof Uint8Array,"Invalid input: arrays are not supported, use Uint8Array"),m(typeof t!="object"||Yi(t)||t instanceof Uint8Array,"Invalid input for CairoByteArray: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input for CairoByteArray: decimal numbers are not supported, only integers"),m(!W(t)||t>=0,"Invalid input for CairoByteArray: negative numbers are not supported"),m(!Ie(t)||t>=0n,"Invalid input for CairoByteArray: negative bigints are not supported"),m(t instanceof Uint8Array||Yi(t)||$(t)||W(t)||Ie(t),"Invalid input type. Expected Uint8Array, Buffer, string, number, or bigint")}static is(t){try{return _t.validate(t),!0}catch{return!1}}static isAbiType(t){return t===_t.abiSelector}assertInitialized(){m(this.data&&this.pending_word!==void 0&&this.pending_word_len!==void 0,"CairoByteArray is not properly initialized")}reconstructBytes(){this.assertInitialized();const t=this.data.flatMap(r=>r.data),n=Number(this.pending_word_len.toBigInt());if(n){const r=new Uint8Array(n),i=n-this.pending_word.data.length;r.set(this.pending_word.data,i),t.push(r)}return Bf(t)}static factoryFromApiResponse(t){const n=Array.from({length:Number(z(t))},()=>yt.factoryFromApiResponse(t)),r=Wt.factoryFromApiResponse(t),i=Fi.factoryFromApiResponse(t);return new _t(n,r,i)}},w(_t,"abiSelector","core::byte_array::ByteArray"),_t),We,da=(We=class{constructor(t){w(this,"data");We.validate(t),this.data=We.__processData(t)}static __processData(t){return $(t)&&be(t)?ut(t):BigInt(t)}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(se(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!K(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=We.__processData(t);m(n>=kr.min&&n<=kr.max,`Value is out of u8 range [${kr.min}, ${kr.max}]`)}static is(t){try{return We.validate(t),!0}catch{return!1}}static isAbiType(t){return t===We.abiSelector}static factoryFromApiResponse(t){return new We(z(t))}},w(We,"abiSelector","core::integer::u8"),We),Xe,fa=(Xe=class{constructor(t){w(this,"data");Xe.validate(t),this.data=Xe.__processData(t)}static __processData(t){return $(t)&&be(t)?ut(t):BigInt(t)}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(se(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!K(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=Xe.__processData(t);m(n>=Cr.min&&n<=Cr.max,`Value is out of u16 range [${Cr.min}, ${Cr.max}]`)}static is(t){try{return Xe.validate(t),!0}catch{return!1}}static isAbiType(t){return t===Xe.abiSelector}static factoryFromApiResponse(t){return new Xe(z(t))}},w(Xe,"abiSelector","core::integer::u16"),Xe),Je,ha=(Je=class{constructor(t){w(this,"data");Je.validate(t),this.data=Je.__processData(t)}static __processData(t){return $(t)&&be(t)?ut(t):BigInt(t)}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(se(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!K(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=Je.__processData(t);m(n>=Br.min&&n<=Br.max,`Value is out of u64 range [${Br.min}, ${Br.max}]`)}static is(t){try{return Je.validate(t),!0}catch{return!1}}static isAbiType(t){return t===Je.abiSelector}static factoryFromApiResponse(t){return new Je(z(t))}},w(Je,"abiSelector","core::integer::u64"),Je),Qe,ga=(Qe=class{constructor(t){w(this,"data");Qe.validate(t),this.data=Qe.__processData(t)}static __processData(t){return $(t)&&be(t)?ut(t):BigInt(t)}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(se(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!K(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=Qe.__processData(t);m(n>=Nr.min&&n<=Nr.max,`Value is out of u96 range [${Nr.min}, ${Nr.max}]`)}static is(t){try{return Qe.validate(t),!0}catch{return!1}}static isAbiType(t){return t===Qe.abiSelector}static factoryFromApiResponse(t){return new Qe(z(t))}},w(Qe,"abiSelector","core::integer::u96"),Qe),et,_a=(et=class{constructor(t){w(this,"data");et.validate(t),this.data=et.__processData(t)}static __processData(t){return $(t)&&be(t)?ut(t):BigInt(t)}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(se(this.data))}toHexString(){return D(this.toBigInt().toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!K(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=et.__processData(t);m(n>=Kn.min&&n<=Kn.max,`Value is out of u128 range [${Kn.min}, ${Kn.max}]`)}static is(t){try{return et.validate(t),!0}catch{return!1}}static isAbiType(t){return t===et.abiSelector}static factoryFromApiResponse(t){return new et(z(t))}},w(et,"abiSelector","core::integer::u128"),et),tt,En=(tt=class{constructor(t){w(this,"data");tt.validate(t),this.data=tt.__processData(t)}static __processData(t){return $(t)&&be(t)?ut(t):BigInt(t)}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(se(this.data>=0n?this.data:256n+this.data))}toHexString(){const t=this.toBigInt();if(t<0n){const n=te+t;return D(n.toString(16))}return D(t.toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!K(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=tt.__processData(t);m(n>=Rr.min&&n<=Rr.max,`Value is out of i8 range [${Rr.min}, ${Rr.max}]`)}static is(t){try{return tt.validate(t),!0}catch{return!1}}static isAbiType(t){return t===tt.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=BigInt(n),i=r>te/2n?r-te:r;return new tt(i)}},w(tt,"abiSelector","core::integer::i8"),tt),nt,An=(nt=class{constructor(t){w(this,"data");nt.validate(t),this.data=nt.__processData(t)}static __processData(t){return $(t)&&be(t)?ut(t):BigInt(t)}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(se(this.data>=0n?this.data:65536n+this.data))}toHexString(){const t=this.toBigInt();if(t<0n){const n=te+t;return D(n.toString(16))}return D(t.toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!K(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=nt.__processData(t);m(n>=Or.min&&n<=Or.max,`Value is out of i16 range [${Or.min}, ${Or.max}]`)}static is(t){try{return nt.validate(t),!0}catch{return!1}}static isAbiType(t){return t===nt.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=BigInt(n),i=r>te/2n?r-te:r;return new nt(i)}},w(nt,"abiSelector","core::integer::i16"),nt),rt,Tn=(rt=class{constructor(t){w(this,"data");rt.validate(t),this.data=rt.__processData(t)}static __processData(t){return $(t)&&be(t)?ut(t):BigInt(t)}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(se(this.data>=0n?this.data:4294967296n+this.data))}toHexString(){const t=this.toBigInt();if(t<0n){const n=te+t;return D(n.toString(16))}return D(t.toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!K(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=rt.__processData(t);m(n>=Dr.min&&n<=Dr.max,`Value is out of i32 range [${Dr.min}, ${Dr.max}]`)}static is(t){try{return rt.validate(t),!0}catch{return!1}}static isAbiType(t){return t===rt.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=BigInt(n),i=r>te/2n?r-te:r;return new rt(i)}},w(rt,"abiSelector","core::integer::i32"),rt),it,Sn=(it=class{constructor(t){w(this,"data");it.validate(t),this.data=it.__processData(t)}static __processData(t){return $(t)&&be(t)?ut(t):BigInt(t)}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(se(this.data>=0n?this.data:2n**64n+this.data))}toHexString(){const t=this.toBigInt();if(t<0n){const n=te+t;return D(n.toString(16))}return D(t.toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!K(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=it.__processData(t);m(n>=Lr.min&&n<=Lr.max,`Value is out of i64 range [${Lr.min}, ${Lr.max}]`)}static is(t){try{return it.validate(t),!0}catch{return!1}}static isAbiType(t){return t===it.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=BigInt(n),i=r>te/2n?r-te:r;return new it(i)}},w(it,"abiSelector","core::integer::i64"),it),at,vn=(at=class{constructor(t){w(this,"data");at.validate(t),this.data=at.__processData(t)}static __processData(t){return $(t)&&be(t)?ut(t):BigInt(t)}toApiRequest(){return Ce([this.toHexString()])}toBigInt(){return this.data}decodeUtf8(){return new TextDecoder().decode(se(this.data>=0n?this.data:2n**128n+this.data))}toHexString(){const t=this.toBigInt();if(t<0n){const n=te+t;return D(n.toString(16))}return D(t.toString(16))}static validate(t){m(t!=null,"Invalid input: null or undefined"),m(!K(t)&&!Array.isArray(t),"Invalid input: objects are not supported"),m(!W(t)||Number.isInteger(t),"Invalid input: decimal numbers are not supported, only integers");const n=at.__processData(t);m(n>=Wn.min&&n<=Wn.max,`Value is out of i128 range [${Wn.min}, ${Wn.max}]`)}static is(t){try{return at.validate(t),!0}catch{return!1}}static isAbiType(t){return t===at.abiSelector}static factoryFromApiResponse(t){const n=z(t),r=BigInt(n),i=r>te/2n?r-te:r;return new at(i)}},w(at,"abiSelector","core::integer::i128"),at),Gf={request:{[yt.abiSelector]:e=>new yt(e).toApiRequest(),[Vt.abiSelector]:e=>new Vt(e).toApiRequest(),[Wt.abiSelector]:e=>fe(e),[he.abiSelector]:e=>new he(e).toApiRequest(),[Me.abiSelector]:e=>new Me(e).toApiRequest(),[da.abiSelector]:e=>fe(e),[fa.abiSelector]:e=>fe(e),[ha.abiSelector]:e=>fe(e),[ga.abiSelector]:e=>fe(e),[_a.abiSelector]:e=>fe(e),[En.abiSelector]:e=>new En(e).toApiRequest(),[An.abiSelector]:e=>new An(e).toApiRequest(),[Tn.abiSelector]:e=>new Tn(e).toApiRequest(),[Sn.abiSelector]:e=>new Sn(e).toApiRequest(),[vn.abiSelector]:e=>new vn(e).toApiRequest()},response:{[yt.abiSelector]:e=>yt.factoryFromApiResponse(e).decodeUtf8(),[Vt.abiSelector]:e=>Vt.factoryFromApiResponse(e).decodeUtf8(),[Wt.abiSelector]:e=>BigInt(z(e)),[he.abiSelector]:e=>he.factoryFromApiResponse(e).toBigInt(),[Me.abiSelector]:e=>Me.factoryFromApiResponse(e).toBigInt(),[da.abiSelector]:e=>BigInt(z(e)),[fa.abiSelector]:e=>BigInt(z(e)),[ha.abiSelector]:e=>BigInt(z(e)),[ga.abiSelector]:e=>BigInt(z(e)),[_a.abiSelector]:e=>BigInt(z(e)),[En.abiSelector]:e=>BigInt(z(e)),[An.abiSelector]:e=>BigInt(z(e)),[Tn.abiSelector]:e=>BigInt(z(e)),[Sn.abiSelector]:e=>BigInt(z(e)),[vn.abiSelector]:e=>BigInt(z(e))}},fm=class{constructor(e,t){w(this,"abi");w(this,"parsingStrategy");this.abi=e,this.parsingStrategy=t||Gf}getRequestParser(e){if(this.parsingStrategy.request[e])return this.parsingStrategy.request[e];throw new Error(`Parser for ${e} not found`)}getResponseParser(e){if(this.parsingStrategy.response[e])return this.parsingStrategy.response[e];throw new Error(`Parser for ${e} not found`)}methodInputsLength(e){return e.inputs.reduce((t,n)=>Rn(n.name)?t:t+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},hm=class{constructor(e,t){w(this,"abi");w(this,"parsingStrategy");this.abi=e,this.parsingStrategy=t||Gf}getRequestParser(e){if(this.parsingStrategy.request[e])return this.parsingStrategy.request[e];throw new Error(`Parser for ${e} not found`)}getResponseParser(e){if(this.parsingStrategy.response[e])return this.parsingStrategy.response[e];throw new Error(`Parser for ${e} not found`)}methodInputsLength(e){return e.inputs.length}getMethod(e){var n;const t=this.abi.find(r=>r.type==="interface");return(n=t==null?void 0:t.items)==null?void 0:n.find(r=>r.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>e.type==="interface"?e.items:e)}};function gm(e,t){const n=_m(e);if(n===0||n===1)return new fm(e,t);if(n===2)return new hm(e,t);throw Error(`Unsupported ABI version ${n}`)}function _m(e){return e.find(t=>t.type==="interface")?2:fc(e)?1:0}function Vl(e,t,n){return e==="constructor"&&!n&&!t.length}function pm(e){const t=e.substring(0,e.indexOf(":")),n=e.substring(t.length+1);return{name:t,type:n}}function ym(e){if(!e.includes("("))return{subTuple:[],result:e};const t=[];let n="",r=0;for(;r<e.length;){if(e[r]==="("){let i=1;const a=r;for(r++;i;)e[r]===")"&&i--,e[r]==="("&&i++,r++;t.push(e.substring(a,r)),n+=" ",r--}else n+=e[r];r++}return{subTuple:t,result:n}}function bm(e){const t=e.replace(/\s/g,"").slice(1,-1),{subTuple:n,result:r}=ym(t);let i=r.split(",").map(a=>n.length?a.replace(" ",n.shift()):a);return Yf(e)&&(i=i.reduce((a,o)=>a.concat(pm(o)),[])),i}function Ml(e,t,n){for(let r=0,i=0;r<e.length;r++)if(e[r]===t)i++;else if(e[r]===n&&--i===0)return r;return Number.POSITIVE_INFINITY}function mm(e){const t=e.slice(1,-1),n=[];let r=0,i;for(;r<t.length;){switch(!0){case t[r]==="(":{i=r+Ml(t.slice(r),"(",")")+1;break}case(t.startsWith("core::result::Result::<",r)||t.startsWith("core::array::Array::<",r)||t.startsWith("core::option::Option::<",r)):{i=r+Ml(t.slice(r),"<",">")+1;break}default:{const a=t.indexOf(",",r);i=a!==-1?a:Number.POSITIVE_INFINITY}}n.push(t.slice(r,i)),r=i+2}return n}function gc(e){return sn(e)?mm(e):bm(e)}var ot,we=(ot=class{constructor(t,n){w(this,"content");w(this,"arrayType");m(ot.isTypeFixedArray(n),`The type ${n} is not a Cairo fixed array. Needs [type; length].`);try{ot.getFixedArrayType(n)}catch{throw new Error(`The type ${n} do not includes any content type. Needs [type; length].`)}let r;try{r=ot.getFixedArraySize(n)}catch{throw new Error(`The type ${n} type do not includes any length. Needs [type; length].`)}m(r===t.length,`The ABI type ${n} is expecting ${r} items. ${t.length} items provided.`),this.content=t,this.arrayType=n}static getFixedArraySize(t){const n=t.match(new RegExp("(?<=; )\\d+(?=\\])"));if(n===null)throw new Error(`ABI type ${t} do not includes a valid number after ';' character.`);return Number(n[0])}getFixedArraySize(){return ot.getFixedArraySize(this.arrayType)}getFixedArrayType(){return ot.getFixedArrayType(this.arrayType)}static compile(t){return t.reduce((n,r,i)=>(n[i]=r,n),{})}compile(){return ot.compile(this.content)}static isTypeFixedArray(t){return/^\[.*;\s.*\]$/.test(t)&&new RegExp("(?<=\\[).+(?=;)").test(t)&&new RegExp("(?<=; )\\d+(?=\\])").test(t)}},w(ot,"getFixedArrayType",t=>{const n=t.match(new RegExp("(?<=\\[).+(?=;)"));if(n===null)throw new Error(`ABI type ${t} do not includes a valid type of data.`);return n[0]}),ot);function wm(e){return Error(`Your object includes the property : ${e}, containing an Uint256 object without the 'low' and 'high' keys.`)}function Em(e){return Error(`Your object includes the property : ${e}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`)}function Am(e,t,n,r){const i=(h,d)=>{if(we.isTypeFixedArray(d))return s(h,d);if(zt(d))return o(h,d);if(Un(d,r)){const f=r[d];return c(h,f)}if(ln(d))return l(h,d);if($n(d)||Vn(d)||Vt.isAbiType(d)||Zf(d)||qa(d))return h;if(he.isAbiType(d)){const f=h;if(typeof f!="object")return f;if(!("low"in f&&"high"in f))throw wm(d);return{low:f.low,high:f.high}}if(Me.isAbiType(d)){const f=h;if(typeof f!="object")return f;if(!["limb0","limb1","limb2","limb3"].every(_=>_ in f))throw Em(d);return{limb0:f.limb0,limb1:f.limb1,limb2:f.limb2,limb3:f.limb3}}if(xi(d,n)){const f=n[d].members;return a(h,f)}return h},a=(h,d)=>d.reduce((_,y)=>{const g=p=>Object.defineProperty(_,y.name,{enumerable:!0,value:p??h[y.name]});if(h[y.name]==="undefined"&&(sn(y.type)||!Rn(y.name)))throw Error(`Your object needs a property with key : ${y.name} .`);return g(i(h[y.name],y.type)),_},{});function o(h,d){const f=Bt(d);return $(h)?h:h.map(_=>i(_,f))}function s(h,d){const f=we.getFixedArrayType(d),_=we.getFixedArraySize(d);if(Array.isArray(h)){if(_!==h.length)throw new Error(`ABI type ${d}: array provided do not includes  ${_} items. ${h.length} items provided.`);return h.map(y=>i(y,f))}if(_!==Object.keys(h).length)throw new Error(`ABI type ${d}: object provided do not includes  ${_} properties. ${Object.keys(h).length} items provided.`);return i(h,f)}function l(h,d){return gc(d).reduce((y,g,p)=>{const A=Object.keys(h),E=C=>Object.defineProperty(y,p.toString(),{enumerable:!0,value:C??h[A[p]]}),b=g!=null&&g.type?g.type:g;return E(i(h[A[p]],b)),y},{})}const c=(h,d)=>{if(za(d.name)){const g=h,p=d.name.substring(d.name.indexOf("<")+1,d.name.lastIndexOf(",")),A=d.name.substring(d.name.indexOf(",")+1,d.name.lastIndexOf(">"));return g.isOk()?new Xo(Pe.Ok,i(h.unwrap(),p)):new Xo(Pe.Err,i(h.unwrap(),A))}if(Fa(d.name)){const g=h,p=d.name.substring(d.name.indexOf("<")+1,d.name.lastIndexOf(">"));return g.isSome()?new Wo(pt.Some,i(g.unwrap(),p)):new Wo(pt.None,{})}const f=h,y=Object.entries(f.variant).map(g=>{if(pe(g[1]))return g;const p=d.type.substring(d.type.lastIndexOf("<")+1,d.type.lastIndexOf(">"));return p==="()"?g:[g[0],i(f.unwrap(),p)]});return new Ii(Object.fromEntries(y))};return t.reduce((h,d)=>{const f=_=>Object.defineProperty(h,d.name,{enumerable:!0,value:_});return Rn(d.name)&&!sn(d.type)||f(i(e[d.name],d.type)),h},{})}function er({type:e,val:t,parser:n}){switch(!0){case he.isAbiType(e):return n.getRequestParser(e)(t);case Me.isAbiType(e):return n.getRequestParser(e)(t);case da.isAbiType(e):return n.getRequestParser(e)(t);case fa.isAbiType(e):return n.getRequestParser(e)(t);case ha.isAbiType(e):return n.getRequestParser(e)(t);case ga.isAbiType(e):return n.getRequestParser(e)(t);case _a.isAbiType(e):return n.getRequestParser(e)(t);case En.isAbiType(e):return n.getRequestParser(e)(t);case An.isAbiType(e):return n.getRequestParser(e)(t);case Tn.isAbiType(e):return n.getRequestParser(e)(t);case Sn.isAbiType(e):return n.getRequestParser(e)(t);case vn.isAbiType(e):return n.getRequestParser(e)(t);case yt.isAbiType(e):return n.getRequestParser(e)(t);case qa(e):{const r=_e(v(t)).padStart(128,"0"),i=Ko(D(r.slice(-64))),a=Ko(D(r.slice(0,-64)));return[fe(a.low),fe(a.high),fe(i.low),fe(i.high)]}default:return n.getRequestParser(Wt.abiSelector)(t)}}function Tm(e,t){const n=gc(t),r=Object.values(e);if(r.length!==n.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${r}
      expected: ${n}`);return n.map((i,a)=>({element:r[a],type:i.type??i}))}function qe({element:e,type:t,structs:n,enums:r,parser:i}){if(e===void 0)throw Error(`Missing parameter for type ${t}`);if(we.isTypeFixedArray(t)){const a=we.getFixedArrayType(t);let o=[];if(Array.isArray(e))o=new we(e,t).content;else if(typeof e=="object")o=Object.values(e),m(o.length===we.getFixedArraySize(t),`ABI type ${t}: object provided do not includes  ${we.getFixedArraySize(t)} items. ${o.length} items provided.`);else throw new Error(`ABI type ${t}: not an Array representing a cairo.fixedArray() provided.`);return o.reduce((s,l)=>s.concat(qe({element:l,type:a,structs:n,enums:r,parser:i})),[])}if(Array.isArray(e)){const a=[];a.push(fe(e.length));const o=Bt(t);return e.reduce((s,l)=>s.concat(qe({element:l,type:o,structs:n,enums:r,parser:i})),a)}if(he.isAbiType(t)||Me.isAbiType(t))return i.getRequestParser(t)(e);if(n[t]&&n[t].members.length){if($n(t))return er({type:t,val:e,parser:i});if(Vt.isAbiType(t))return i.getRequestParser(t)(e);const{members:a}=n[t],o=e;return a.reduce((s,l)=>s.concat(qe({element:o[l.name],type:l.type,structs:n,enums:r,parser:i})),[])}if(ln(t))return Tm(e,t).reduce((o,s)=>{const l=qe({element:s.element,type:s.type,structs:n,enums:r,parser:i});return o.concat(l)},[]);if(Un(t,r)){const{variants:a}=r[t];if(Fa(t)){const d=e;if(d.isSome()){const f=a.find(g=>g.name==="Some");if(pe(f))throw Error("Error in abi : Option has no 'Some' variant.");const _=f.type;if(_==="()")return pt.Some.toString();const y=qe({element:d.unwrap(),type:_,structs:n,enums:r,parser:i});return Array.isArray(y)?[pt.Some.toString(),...y]:[pt.Some.toString(),y]}return pt.None.toString()}if(za(t)){const d=e;if(d.isOk()){const g=a.find(E=>E.name==="Ok");if(pe(g))throw Error("Error in abi : Result has no 'Ok' variant.");const p=g.type;if(p==="()")return Pe.Ok.toString();const A=qe({element:d.unwrap(),type:p,structs:n,enums:r,parser:i});return Array.isArray(A)?[Pe.Ok.toString(),...A]:[Pe.Ok.toString(),A]}const f=a.find(g=>g.name==="Err");if(pe(f))throw Error("Error in abi : Result has no 'Err' variant.");const _=f.type;if(_==="()")return Pe.Err.toString();const y=qe({element:d.unwrap(),type:_,structs:n,enums:r,parser:i});return Array.isArray(y)?[Pe.Err.toString(),...y]:[Pe.Err.toString(),y]}const o=e,s=o.activeVariant(),l=a.find(d=>d.name===s);if(pe(l))throw Error(`Not find in abi : Enum has no '${s}' variant.`);const c=l.type,u=a.findIndex(d=>d.name===s);if(c==="()")return u.toString();const h=qe({element:o.unwrap(),type:c,structs:n,enums:r,parser:i});return Array.isArray(h)?[u.toString(),...h]:[u.toString(),h]}if(Vn(t))return er({type:Bt(t),val:e,parser:i});if(typeof e=="object")throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return er({type:t,val:e,parser:i})}function Sm({argsIterator:e,input:t,structs:n,enums:r,parser:i}){const{name:a,type:o}=t;let{value:s}=e.next();switch(!0){case we.isTypeFixedArray(o):if(!Array.isArray(s)&&typeof s!="object")throw Error(`ABI expected parameter ${a} to be an array or an object, got ${s}`);return qe({element:s,type:t.type,structs:n,enums:r,parser:i});case zt(o):if(!Array.isArray(s)&&!be(s))throw Error(`ABI expected parameter ${a} to be array or long string, got ${s}`);return $(s)&&(s=lc(s)),qe({element:s,type:t.type,structs:n,enums:r,parser:i});case Vn(o):return er({type:Bt(o),val:s,parser:i});case $n(o):return er({type:o,val:s,parser:i});case(xi(o,n)||ln(o)||he.isAbiType(o)):return qe({element:s,type:o,structs:n,enums:r,parser:i});case Un(o,r):return qe({element:s,type:o,structs:n,enums:r,parser:i});default:return er({type:o,val:s,parser:i})}}function Jo(e,t,n){let r;switch(!0){case ja(e):return r=t.next().value,!!BigInt(r);case he.isAbiType(e):return n.getResponseParser(e)(t);case Me.isAbiType(e):return n.getResponseParser(e)(t);case da.isAbiType(e):return n.getResponseParser(e)(t);case fa.isAbiType(e):return n.getResponseParser(e)(t);case ha.isAbiType(e):return n.getResponseParser(e)(t);case ga.isAbiType(e):return n.getResponseParser(e)(t);case _a.isAbiType(e):return n.getResponseParser(e)(t);case En.isAbiType(e):return n.getResponseParser(e)(t);case An.isAbiType(e):return n.getResponseParser(e)(t);case Tn.isAbiType(e):return n.getResponseParser(e)(t);case Sn.isAbiType(e):return n.getResponseParser(e)(t);case vn.isAbiType(e):return n.getResponseParser(e)(t);case $n(e):return r=t.next().value,BigInt(r);case yt.isAbiType(e):return n.getResponseParser(e)(t);case qa(e):const i=_e(t.next().value).padStart(32,"0"),a=_e(t.next().value).padStart(32,"0"),o=_e(t.next().value).padStart(32,"0"),s=_e(t.next().value).padStart(32,"0");return BigInt(D(a+i+s+o));default:return n.getResponseParser(Wt.abiSelector)(t)}}function Oe(e,t,n,r,i){if(t.type==="()")return{};if(he.isAbiType(t.type)||Me.isAbiType(t.type)||Vt.isAbiType(t.type))return n.getResponseParser(t.type)(e);if(we.isTypeFixedArray(t.type)){const a=[],o={type:we.getFixedArrayType(t.type)},s=we.getFixedArraySize(t.type);for(;a.length<s;)a.push(Oe(e,o,n,r,i));return a}if(zt(t.type)){const a=[],o={type:Bt(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(Oe(e,o,n,r,i));return a}if(Vn(t.type)){const a={type:Bt(t.type)};return Oe(e,a,n,r,i)}if(r&&t.type in r&&r[t.type])return $n(t.type)?Jo(t.type,e,n):r[t.type].members.reduce((a,o)=>(a[o.name]=Oe(e,o,n,r,i),a),{});if(i&&t.type in i&&i[t.type]){const a=Number(e.next().value),o=i[t.type].variants.reduce((l,c,u)=>u===a?(l[c.name]=Oe(e,{type:c.type},n,r,i),l):(l[c.name]=void 0,l),{});if(t.type.startsWith("core::option::Option")){const l=a===pt.Some?o.Some:void 0;return new Wo(a,l)}if(t.type.startsWith("core::result::Result")){let l;return a===Pe.Ok?l=o.Ok:l=o.Err,new Xo(a,l)}return new Ii(o)}if(ln(t.type))return gc(t.type).reduce((o,s,l)=>{const c=s!=null&&s.name?s.name:l,h={type:s!=null&&s.type?s.type:s};return o[c]=Oe(e,h,n,r,i),o},{});if(zt(t.type)){const a=[],o={type:Bt(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(Oe(e,o,n,r,i));return a}return Jo(t.type,e,n)}function pa({responseIterator:e,output:t,structs:n,enums:r,parsedResult:i,parser:a}){const{name:o,type:s}=t;let l;switch(!0){case Rn(o):return l=e.next().value,BigInt(l);case(n&&s in n||ln(s)):return Oe(e,t,a,n,r);case(r&&Un(s,r)):return Oe(e,t,a,n,r);case we.isTypeFixedArray(s):return Oe(e,t,a,n,r);case zt(s):if(sn(s))return Oe(e,t,a,n,r);const c=[];if(i&&i[`${o}_len`]){const u=i[`${o}_len`];for(;c.length<u;)c.push(Oe(e,{type:t.type.replace("*","")},a,n,r))}return c;case Vn(s):return Oe(e,t,a,n,r);default:return Jo(s,e,a)}}var _c=(e,t)=>{if(m($(e)||W(e)||Ie(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),$(e)&&!Fe(e))return;const n=BigInt(e.toString(10));m(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},Ya=(e,t)=>{W(e)&&m(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),m($(e)||W(e)||Ie(e)||K(e)&&"low"in e&&"high"in e||K(e)&&["limb0","limb1","limb2","limb3"].every(r=>r in e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`);let n;switch(t.type){case Ne.u256:n=new he(e).toBigInt();break;case Ne.u512:n=new Me(e).toBigInt();break;default:n=He(e)}switch(t.type){case Ne.u8:m(n>=0n&&n<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case Ne.u16:m(n>=0n&&n<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case Ne.u32:m(n>=0n&&n<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case Ne.u64:m(n>=0n&&n<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case Ne.u128:m(n>=0n&&n<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case Ne.u256:m(n>=0n&&n<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^256-1`);break;case Ne.u512:m(Me.is(n),`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^512-1`);break;case bn.ClassHash:m(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case bn.ContractAddress:m(n>=0n&&n<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case bn.Secp256k1Point:{m(n>=0n&&n<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`);break}case bn.U96:{m(n>=0n&&n<=2n**96n-1n,`Validate: arg ${t.name} must be ${t.type} : a 96 bits number.`);break}}},Kf=(e,t)=>{m(oi(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},Wf=(e,t,n)=>{if(t.type===Ne.u256||t.type===Ne.u512){Ya(e,t);return}if($n(t.type)){m(!K(e),`EthAddress type is waiting a BigNumberish. Got "${e}"`);const r=BigInt(e.toString(10));m(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}m(K(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as a js object (not array)`),n[t.type].members.forEach(({name:r})=>{m(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)})},Xf=(e,t)=>{m(K(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as a js object (not array)`);const n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),r=[...Object.getOwnPropertyNames(e),...n];if(!(Fa(t.type)&&r.includes("isSome")&&r.includes("isNone"))&&!(za(t.type)&&r.includes("isOk")&&r.includes("isErr"))&&!(r.includes("variant")&&r.includes("activeVariant")))throw new Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received "${e}", is not an Enum.`)},Jf=(e,t)=>{m(K(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},Qf=(e,t,n,r)=>{const i=zt(t.type),a=i?Bt(t.type):we.getFixedArrayType(t.type);if(i&&ur(a)&&cc(e))return;let o=[];if(i)m(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),o=e;else switch(!0){case Array.isArray(e):o=e;break;case typeof e=="object":o=Object.values(e);break;default:throw new Error(`Validate: arg ${t.name} should be an Array or an object.`)}switch(!0){case ur(a):o.forEach(s=>_c(s,t));break;case ln(a):o.forEach(s=>Jf(s,{name:t.name}));break;case zt(a):o.forEach(s=>Qf(s,{name:"",type:a},n,r));break;case xi(a,n):o.forEach(s=>Wf(s,{name:t.name,type:a},n));break;case Un(a,r):o.forEach(s=>Xf(s,{name:t.name,type:a}));break;case(si(a)||dc(a)):o.forEach(s=>Ya(s,{name:"",type:a}));break;case ja(a):o.forEach(s=>Kf(s,t));break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${o}`)}},vm=(e,t)=>{const n=Bt(t.type);switch(m(si(n)&&n!==Me.abiSelector||ur(n),`Validate: ${t.name} type is not authorized for NonZero type.`),!0){case ur(n):_c(e,t),m(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case si(n):switch(Ya(e,{name:"",type:n}),n){case Ne.u256:m(new he(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type.");break;default:m(He(e)>0,"Validate: value 0 is not authorized in NonZero uint type.")}break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value "${e}"`)}};function Hl(e,t,n,r){e.inputs.reduce((i,a)=>{const o=t[i];switch(!0){case Rn(a.name):return i;case ur(a.type):_c(o,a);break;case yt.isAbiType(a.type):yt.validate(o);break;case(si(a.type)||dc(a.type)):Ya(o,a);break;case ja(a.type):Kf(o,a);break;case Vt.isAbiType(a.type):Vt.validate(o);break;case En.isAbiType(a.type):En.validate(o);break;case An.isAbiType(a.type):An.validate(o);break;case Tn.isAbiType(a.type):Tn.validate(o);break;case Sn.isAbiType(a.type):Sn.validate(o);break;case vn.isAbiType(a.type):vn.validate(o);break;case(zt(a.type)||we.isTypeFixedArray(a.type)):Qf(o,a,n,r);break;case xi(a.type,n):Wf(o,a,n);break;case Un(a.type,r):Xf(o,a);break;case ln(a.type):Jf(o,a);break;case Vn(a.type):vm(o,a);break;default:throw new Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${o}`)}return i+1},0)}var Z=class $r{constructor(t,n){w(this,"abi");w(this,"parser");w(this,"structs");w(this,"enums");this.structs=$r.getAbiStruct(t),this.enums=$r.getAbiEnum(t),this.parser=gm(t,n),this.abi=this.parser.getLegacyFormat()}validate(t,n,r=[]){if(t!==Hi.DEPLOY){const o=this.abi.filter(s=>{if(s.type!=="function")return!1;const l=s.stateMutability==="view"||s.state_mutability==="view";return t===Hi.INVOKE?!l:l}).map(s=>s.name);m(o.includes(n),`${t===Hi.INVOKE?"invocable":"viewable"} method not found in abi`)}const i=this.abi.find(o=>t===Hi.DEPLOY?o.name===n&&o.type==="constructor":o.name===n&&o.type==="function");if(Vl(n,r,i))return;const a=this.parser.methodInputsLength(i);if(r.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${r.length}`);Hl(i,r,this.structs,this.enums)}compile(t,n){const r=this.abi.find(s=>s.name===t);if(Vl(t,n,r))return[];let i;if(Array.isArray(n))i=n;else{const s=Am(n,r.inputs,this.structs,this.enums);i=Object.values(s),Hl(r,i,this.structs,this.enums)}const a=i[Symbol.iterator](),o=r.inputs.reduce((s,l)=>Rn(l.name)&&!sn(l.type)?s:s.concat(Sm({argsIterator:a,input:l,structs:this.structs,enums:this.enums,parser:this.parser})),[]);return Object.defineProperty(o,"__compiled__",{enumerable:!1,writable:!1,value:!0}),o}static compile(t){const n=i=>{const a=(s,l=".")=>{const c=Array.isArray(s)?[s.length.toString(),...s]:s;return Object.entries(c).flatMap(([u,h])=>{let d=h;u==="entrypoint"?d=J(d):cc(d)&&(d=uc(d));const f=Array.isArray(c)&&u==="0"?"$$len":u;if(Ie(d))return[[`${l}${f}`,fe(d)]];if(Object(d)===d){const _=Object.getOwnPropertyNames(Object.getPrototypeOf(d)),y=[...Object.getOwnPropertyNames(d),..._];if(y.includes("isSome")&&y.includes("isNone")){const g=d,p=g.isSome()?pt.Some:pt.None;return g.isSome()?a({0:p,1:g.unwrap()},`${l}${f}.`):[[`${l}${f}`,fe(p)]]}if(y.includes("isOk")&&y.includes("isErr")){const g=d,p=g.isOk()?Pe.Ok:Pe.Err;return a({0:p,1:g.unwrap()},`${l}${f}.`)}if(y.includes("variant")&&y.includes("activeVariant")){const g=d,p=g.activeVariant(),E=Object.keys(g.variant).findIndex(b=>b===p);return typeof g.unwrap()=="object"&&Object.keys(g.unwrap()).length===0?[[`${l}${f}`,fe(E)]]:a({0:E,1:g.unwrap()},`${l}${f}.`)}return a(d,`${l}${f}.`)}return[[`${l}${f}`,fe(d)]]})};return Object.fromEntries(a(i))};let r;if(Array.isArray(t)){const i={...t},a=n(i);r=Object.values(a)}else{const i=n(t);r=Object.values(i)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(t,n){const{outputs:r}=this.abi.find(o=>o.name===t),i=n.flat()[Symbol.iterator](),a=r.flat().reduce((o,s,l)=>{const c=s.name??l;return o[c]=pa({responseIterator:i,output:s,structs:this.structs,enums:this.enums,parsedResult:o,parser:this.parser}),o[c]&&o[`${c}_len`]&&delete o[`${c}_len`],o},{});return Object.keys(a).length===1&&0 in a?a[0]:a}format(t,n,r){const i=this.parse(t,n);return Zi(i,r)}static getAbiStruct(t){return t.filter(n=>n.type==="struct").reduce((n,r)=>({...n,[r.name]:r}),{})}static getAbiEnum(t){const n=t.filter(r=>r.type==="enum").reduce((r,i)=>({...r,[i.name]:i}),{});return delete n["core::bool"],n}static toCalldata(t=[]){return $r.compile(t)}static toHex(t=[]){return $r.compile(t).map(r=>v(r))}decodeParameters(t,n){const r=Array.isArray(t)?t:[t],i=n.flat()[Symbol.iterator](),a=r.map(o=>pa({responseIterator:i,output:{name:"",type:o},parser:this.parser,structs:this.structs,enums:this.enums}));return a.length===1?a[0]:a}},xm={};G(xm,{calculateContractAddressFromHash:()=>jm,calculateDeclareTransactionHash:()=>Hm,calculateDeployAccountTransactionHash:()=>zm,calculateInvokeTransactionHash:()=>Vm,calculateL2MessageTxHash:()=>ch,computeCompiledClassHash:()=>_h,computeContractClassHash:()=>yh,computeHashOnElements:()=>Tt,computeHintedClassHash:()=>fh,computeLegacyContractClassHash:()=>hh,computePedersenHash:()=>li,computePedersenHashOnElements:()=>uh,computePoseidonHash:()=>lh,computePoseidonHashOnElements:()=>dh,computeSierraContractClassHash:()=>ph,formatSpaces:()=>ui,getL1MessageHash:()=>qf,getL2MessageHash:()=>jf,getSelector:()=>Ti,getSelectorFromName:()=>J,hashByteCodeSegments:()=>gh,keccakBn:()=>ic,poseidon:()=>Vg,solidityUint256PackedKeccak256:()=>Si,starknetKeccak:()=>ac});var Im={};G(Im,{calculateDeclareTransactionHash:()=>oh,calculateDeployAccountTransactionHash:()=>ah,calculateInvokeTransactionHash:()=>sh,calculateTransactionHashCommon:()=>Ga,encodeDataResourceBoundsL1:()=>rh,encodeResourceBoundsL1:()=>th,encodeResourceBoundsL2:()=>nh,hashDAMode:()=>eh,hashFeeFieldV3B3:()=>ih});var an=e=>e.map(t=>BigInt(t)),km=32n,Cm=64n,Za=128n,pc=Cm+Za,Bm=BigInt(ae("L1_GAS")),Nm=BigInt(ae("L2_GAS")),Rm=BigInt(ae("L1_DATA"));function eh(e,t){return(BigInt(e)<<km)+BigInt(t)}function th(e){return(Bm<<pc)+(e.l1_gas.max_amount<<Za)+e.l1_gas.max_price_per_unit}function nh(e){return(Nm<<pc)+(e.l2_gas.max_amount<<Za)+e.l2_gas.max_price_per_unit}function rh(e){return(Rm<<pc)+(e.l1_data_gas.max_amount<<Za)+e.l1_data_gas.max_price_per_unit}function ih(e,t){const n=th(t),r=nh(t),i=rh(t);return ce([BigInt(e),n,r,i])}function Ga(e,t,n,r,i,a,o,s,l,c,u=[]){const h=ih(a,c),d=eh(s,l),f=an([e,t,n,h,ce(an(o)),r,i,d,...an(u)]);return v(ce(f))}function ah(e,t,n,r,i,a,o,s,l,c,u,h){return Ga(cn.DEPLOY_ACCOUNT,i,e,a,o,u,h,s,l,c,[ce(an(n)),t,r])}function oh(e,t,n,r,i,a,o,s,l,c,u,h){return Ga(cn.DECLARE,r,n,i,a,u,an(h),s,l,c,[ce(an(o)),e,t])}function sh(e,t,n,r,i,a,o,s,l,c,u){return Ga(cn.INVOKE,t,e,r,i,c,u,o,s,l,[ce(an(a)),ce(an(n))])}var Om={};G(Om,{calculateDeclareTransactionHash:()=>Lm,calculateDeployAccountTransactionHash:()=>Pm,calculateL2MessageTxHash:()=>ch,calculateTransactionHash:()=>Um,calculateTransactionHashCommon:()=>ki,computeHashOnElements:()=>Qo});var Dm={};G(Dm,{starkCurve:()=>h_,weierstrass:()=>Kg});function Qo(e){return[...e,e.length].reduce((t,n)=>mi(He(t),He(n)),0).toString()}function ki(e,t,n,r,i,a,o,s=[]){const l=Qo(i),c=[e,t,n,r,l,a,o,...s];return Qo(c)}function Lm(e,t,n,r,i,a,o){return ki(cn.DECLARE,n,t,0,[e],r,i,[a,...o?[o]:[]])}function Pm(e,t,n,r,i,a,o,s){const l=[t,r,...n];return ki(cn.DEPLOY_ACCOUNT,i,e,0,l,a,o,[s])}function Um(e,t,n,r,i,a){return ki(cn.INVOKE,t,e,0,n,r,i,[a])}function ch(e,t,n,r,i,a){const o=[e,...r];return ki(cn.L1_HANDLER,0,t,Ti(n),o,0,i,[a])}function $m(e){return[L.ETransactionVersion.V3,L.ETransactionVersion.F3].includes(e.version)}function Vm(e){if($m(e))return sh(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Mm(e){return[L.ETransactionVersion.V3,L.ETransactionVersion.F3].includes(e.version)}function Hm(e){if(Mm(e))return oh(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function Fm(e){return[L.ETransactionVersion.V3,L.ETransactionVersion.F3].includes(e.version)}function zm(e){if(Fm(e))return ah(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData);throw new Error("Invalid Tx version for hash calculation")}function li(e,t){return mi(BigInt(e),BigInt(t))}function lh(e,t){return v(Ys(BigInt(e),BigInt(t)))}function Tt(e){return[...e,e.length].reduce((t,n)=>mi(BigInt(t),BigInt(n)),0).toString()}var uh=Tt;function dh(e){return v(ce(e.map(t=>BigInt(t))))}function jm(e,t,n,r){const i=Z.compile(n),a=Tt(i),o=fe("0x535441524b4e45545f434f4e54524143545f41444452455353"),s=Tt([o,r,e,t,a]);return v(BigInt(s)%ec)}function qm(e,t){return e==="attributes"||e==="accessible_scopes"?Array.isArray(t)&&t.length===0?void 0:t:e==="debug_info"?null:t===null?void 0:t}function ui(e){let t=!1;const n=[];for(const r of e)r==='"'&&!(n.length>0&&n.slice(-1)[0]==="\\")&&(t=!t),t?n.push(r):n.push(r===":"?": ":r===","?", ":r);return n.join("")}function fh(e){const{abi:t,program:n}=e,i=ui(lt({abi:t,program:n},qm));return D(on(Bn(i)).toString(16))}function hh(e){const t=$(e)?Ln(e):e,n=v(Df),r=Tt(t.entry_points_by_type.EXTERNAL.flatMap(c=>[c.selector,c.offset])),i=Tt(t.entry_points_by_type.L1_HANDLER.flatMap(c=>[c.selector,c.offset])),a=Tt(t.entry_points_by_type.CONSTRUCTOR.flatMap(c=>[c.selector,c.offset])),o=Tt(t.program.builtins.map(c=>ae(c))),s=fh(t),l=Tt(t.program.data);return Tt([n,r,i,a,o,s,l])}function Ym(e){return ce(e.flatMap(t=>BigInt(ae(t))))}function So(e){const t=e.flatMap(n=>[BigInt(n.selector),BigInt(n.offset),Ym(n.builtins)]);return ce(t)}function gh(e){const t=e.bytecode.map(a=>BigInt(a)),n=e.bytecode_segment_lengths??[];let r=0;const i=n.flatMap(a=>{const o=t.slice(r,r+=a);return[BigInt(a),ce(o)]});return 1n+ce(i)}function _h(e){const n=BigInt(ae("COMPILED_CLASS_V1")),r=So(e.entry_points_by_type.EXTERNAL),i=So(e.entry_points_by_type.L1_HANDLER),a=So(e.entry_points_by_type.CONSTRUCTOR),o=e.bytecode_segment_lengths?gh(e):ce(e.bytecode.map(s=>BigInt(s)));return v(ce([n,r,i,a,o]))}function vo(e){const t=e.flatMap(n=>[BigInt(n.selector),BigInt(n.function_idx)]);return ce(t)}function Zm(e){const t=ui(lt(e.abi,null));return BigInt(D(on(Bn(t)).toString(16)))}function ph(e){const n=BigInt(ae("CONTRACT_CLASS_V0.1.0")),r=vo(e.entry_points_by_type.EXTERNAL),i=vo(e.entry_points_by_type.L1_HANDLER),a=vo(e.entry_points_by_type.CONSTRUCTOR),o=Zm(e),s=ce(e.sierra_program.map(l=>BigInt(l)));return v(ce([n,r,i,a,o,s]))}function yh(e){const t=$(e)?Ln(e):e;return"sierra_program"in t?ph(t):hh(t)}var Gm={};G(Gm,{ZeroFeeEstimate:()=>mh,compressProgram:()=>yc,decompressProgram:()=>ya,formatSignature:()=>Ci,getFullPublicKey:()=>t1,intDAM:()=>Jm,randomAddress:()=>Km,resourceBoundsToBigInt:()=>n1,resourceBoundsToEstimateFeeResponse:()=>Xm,resourceBoundsToHexString:()=>Xn,signatureToDecimalArray:()=>Wm,signatureToHexArray:()=>Xt,toFeeVersion:()=>Qm,toOverheadOverallFee:()=>es,toOverheadResourceBounds:()=>ba,toTransactionVersion:()=>wh,v3Details:()=>e1,zeroResourceBounds:()=>bh});function yc(e){const t=$(e)?e:lt(e),n=Fy(t);return vf(n)}function ya(e){if(Array.isArray(e))return e;const t=Tf(zy(Sf(e)));return Ln(t)}function Km(){const e=xd.randomPrivateKey();return Cd(e)}function Ci(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(t=>v(t));try{const{r:t,s:n}=e;return[v(t),v(n)]}catch{throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Wm(e){return Ff(Ci(e))}function Xt(e){return cr(Ci(e))}function bh(){return ba(mh(),!1)}function ba(e,t=Nt.get("resourceBoundsOverhead")){return{l2_gas:{max_amount:Le(e.l2_gas_consumed,t!==!1?t.l2_gas.max_amount:0),max_price_per_unit:Le(e.l2_gas_price,t!==!1?t.l2_gas.max_price_per_unit:0)},l1_gas:{max_amount:Le(e.l1_gas_consumed,t!==!1?t.l1_gas.max_amount:0),max_price_per_unit:Le(e.l1_gas_price,t!==!1?t.l1_gas.max_price_per_unit:0)},l1_data_gas:{max_amount:Le(e.l1_data_gas_consumed,t!==!1?t.l1_data_gas.max_amount:0),max_price_per_unit:Le(e.l1_data_gas_price,t!==!1?t.l1_data_gas.max_price_per_unit:0)}}}function Xm(e){return{resourceBounds:e,overall_fee:e.l1_gas.max_amount*e.l1_gas.max_price_per_unit+e.l1_data_gas.max_amount*e.l1_data_gas.max_price_per_unit+e.l2_gas.max_amount*e.l2_gas.max_price_per_unit,unit:"FRI"}}function es(e,t=Nt.get("resourceBoundsOverhead")){return Le(e.l1_gas_consumed,t!==!1?t.l1_gas.max_amount:0)*Le(e.l1_gas_price,t!==!1?t.l1_gas.max_price_per_unit:0)+Le(e.l1_data_gas_consumed,t!==!1?t.l1_data_gas.max_amount:0)*Le(e.l1_data_gas_price,t!==!1?t.l1_data_gas.max_price_per_unit:0)+Le(e.l2_gas_consumed,t!==!1?t.l2_gas.max_amount:0)*Le(e.l2_gas_price,t!==!1?t.l2_gas.max_price_per_unit:0)}function mh(){return{l1_gas_consumed:"0",l1_gas_price:"0",l1_data_gas_consumed:"0",l1_data_gas_price:"0",l2_gas_consumed:"0",l2_gas_price:"0",overall_fee:"0",unit:"FRI"}}function Jm(e){if(e===la.L1)return Ul.L1;if(e===la.L2)return Ul.L2;throw Error("EDAM conversion")}function wh(e,t){const n=v(t||e);if(!Object.values(Ab).includes(n))throw Error(`${t?"providedVersion":"defaultVersion"} ${n} is not ETransactionVersion`);return n}function Qm(e){if(!e)return;const t=v(e);if(t===Re.V0)return Re.F0;if(t===Re.V1)return Re.F1;if(t===Re.V2)return Re.F2;if(t===Re.V3)return Re.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function e1(e){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||la.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||la.L1,resourceBounds:e.resourceBounds??bh()}}function t1(e){const t=v(e);return D(br(zs(t,!1)))}function Xn(e){const t=n=>{if(Ie(n))return v(n);if(K(n)){const r={};return Object.keys(n).forEach(i=>{r[i]=t(n[i])}),r}return n};return t(e)}function n1(e){const t=n=>{if($(n))return BigInt(n);if(K(n)){const r={};return Object.keys(n).forEach(i=>{r[i]=t(n[i])}),r}return n};return t(e)}function fr(e){return"sierra_program"in($(e)?Ln(e):e)}function r1(e){const t={...e};if(fr(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=_h(e.casm)),!t.compiledClassHash))throw new Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??yh(e.contract),!t.classHash)throw new Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}var i1={};G(i1,{ethRandomPrivateKey:()=>a1,validateAndParseEthAddress:()=>bc});function a1(){return Cf(br(pf.utils.randomPrivateKey()))}function bc(e){nc(e,xe,2n**160n-1n,"Ethereum Address ");const t=D(_e(v(e)).padStart(40,"0"));return m(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}var ma=typeof globalThis<"u"&&globalThis.fetch.bind(globalThis)||typeof window<"u"&&window.fetch.bind(window)||typeof global<"u"&&global.fetch.bind(global)||(()=>{throw new ye("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")}),o1={};G(o1,{Block:()=>M,createSierraContractClass:()=>Eh,extractAbi:()=>u1,getDefaultNodeUrl:()=>di,getDefaultNodes:()=>Ah,getSupportedRpcVersions:()=>d1,parseContract:()=>l1,validBlockTags:()=>Th,wait:()=>Jt});function Vr(e){const t=e.version?v(e.version):Re.V3;return t===Re.V3||t===Re.F3}function $t(e,t){const n=e.split("."),r=t.split(".");return n.every((i,a)=>i==="*"||i===r[a])}function mc(e,t={allowAnyPatchVersion:!1}){return Object.values(rn).some(n=>$t(t.allowAnyPatchVersion?s1(n):n,e))}function s1(e){const t=e.split(".");return t.length<3?e:`${t[0]}.${t[1]}.*`}function c1(e){const[t,n]=e.replace(/^v/,"").split(".");return`v${t}_${n}`}function Jt(e){return new Promise(t=>{setTimeout(t,e)})}function Eh(e){const t={...e};return delete t.sierra_program_debug_info,t.abi=ui(lt(e.abi)),t.sierra_program=ui(lt(e.sierra_program)),t.sierra_program=yc(t.sierra_program),t}function l1(e){const t=$(e)?Ln(e):e;return fr(e)?Eh(t):{...t,..."program"in t&&{program:yc(t.program)}}}function u1(e){return $(e.abi)?Ln(e.abi):e.abi}var di=(e,t=!1,n)=>{t||ge.info("Using default public node url, please provide nodeUrl in provider options!");const i=Ah(n??Nt.get("rpcVersion"))[e??mr.SN_SEPOLIA],a=Math.floor(Math.random()*i.length);return i[a]};function Ah(e){const t={...Uf};return Object.keys(t).forEach(function(n,r){t[n]=t[n].map(i=>`${i}${c1(e)}`)}),t}function d1(){return[...new Set(Object.values(rn))]}var Th=Object.values(Mt),M=class{constructor(e){w(this,"hash",null);w(this,"number",null);w(this,"tag",null);w(this,"valueOf",()=>this.number);w(this,"toString",()=>this.hash);this.setIdentifier(e)}setIdentifier(e){if($(e))if(sc(e))this.number=parseInt(e,10);else if(Fe(e))this.hash=e;else if(Th.includes(e))this.tag=e;else throw TypeError(`Block identifier unmanaged: ${e}`);else Ie(e)?this.hash=v(e):W(e)?this.number=e:this.tag=Mt.LATEST;if(W(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}get queryIdentifier(){return this.number!==null?`blockNumber=${this.number}`:this.hash!==null?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return this.number!==null?{block_number:this.number}:this.hash!==null?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}},f1={};G(f1,{fromCallsToExecuteCalldata:()=>vh,fromCallsToExecuteCalldata_cairo1:()=>xh,getCompiledCalldata:()=>h1,getExecuteCalldata:()=>g1,getVersionsByType:()=>wc,transformCallsToMulticallArrays:()=>Sh});function h1(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}var Sh=e=>{const t=[],n=[];return e.forEach(r=>{const i=Z.compile(r.calldata||[]);t.push({to:He(r.contractAddress).toString(10),selector:He(J(r.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:i.length.toString()}),n.push(...i)}),{callArray:t,calldata:Z.compile({calldata:n})}},vh=e=>{const{callArray:t,calldata:n}=Sh(e);return[...Z.compile({callArray:t}),...n]},xh=e=>{const t=e.map(n=>({contractAddress:n.contractAddress,entrypoint:n.entrypoint,calldata:Array.isArray(n.calldata)&&"__compiled__"in n.calldata?n.calldata:Z.compile(n.calldata)}));return Z.compile({orderCalls:t})},g1=(e,t="0")=>t==="1"?xh(e):vh(e);function wc(e){return e==="fee"?{v3:Re.F3}:{v3:Re.V3}}var xo={headers:{"Content-Type":"application/json"},blockIdentifier:Mt.LATEST,retries:200},_1=class{constructor(e){w(this,"id","RPC081");w(this,"channelSpecVersion",rn.v0_8_1);w(this,"nodeUrl");w(this,"headers");w(this,"requestId");w(this,"blockIdentifier");w(this,"retries");w(this,"waitMode");w(this,"chainId");w(this,"specVersion");w(this,"transactionRetryIntervalFallback");w(this,"batchClient");w(this,"baseFetch");const{baseFetch:t,batch:n,blockIdentifier:r,chainId:i,headers:a,nodeUrl:o,retries:s,specVersion:l,transactionRetryIntervalFallback:c,waitMode:u}=e||{};Object.values(mr).includes(o)?this.nodeUrl=di(o,e==null?void 0:e.default,this.channelSpecVersion):o?this.nodeUrl=o:this.nodeUrl=di(void 0,e==null?void 0:e.default,this.channelSpecVersion),this.baseFetch=t||Nt.get("fetch")||ma,this.blockIdentifier=r??xo.blockIdentifier,this.chainId=i,this.headers={...xo.headers,...a},this.retries=s??xo.retries,this.specVersion=l,this.transactionRetryIntervalFallback=c,this.waitMode=u??!1,this.requestId=0,W(n)&&(this.batchClient=new Vf({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),ge.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:lt(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new ci(n,e,t);if(r instanceof ye)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){var n;try{if(this.batchClient){const{error:o,result:s}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,o),s}const r=await this.fetch(e,t,this.requestId+=1),{error:i,result:a}=await r.json();return this.errorHandler(e,t,i),a}catch(r){throw this.errorHandler(e,t,(n=r==null?void 0:r.response)==null?void 0:n.data,r),r}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const e=await this.fetchEndpoint("starknet_specVersion");if($t(this.channelSpecVersion,e)||ge.error(ne.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!mc(e))throw new ye(`${ne.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getMessagesStatus(e){const t=v(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(e=[],t=[],n=[],r=this.blockIdentifier){const i=new M(r).identifier,a=cr(e),o=cr(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:a,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(e){const t=v(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e,t=this.blockIdentifier){const n=v(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=v(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new M(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=v(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=v(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=v(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=t,a=new M(n).identifier,o=[];return r&&o.push(Mr.SKIP_VALIDATE),i&&o.push(Mr.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:a,transactions:e.map(s=>this.buildTransaction(s)),simulation_flags:o})}async waitForTransaction(e,t){const n=v(e);let{retries:r}=this,i=!1,a=!1;const o=(t==null?void 0:t.retryInterval)??this.transactionRetryIntervalDefault,s=(t==null?void 0:t.errorStates)??[Hr.REJECTED],l=(t==null?void 0:t.successStates)??[Hr.ACCEPTED_ON_L2,Hr.ACCEPTED_ON_L1],c=[];let u;for(;!i;){await Jt(o);try{u=await this.getTransactionStatus(n),c.push(u.finality_status);const d=u.execution_status,f=u.finality_status;if(!f)throw new Error("waiting for transaction status");if(s.includes(d)||s.includes(f)){const _=`${d}: ${f}`,y=new Error(_);throw y.response=u,a=!0,y}else(l.includes(d)||l.includes(f))&&(i=!0)}catch(d){if(d instanceof Error&&a)throw d;if(d instanceof ci&&d.isType("TXN_HASH_NOT_FOUND")){ge.info("txLife: ",c);const _={[Qt.RECEIVED]:ne.txEvictedFromMempool,[Qt.PRE_CONFIRMED]:ne.consensusFailed,[Qt.CANDIDATE]:ne.txFailsBlockBuildingValidation}[c.at(-1)];if(_)throw new Error(_)}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let h=null;for(;h===null;){try{h=await this.getTransactionReceipt(n)}catch{if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Jt(o)}return h}getStorageAt(e,t,n=this.blockIdentifier){const r=v(e),i=tc(t),a=new M(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:a})}getClassHashAt(e,t=this.blockIdentifier){const n=v(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=v(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=v(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}={}){const r=new M(t).identifier,i={simulation_flags:n?[Mr.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(a=>this.buildTransaction(a,"fee")),block_id:r,...i})}async invoke(e,t){let n;if(Vr(t))if(qi(t.resourceBounds))n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:Lt.INVOKE,sender_address:e.contractAddress,calldata:Z.toHex(e.calldata),version:De.V3,signature:Xt(e.signature),nonce:v(t.nonce),resource_bounds:Xn(t.resourceBounds),tip:v(t.tip),paymaster_data:t.paymasterData.map(r=>v(r)),account_deployment_data:t.accountDeploymentData.map(r=>v(r)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error(ne.SWOldV3);else throw Error(ne.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare({contract:e,signature:t,senderAddress:n,compiledClassHash:r},i){let a;if(fr(e)&&Vr(i))if(qi(i.resourceBounds))a=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:Lt.DECLARE,sender_address:n,compiled_class_hash:r||"",version:De.V3,signature:Xt(t),nonce:v(i.nonce),contract_class:{sierra_program:ya(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:Xn(i.resourceBounds),tip:v(i.tip),paymaster_data:i.paymasterData.map(o=>v(o)),account_deployment_data:i.accountDeploymentData.map(o=>v(o)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}});else throw Error(ne.SWOldV3);else throw Error(ne.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await a).transaction_hash):a}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:n,signature:r},i){let a;if(Vr(i))if(qi(i.resourceBounds))a=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:Lt.DEPLOY_ACCOUNT,version:De.V3,signature:Xt(r),nonce:v(i.nonce),contract_address_salt:v(n||0),constructor_calldata:Z.toHex(t||[]),class_hash:v(e),resource_bounds:Xn(i.resourceBounds),tip:v(i.tip),paymaster_data:i.paymasterData.map(o=>v(o)),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}});else throw Error(ne.SWOldV3);else throw Error(ne.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await a).transaction_hash):a}callContract(e,t=this.blockIdentifier){const n=new M(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:J(e.entrypoint),calldata:Z.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:a}=e,o={from_address:bc(n),to_address:v(r),entry_point_selector:Ti(i),payload:rc(a)},s=new M(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:s})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=wc(t);let r;if(Vr(e))r={signature:Xt(e.signature),nonce:v(e.nonce),resource_bounds:Xn(e.resourceBounds),tip:v(e.tip),paymaster_data:e.paymasterData.map(i=>v(i)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(i=>v(i))};else throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(e.type===Lt.INVOKE)return{type:Lt.INVOKE,sender_address:e.contractAddress,calldata:Z.toHex(e.calldata),version:v(e.version||n.v3),...r};if(e.type===Lt.DECLARE){if(!fr(e.contract))throw ge.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:e.type,contract_class:{...e.contract,sierra_program:ya(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:v(e.version||n.v3),...r}}if(e.type===Lt.DEPLOY_ACCOUNT){const{account_deployment_data:i,...a}=r;return{type:e.type,constructor_calldata:Z.toHex(e.constructorCalldata||[]),class_hash:v(e.classHash),contract_address_salt:v(e.addressSalt||0),version:v(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},Zn={};G(Zn,{RpcChannel:()=>p1});var Io={headers:{"Content-Type":"application/json"},blockIdentifier:Mt.LATEST,retries:200},p1=class{constructor(e){w(this,"id","RPC090");w(this,"channelSpecVersion",rn.v0_9_0);w(this,"nodeUrl");w(this,"headers");w(this,"requestId");w(this,"blockIdentifier");w(this,"retries");w(this,"waitMode");w(this,"chainId");w(this,"specVersion");w(this,"transactionRetryIntervalFallback");w(this,"batchClient");w(this,"baseFetch");const{baseFetch:t,batch:n,blockIdentifier:r,chainId:i,headers:a,nodeUrl:o,retries:s,specVersion:l,transactionRetryIntervalFallback:c,waitMode:u}=e||{};Object.values(mr).includes(o)?this.nodeUrl=di(o,e==null?void 0:e.default,this.channelSpecVersion):o?this.nodeUrl=o:this.nodeUrl=di(void 0,e==null?void 0:e.default,this.channelSpecVersion),this.baseFetch=t||Nt.get("fetch")||ma,this.blockIdentifier=r??Io.blockIdentifier,this.chainId=i,this.headers={...Io.headers,...a},this.retries=s??Io.retries,this.specVersion=l,this.transactionRetryIntervalFallback=c,this.waitMode=u??!1,this.requestId=0,W(n)&&(this.batchClient=new Vf({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch,rpcMethods:{}})),ge.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,n=0){const r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:lt(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new ci(n,e,t);if(r instanceof ye)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){var n;try{if(this.batchClient){const{error:o,result:s}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,o),s}const r=await this.fetch(e,t,this.requestId+=1),{error:i,result:a}=await r.json();return this.errorHandler(e,t,i),a}catch(r){throw this.errorHandler(e,t,(n=r==null?void 0:r.response)==null?void 0:n.data,r),r}}async getChainId(){return this.chainId??(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){const e=await this.fetchEndpoint("starknet_specVersion");if($t(this.channelSpecVersion,e)||ge.error(ne.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!mc(e))throw new ye(`${ne.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getMessagesStatus(e){const t=v(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(e=[],t=[],n=[],r=this.blockIdentifier){const i=new M(r).identifier,a=cr(e),o=cr(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:i,class_hashes:a,contract_addresses:o,contracts_storage_keys:n})}getCompiledCasm(e){const t=v(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e,t=this.blockIdentifier){const n=v(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new M(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=v(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const n=new M(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){const t=v(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=v(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=v(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:i=!0}=t,a=new M(n).identifier,o=[];return r&&o.push(Fr.SKIP_VALIDATE),i&&o.push(Fr.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:a,transactions:e.map(s=>this.buildTransaction(s)),simulation_flags:o})}async waitForTransaction(e,t){const n=v(e);let{retries:r}=this,i=!1,a=!1;const o=(t==null?void 0:t.retryInterval)??this.transactionRetryIntervalDefault,s=(t==null?void 0:t.errorStates)??[],l=(t==null?void 0:t.successStates)??[fn.ACCEPTED_ON_L2,fn.ACCEPTED_ON_L1],c=[];let u;for(;!i;){await Jt(o);try{u=await this.getTransactionStatus(n),c.push(u.finality_status);const d=u.execution_status,f=u.finality_status;if(!f)throw new Error("waiting for transaction status");if(s.includes(d)||s.includes(f)){const _=`${d}: ${f}`,y=new Error(_);throw y.response=u,a=!0,y}else(l.includes(d)||l.includes(f))&&(i=!0)}catch(d){if(d instanceof Error&&a)throw d;if(d instanceof ci&&d.isType("TXN_HASH_NOT_FOUND")){ge.info("txLife: ",c);const _={[Qt.RECEIVED]:ne.txEvictedFromMempool,[Qt.PRE_CONFIRMED]:ne.consensusFailed,[Qt.CANDIDATE]:ne.txFailsBlockBuildingValidation}[c.at(-1)];if(_)throw new Error(_)}if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1}let h=null;for(;h===null;){try{h=await this.getTransactionReceipt(n)}catch{if(r<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}r-=1,await Jt(o)}return h}async fastWaitForTransaction(e,t,n,r){const i=BigInt(n);let a=(r==null?void 0:r.retries)??50;const o=(r==null?void 0:r.retryInterval)??500,s=[Rs.REVERTED],l=[fn.ACCEPTED_ON_L2,fn.ACCEPTED_ON_L1,fn.PRE_CONFIRMED];let c;const u=new Date().getTime();for(;a>0;){await Jt(o),c=await this.getTransactionStatus(e),ge.info(`${a} ${JSON.stringify(c)} ${(new Date().getTime()-u)/1e3}s.`);const h=c.execution_status??"",d=c.finality_status;if(s.includes(h)){const f=`${h}: ${d}`,_=new Error(f);throw _.response=c,_}else if(l.includes(d)){let f=i;for(;f===i&&a>0;){if(f=BigInt(await this.getNonceForAddress(t,Mt.PRE_CONFIRMED)),ge.info(`${a} Checking new nonce ${f} ${(new Date().getTime()-u)/1e3}s.`),f!==i)return!0;await Jt(o),a-=1}return!1}a-=1}return!1}getStorageAt(e,t,n=this.blockIdentifier){const r=v(e),i=tc(t),a=new M(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:i,block_id:a})}getClassHashAt(e,t=this.blockIdentifier){const n=v(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e,t=this.blockIdentifier){const n=v(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e,t=this.blockIdentifier){const n=v(e),r=new M(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:n=!0}={}){const r=new M(t).identifier,i={simulation_flags:n?[Fr.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(a=>this.buildTransaction(a,"fee")),block_id:r,...i})}async invoke(e,t){const n=this.buildTransaction({type:L.ETransactionType.INVOKE,...e,...t},"transaction"),r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(e,t){const n=this.buildTransaction({type:L.ETransactionType.DECLARE,...e,...t},"transaction"),r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(e,t){const n=this.buildTransaction({type:L.ETransactionType.DEPLOY_ACCOUNT,...e,...t},"transaction"),r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:n});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(e,t=this.blockIdentifier){const n=new M(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:J(e.entrypoint),calldata:Z.toHex(e.calldata)},block_id:n})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:n,to_address:r,entry_point_selector:i,payload:a}=e,o={from_address:bc(n),to_address:v(r),entry_point_selector:Ti(i),payload:rc(a)},s=new M(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:s})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const n=wc(t);m(Vr(e),ne.legacyTxRPC08Message),m(t!=="transaction"||qi(e.resourceBounds),ne.SWOldV3);const r={signature:Xt(e.signature),nonce:v(e.nonce),resource_bounds:Xn(e.resourceBounds),tip:v(e.tip),paymaster_data:e.paymasterData.map(i=>v(i)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(i=>v(i)),version:wh(n.v3,e.version)};if(e.type===L.ETransactionType.INVOKE)return{type:Ns.INVOKE,sender_address:e.contractAddress,calldata:Z.toHex(e.calldata),...r};if(e.type===L.ETransactionType.DECLARE)return m(fr(e.contract),"Declaring non Sierra contract using RPC 0.9"),{type:e.type,contract_class:{...e.contract,sierra_program:ya(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,...r};if(e.type===L.ETransactionType.DEPLOY_ACCOUNT){const{account_deployment_data:i,...a}=r;return{type:e.type,constructor_calldata:Z.toHex(e.constructorCalldata||[]),class_hash:v(e.classHash),contract_address_salt:v(e.addressSalt||0),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}};typeof WebSocket<"u"&&WebSocket||typeof globalThis<"u"&&globalThis.WebSocket||typeof window<"u"&&window.WebSocket&&window.WebSocket.bind(window)||typeof global<"u"&&global.WebSocket;var Fl=class{constructor(e){w(this,"resourceBoundsOverhead");this.resourceBoundsOverhead=e}parseGetBlockResponse(e){return e}parseTransactionReceipt(e){return e}parseFeeEstimateBulkResponse(e){return e.map(t=>({resourceBounds:ba(t,this.resourceBoundsOverhead),overall_fee:es(t,this.resourceBoundsOverhead),unit:t.unit}))}parseSimulateTransactionResponse(e){return e.map(t=>({transaction_trace:t.transaction_trace,resourceBounds:ba(t.fee_estimation,this.resourceBoundsOverhead),overall_fee:es(t.fee_estimation,this.resourceBoundsOverhead),unit:t.fee_estimation.unit}))}parseContractClassResponse(e){return{...e,abi:$(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}};function y1(e){return e.version==="0x3"&&"tip"in e&&$(e.tip)&&(e.type==="INVOKE"||e.type==="DECLARE"||e.type==="DEPLOY_ACCOUNT")}function b1(e){return!!e.channel.batchClient}function Ih(e,t=!0){return e.transactions.filter(y1).map(n=>BigInt(n.tip)).filter(n=>t||n>0n)}function kh(e,t){return{minTip:0n,maxTip:0n,averageTip:0n,medianTip:0n,modeTip:0n,recommendedTip:0n,p90Tip:0n,p95Tip:0n,metrics:{blocksAnalyzed:e,transactionsTipsFound:t}}}function zl(e,t){const n=t/100*(e.length-1),r=Math.floor(n),i=Math.ceil(n);if(r===i)return e[r];const a=n-r,o=e[r],c=(e[i]-o)*BigInt(Math.round(a*1e3))/1000n;return o+c}function Ch(e){m(e.length>0,"Cannot calculate statistics from empty tip array");const t=e.reduce((f,_)=>_<f?_:f,ca.max),n=e.reduce((f,_)=>_>f?_:f,0n),i=e.reduce((f,_)=>f+_,0n)/BigInt(e.length),a=[...e].sort((f,_)=>f<_?-1:f>_?1:0),o=Math.floor(a.length/2);let s;a.length%2===0?s=(a[o-1]+a[o])/2n:s=a[o];const l=new Map;e.forEach(f=>{l.set(f,(l.get(f)||0)+1)});const{modeTip:c}=Array.from(l.entries()).reduce((f,[_,y])=>y>f.maxCount||y===f.maxCount&&_<f.modeTip?{maxCount:y,modeTip:_}:f,{maxCount:0,modeTip:0n}),u=zl(a,90),h=zl(a,95);return{minTip:t,maxTip:n,averageTip:i,medianTip:s,modeTip:c,recommendedTip:s,p90Tip:u,p95Tip:h}}async function Bh(e,t){try{const n=await e.getBlockWithTxs(t);return W(n.block_number)?n.block_number:(await e.getBlockLatestAccepted()).block_number}catch(n){throw new ye(`Failed to determine starting block number: ${n instanceof Error?n.message:"Unknown error"}`)}}async function m1(e,t){try{return await e.getBlockWithTxs(t)}catch(n){return ge.warn(`Failed to fetch block ${t}:`,n),null}}function Nh(e,t){const n=Math.max(0,e-t+1),r=e-n+1;return Array.from({length:r},(i,a)=>e-a)}async function w1(e,t){const n=t.map(async r=>{try{return await e.getBlockWithTxs(r)}catch(i){return ge.warn(`Failed to fetch block ${r} in parallel:`,i),null}});return Promise.all(n)}async function E1(e,t,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:a=!0}=n;try{const o=await Bh(e,t),s=Nh(o,r),l=await w1(e,s),c=l.filter(d=>d!==null).flatMap(d=>Ih(d,a)),u=l.filter(d=>d!==null).length;return c.length<i?(ge.error(`Insufficient transaction data: found ${c.length} V3 transactions with tips in ${u} blocks (block range: ${Math.max(0,o-r+1)}-${o}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),kh(u,c)):{...Ch(c),metrics:{blocksAnalyzed:u,transactionsTipsFound:c}}}catch(o){throw new ye(`Failed to analyze tip statistics (parallel): ${o instanceof Error?o.message:"Unknown error"}`)}}async function A1(e,t,n){const{maxBlocks:r=3,minTxsNecessary:i=10,includeZeroTips:a=!0}=n;try{const o=await Bh(e,t),s=Nh(o,r),l=[];let c=0;for(const h of s){const d=await m1(e,h);if(d){c+=1;const f=Ih(d,a);if(l.push(...f),l.length>=i)break}}return l.length<i?(ge.error(`Insufficient transaction data: found ${l.length} V3 transactions with tips in ${c} blocks (block range: ${Math.max(0,o-r+1)}-${o}). Required: ${i} transactions. Consider reducing minTxsNecessary or increasing maxBlocks.`),kh(c,l)):{...Ch(l),metrics:{blocksAnalyzed:c,transactionsTipsFound:l}}}catch(o){throw new ye(`Failed to analyze tip statistics (sequential): ${o instanceof Error?o.message:"Unknown error"}`)}}async function T1(e,t=Mt.LATEST,n={}){const{maxBlocks:r=3,minTxsNecessary:i=10}=n;return m(Number.isInteger(r),"maxBlocks parameter must be an integer"),m(r>=1,"maxBlocks parameter must be greater than or equal to 1"),m(r<=100,"maxBlocks parameter must be less than or equal to 100 for performance"),m(Number.isInteger(i),"minTxsNecessary parameter must be an integer"),m(i>=1,"minTxsNecessary parameter must be greater than or equal to 1"),b1(e)?E1(e,t,n):A1(e,t,n)}var jl=class ts{constructor(t){w(this,"statusReceipt");w(this,"value");w(this,"match");w(this,"isSuccess");w(this,"isReverted");w(this,"isError");Object.assign(this,t);const[n,r]=ts.isSuccess(t)?["SUCCEEDED",t]:ts.isReverted(t)?["REVERTED",t]:["ERROR",new Error("Unknown response type")];Object.defineProperties(this,{statusReceipt:{value:n,writable:!1,enumerable:!1,configurable:!1},value:{value:r,writable:!1,enumerable:!1,configurable:!1},match:{value(i){return n in i?i[n](r):i._()},writable:!1,enumerable:!1,configurable:!1},isSuccess:{value:()=>n==="SUCCEEDED",writable:!1,enumerable:!1,configurable:!1},isReverted:{value:()=>n==="REVERTED",writable:!1,enumerable:!1,configurable:!1},isError:{value:()=>n==="ERROR",writable:!1,enumerable:!1,configurable:!1}})}static isSuccess(t){return t.execution_status===ua.SUCCEEDED}static isReverted(t){return t.execution_status===ua.REVERTED}},S1={[ua.SUCCEEDED]:{statusReceipt:"SUCCEEDED",getBaseData:e=>e,getValue:e=>e},[ua.REVERTED]:{statusReceipt:"REVERTED",getBaseData:e=>e,getValue:e=>e}};function ql(e){const t=S1[e.execution_status];let n;if(t){const{statusReceipt:r,getBaseData:i,getValue:a}=t,o=a(e);n={...i(e),statusReceipt:r,value:o,match(s){return r in s?s[r](o):s._()},isSuccess(){return r==="SUCCEEDED"},isReverted(){return r==="REVERTED"},isError(){return!1}}}else{const r=new Error("Unknown response type");n={statusReceipt:"ERROR",value:r,match(i){return"ERROR"in i?i.ERROR(r):i._()},isSuccess(){return!1},isReverted(){return!1},isError(){return!0}}}return Object.setPrototypeOf(n,jl.prototype),Object.defineProperty(n,"constructor",{value:jl,writable:!1,enumerable:!1,configurable:!1}),n}var v1={};G(v1,{encodeData:()=>$h,encodeType:()=>Ph,encodeValue:()=>Zr,getDependencies:()=>Ac,getMessageHash:()=>Tc,getStructHash:()=>fi,getTypeHash:()=>Uh,isMerkleTreeType:()=>Lh,prepareSelector:()=>Dh,validateTypedData:()=>Ka,verifyMessage:()=>C1});var x1={};G(x1,{MerkleTree:()=>Ec,proofMerklePath:()=>Rh});var Ec=class Gi{constructor(t,n=li){w(this,"leaves");w(this,"branches",[]);w(this,"root");w(this,"hashMethod");this.hashMethod=n,this.leaves=t,this.root=this.build(t)}build(t){if(t.length===1)return t[0];t.length!==this.leaves.length&&this.branches.push(t);const n=[];for(let r=0;r<t.length;r+=2)r+1===t.length?n.push(Gi.hash(t[r],"0x0",this.hashMethod)):n.push(Gi.hash(t[r],t[r+1],this.hashMethod));return this.build(n)}static hash(t,n,r=li){const[i,a]=[BigInt(t),BigInt(n)].sort((o,s)=>o>=s?1:-1);return r(i,a)}getProof(t,n=this.leaves,r=[]){const i=n.indexOf(t);if(i===-1)throw new Error("leaf not found");if(n.length===1)return r;const a=i%2===0,o=(a?n[i+1]:n[i-1])??"0x0",s=[...r,o],l=this.leaves.length===n.length?-1:this.branches.findIndex(u=>u.length===n.length),c=this.branches[l+1]??[this.root];return this.getProof(Gi.hash(a?t:o,a?o:t,this.hashMethod),c,s)}};function Rh(e,t,n,r=li){if(n.length===0)return e===t;const[i,...a]=n;return Rh(e,Ec.hash(t,i,r),a,r)}var I1={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Ue={[L.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:dh,hashMerkleMethod:lh,escapeTypeString:e=>`"${e}"`,presetTypes:I1},[L.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:uh,hashMerkleMethod:li,escapeTypeString:e=>e,presetTypes:{}}};function zi(e,t,{min:n,max:r}){const i=BigInt(e);m(i>=n&&i<=r,`${i} (${t}) is out of bounds [${n}, ${r}]`)}function Oh({types:e,domain:t}){var n;if(Ue[L.TypedDataRevision.ACTIVE].domain in e&&((n=t.revision)==null?void 0:n.toString())===L.TypedDataRevision.ACTIVE)return L.TypedDataRevision.ACTIVE;if(Ue[L.TypedDataRevision.LEGACY].domain in e&&(t.revision??L.TypedDataRevision.LEGACY)===L.TypedDataRevision.LEGACY)return L.TypedDataRevision.LEGACY}function wt(e){try{return v(e)}catch{if($(e))return v(ae(e));throw new Error(`Invalid BigNumberish: ${e}`)}}function Ka(e){const t=e;return!!(t.message&&t.primaryType&&t.types&&Oh(t))}function Dh(e){return Fe(e)?e:J(e)}function Lh(e){return e.type==="merkletree"}function Ac(e,t,n=[],r="",i=L.TypedDataRevision.LEGACY){let a=[t];return t[t.length-1]==="*"?a=[t.slice(0,-1)]:i===L.TypedDataRevision.ACTIVE&&(t==="enum"?a=[r]:t.match(/^\(.*\)$/)&&(a=t.slice(1,-1).split(",").map(o=>o[o.length-1]==="*"?o.slice(0,-1):o))),a.filter(o=>!n.includes(o)&&e[o]).reduce((o,s)=>[...o,...[s,...e[s].reduce((l,c)=>[...l,...Ac(e,c.type,l,c.contains,i).filter(u=>!l.includes(u))],[])].filter(l=>!o.includes(l))],[])}function k1(e,t){if(t.parent&&t.key){const r=e[t.parent].find(a=>a.name===t.key);if(!Lh(r))throw new Error(`${t.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return r.contains}return"raw"}function Ph(e,t,n=L.TypedDataRevision.LEGACY){const r=n===L.TypedDataRevision.ACTIVE?{...e,...Ue[n].presetTypes}:e,[i,...a]=Ac(r,t,void 0,void 0,n),o=i?[i,...a.sort()]:[],s=Ue[n].escapeTypeString;return o.map(l=>{const c=r[l].map(u=>{const h=u.type==="enum"&&n===L.TypedDataRevision.ACTIVE?u.contains:u.type,d=h.match(/^\(.*\)$/)?`(${h.slice(1,-1).split(",").map(f=>f&&s(f)).join(",")})`:s(h);return`${s(u.name)}:${d}`});return`${s(l)}(${c})`}).join("")}function Uh(e,t,n=L.TypedDataRevision.LEGACY){return J(Ph(e,t,n))}function Zr(e,t,n,r={},i=L.TypedDataRevision.LEGACY){if(e[t])return[t,fi(e,t,n,i)];if(Ue[i].presetTypes[t])return[t,fi(Ue[i].presetTypes,t,n,i)];if(t.endsWith("*")){const a=n.map(o=>Zr(e,t.slice(0,-1),o,void 0,i)[1]);return[t,Ue[i].hashMethod(a)]}switch(t){case"enum":{if(i===L.TypedDataRevision.ACTIVE){const[a,o]=Object.entries(n)[0],s=e[r.parent].find(d=>d.name===r.key),l=e[s.contains],c=l.find(d=>d.name===a),u=l.indexOf(c),h=c.type.slice(1,-1).split(",").map((d,f)=>{if(!d)return d;const _=o[f];return Zr(e,d,_,void 0,i)[1]});return[t,Ue[i].hashMethod([u,...h])]}return[t,wt(n)]}case"merkletree":{const a=k1(e,r),o=n.map(l=>Zr(e,a,l,void 0,i)[1]),{root:s}=new Ec(o,Ue[i].hashMerkleMethod);return["felt",s]}case"selector":return["felt",Dh(n)];case"string":{if(i===L.TypedDataRevision.ACTIVE){const a=uc(n),o=[a.data.length,...a.data,a.pending_word,a.pending_word_len];return[t,Ue[i].hashMethod(o)]}return[t,wt(n)]}case"i128":{if(i===L.TypedDataRevision.ACTIVE){const a=BigInt(n);return zi(a,t,Wn),[t,wt(a<0n?te+a:a)]}return[t,wt(n)]}case"timestamp":case"u128":return i===L.TypedDataRevision.ACTIVE&&zi(n,t,Kn),[t,wt(n)];case"felt":case"shortstring":return i===L.TypedDataRevision.ACTIVE&&zi(wt(n),t,ca),[t,wt(n)];case"ClassHash":case"ContractAddress":return i===L.TypedDataRevision.ACTIVE&&zi(n,t,ca),[t,wt(n)];case"bool":return i===L.TypedDataRevision.ACTIVE&&m(oi(n),`Type mismatch for ${t} ${n}`),[t,wt(n)];default:{if(i===L.TypedDataRevision.ACTIVE)throw new Error(`Unsupported type: ${t}`);return[t,wt(n)]}}}function $h(e,t,n,r=L.TypedDataRevision.LEGACY){const i=e[t]??Ue[r].presetTypes[t],[a,o]=i.reduce(([s,l],c)=>{if(n[c.name]===void 0||n[c.name]===null&&c.type!=="enum")throw new Error(`Cannot encode data: missing data for '${c.name}'`);const u=n[c.name],h={parent:t,key:c.name},[d,f]=Zr(e,c.type,u,h,r);return[[...s,d],[...l,f]]},[["felt"],[Uh(e,t,r)]]);return[a,o]}function fi(e,t,n,r=L.TypedDataRevision.LEGACY){return Ue[r].hashMethod($h(e,t,n,r)[1])}function Tc(e,t){if(!Ka(e))throw new Error("Typed data does not match JSON schema");const n=Oh(e),{domain:r,hashMethod:i}=Ue[n],a=[ae("StarkNet Message"),fi(e.types,r,e.domain,n),t,fi(e.types,e.primaryType,e.message,n)];return i(a)}function C1(e,t,n,r){const i=Ka(e);if(!Nn(e)&&!i)throw new Error("message has a wrong format.");if(i&&r===void 0)throw new Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(i&&!Nn(r))throw new Error("accountAddress shall be a BigNumberish");const a=i?Tc(e,r):v(e),o=Array.isArray(t)?new zr(BigInt(t[0]),BigInt(t[1])):t,s=v(n);return vd(o,a,s)}async function B1(e,t,n,r,i,a){const o=Ka(t);if(!Nn(t)&&!o)throw new Error("message has a wrong format.");if(!Nn(r))throw new Error("accountAddress shall be a BigNumberish");const s=o?Tc(t,r):v(t),l=i?[i]:["isValidSignature","is_valid_signature"],c=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};let u;for(const h of l)try{const d=await e.callContract({contractAddress:v(r),entrypoint:h,calldata:Z.compile({hash:He(s).toString(),signature:Ci(n)})});if(c.nokResponse.includes(d[0].toString()))return!1;if(c.okResponse.length===0||c.okResponse.includes(d[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(d){if(c.error.some(f=>d.message.includes(f)))return!1;u=d}throw Error(`Signature verification Error: ${u}`)}async function N1(e,t=e.blockIdentifier){const n=await e.getBlockWithTxHashes(t);return{l1DataGasPrice:BigInt(n.l1_data_gas_price.price_in_fri),l1GasPrice:BigInt(n.l1_gas_price.price_in_fri),l2GasPrice:BigInt(n.l2_gas_price.price_in_fri)}}var Vh=class{constructor(e){w(this,"responseParser");w(this,"channel");w(this,"getStateUpdate",this.getBlockStateUpdate);if(e&&"channel"in e)this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new Fl;else{const t=e;if(t&&t.specVersion)if($t("0.8",t.specVersion))this.channel=new Pr.RpcChannel({...t,waitMode:!1});else if($t("0.9",t.specVersion))this.channel=new Zn.RpcChannel({...t,waitMode:!1});else throw new Error(`unsupported channel for spec version: ${t.specVersion}`);else if($t("0.8",Nt.get("rpcVersion")))this.channel=new Pr.RpcChannel({...t,waitMode:!1});else if($t("0.9",Nt.get("rpcVersion")))this.channel=new Zn.RpcChannel({...t,waitMode:!1});else throw new Error("unable to define spec version for channel");this.responseParser=new Fl(t==null?void 0:t.resourceBoundsOverhead)}}static async create(e){const n=await new Pr.RpcChannel({...e}).getSpecVersion();if(mc(n)||ge.warn(`Using incompatible node spec version ${n}`),$t("0.8",n))return new this({...e,specVersion:rn.v0_8_1});if($t("0.9",n))return new this({...e,specVersion:rn.v0_9_0});throw new ye(`Provided RPC node specification version ${n} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(rn).toString()}`)}fetch(e,t,n=0){return this.channel.fetch(e,t,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e=Mt.LATEST,t=5e3){if(e===Mt.LATEST||e==="pending")return;const n=await this.getBlockNumber(),r=e===Mt.PRE_CONFIRMED?n+1:Number(v(e));if(r<=n)return;const{retries:i}=this.channel;let a=i,o=!1;for(;!o;)if(await this.getBlockNumber()===r?o=!0:await Jt(t),a-=1,a<=0)throw new Error(`waitForBlock() timed-out after ${i} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getGasPrices(e=this.channel.blockIdentifier){if(this.channel instanceof Zn.RpcChannel)return N1(this.channel,e);throw new ye("Unsupported method for RPC version")}async getL1MessageHash(e){const t=await this.channel.getTransactionByHash(e);m(t.type==="L1_HANDLER","This L2 transaction is not a L1 message.");const{calldata:n,contract_address:r,entry_point_selector:i,nonce:a}=t,o=[n[0],r,a,i,n.length-1,...n.slice(1)];return Si(o)}async getBlockWithReceipts(e){return this.channel.getBlockWithReceipts(e)}async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){const t=await this.channel.getTransactionReceipt(e),n=this.responseParser.parseTransactionReceipt(t);return ql(n)}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(n=>this.responseParser.parseSimulateTransactionResponse(n))}async waitForTransaction(e,t){const n=await this.channel.waitForTransaction(e,t);return ql(n)}async fastWaitForTransaction(e,t,n,r){if(this.channel instanceof Zn.RpcChannel)return await this.channel.fastWaitForTransaction(e,t,n,r);throw new Error("Unsupported channel type")}async getStorageAt(e,t,n){return this.channel.getStorageAt(e,t,n)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:n=this.channel.blockIdentifier,compiler:r=!0}={}){let i;if(e)i=await this.getClassAt(e,n);else if(t)i=await this.getClass(t,n);else throw Error("getContractVersion require contractAddress or classHash");return fr(i)?r?{cairo:"1",compiler:hc(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(e,t,n,r){return(await this.getEstimateFeeBulk([{type:L.ETransactionType.INVOKE,...e,...t}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeclareEstimateFee(e,t,n,r){return(await this.getEstimateFeeBulk([{type:L.ETransactionType.DECLARE,...e,...t}],{blockIdentifier:n,skipValidate:r}))[0]}async getDeployAccountEstimateFee(e,t,n,r){return(await this.getEstimateFeeBulk([{type:L.ETransactionType.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:n,skipValidate:r}))[0]}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(n=>this.responseParser.parseFeeEstimateBulkResponse(n))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){if(this.channel instanceof Pr.RpcChannel)return this.channel.getEvents(e);if(this.channel instanceof Zn.RpcChannel)return this.channel.getEvents(e);throw new Error("Unsupported channel type")}async verifyMessageInStarknet(e,t,n,r,i){return B1(this,e,t,n,r,i)}async isClassDeclared(e,t){let n;if(!e.classHash&&"contract"in e)n=r1(e).classHash;else if(e.classHash)n=e.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(n,t)instanceof Object}catch(r){if(r instanceof ye)return!1;throw r}}async prepareInvocations(e){const t=[];for(const n of e)n.type===L.ETransactionType.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||t.unshift(n):t.push(n);return t}async getL1MessagesStatus(e){return this.channel.getMessagesStatus(e)}async getStorageProof(e,t,n,r){return this.channel.getStorageProof(e,t,n,r)}async getCompiledCasm(e){return this.channel.getCompiledCasm(e)}async getEstimateTip(e,t={}){return T1(this,e,t)}},R1={};G(R1,{StarknetIdContract:()=>is,StarknetIdIdentityContract:()=>as,StarknetIdMulticallContract:()=>os,StarknetIdPfpContract:()=>cs,StarknetIdPopContract:()=>ls,StarknetIdVerifierContract:()=>ss,dynamicCallData:()=>F,dynamicFelt:()=>le,execution:()=>Et,getStarknetIdContract:()=>Ki,getStarknetIdIdentityContract:()=>Mh,getStarknetIdMulticallContract:()=>Hh,getStarknetIdPfpContract:()=>zh,getStarknetIdPopContract:()=>jh,getStarknetIdVerifierContract:()=>Fh,isStarkDomain:()=>qh,useDecoded:()=>wa,useEncoded:()=>Sc});var vt="abcdefghijklmnopqrstuvwxyz0123456789-",Jn=BigInt(vt.length+1),ie="这来",Yl=BigInt(vt.length),ns=BigInt(ie.length),Zl=BigInt(ie.length+1);function rs(e){let t=0;for(;e.endsWith(ie[ie.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function wa(e){let t="";return e.forEach(n=>{for(;n!==xe;){const a=n%Jn;if(n/=Jn,a===BigInt(vt.length)){const o=n/Zl;if(o===xe){const s=n%Zl;n=o,s===xe?t+=vt[0]:t+=ie[Number(s)-1]}else{const s=n%ns;t+=ie[Number(s)],n/=ns}}else t+=vt[Number(a)]}const[r,i]=rs(t);i&&(t=r+(i%2===0?ie[ie.length-1].repeat(i/2-1)+ie[0]+vt[1]:ie[ie.length-1].repeat((i-1)/2+1))),t+="."}),t&&t.concat("stark")}function Sc(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith(ie[0]+vt[1])){const[r,i]=rs(e.substring(0,e.length-2));e=r+ie[ie.length-1].repeat(2*(i+1))}else{const[r,i]=rs(e);i&&(e=r+ie[ie.length-1].repeat(1+2*(i-1)))}for(let r=0;r<e.length;r+=1){const i=e[r],a=vt.indexOf(i),o=BigInt(vt.indexOf(i));if(a!==-1)r===e.length-1&&e[r]===vt[0]?(t+=n*Yl,n*=Jn,n*=Jn):(t+=n*o,n*=Jn);else if(ie.indexOf(i)!==-1){t+=n*Yl,n*=Jn;const s=(r===e.length-1?1:0)+ie.indexOf(i);t+=n*BigInt(s),n*=ns}}return t}var is={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function Ki(e){switch(e){case ke.SN_MAIN:return is.MAINNET;case ke.SN_SEPOLIA:return is.TESTNET_SEPOLIA;default:throw new Error("Starknet.id is not yet deployed on this network")}}var as={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function Mh(e){switch(e){case ke.SN_MAIN:return as.MAINNET;case ke.SN_SEPOLIA:return as.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var os="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function Hh(e){switch(e){case ke.SN_MAIN:return os;case ke.SN_SEPOLIA:return os;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var ss={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function Fh(e){switch(e){case ke.SN_MAIN:return ss.MAINNET;case ke.SN_SEPOLIA:return ss.TESTNET_SEPOLIA;default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var cs={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function zh(e){switch(e){case ke.SN_MAIN:return cs.MAINNET;case ke.SN_SEPOLIA:return cs.TESTNET_SEPOLIA;default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var ls={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function jh(e){switch(e){case ke.SN_MAIN:return ls.MAINNET;case ke.SN_SEPOLIA:return ls.TESTNET_SEPOLIA;default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function Et(e,t=void 0,n=void 0){return new Ii({Static:e,IfEqual:t?dr(t[0],t[1],t[2]):void 0,IfNotEqual:n?dr(n[0],n[1],n[2]):void 0})}function le(e,t=void 0){return new Ii({Hardcoded:e,Reference:t?dr(t[0],t[1]):void 0})}function F(e,t=void 0,n=void 0){return new Ii({Hardcoded:e,Reference:t?dr(t[0],t[1]):void 0,ArrayReference:n?dr(n[0],n[1]):void 0})}function qh(e){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e)}var O1=class Wi{async getStarkName(t,n){return Wi.getStarkName(this,t,n)}async getAddressFromStarkName(t,n){return Wi.getAddressFromStarkName(this,t,n)}async getStarkProfile(t,n,r,i,a,o,s){return Wi.getStarkProfile(this,t,n,r,i,a,o,s)}static async getStarkName(t,n,r){const i=await t.getChainId(),a=r??Ki(i);try{const s=(await t.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:Z.compile({address:n,hint:[]})})).map(c=>BigInt(c)).slice(1),l=wa(s);if(!l)throw Error("Starkname not found");return l}catch(o){throw o instanceof Error&&o.message==="Starkname not found"?o:Error("Could not get stark name")}}static async getAddressFromStarkName(t,n,r){const i=n.endsWith(".stark")?n:`${n}.stark`;if(!qh(i))throw new Error("Invalid domain, must be a valid .stark domain");const a=await t.getChainId(),o=r??Ki(a);try{const s=i.replace(".stark","").split(".").map(c=>Sc(c).toString(10));return(await t.callContract({contractAddress:o,entrypoint:"domain_to_address",calldata:Z.compile({domain:s,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(t,n,r,i,a,o,s,l){const c=await t.getChainId(),u=r??Ki(c),h=i??Mh(c),d=a??Fh(c),f=o??zh(c),_=s??jh(c),y=l??Hh(c);try{const g=[{execution:Et({}),to:F(u),selector:F(J("address_to_domain")),calldata:[F(n),F("0")]},{execution:Et({}),to:le(u),selector:le(J("domain_to_id")),calldata:[F(void 0,void 0,[0,0])]},{execution:Et({}),to:le(h),selector:le(J("get_verifier_data")),calldata:[F(void 0,[1,0]),F(ae("twitter")),F(d),F("0")]},{execution:Et({}),to:le(h),selector:le(J("get_verifier_data")),calldata:[F(void 0,[1,0]),F(ae("github")),F(d),F("0")]},{execution:Et({}),to:le(h),selector:le(J("get_verifier_data")),calldata:[F(void 0,[1,0]),F(ae("discord")),F(d),F("0")]},{execution:Et({}),to:le(h),selector:le(J("get_verifier_data")),calldata:[F(void 0,[1,0]),F(ae("proof_of_personhood")),F(_),F("0")]},{execution:Et({}),to:le(h),selector:le(J("get_verifier_data")),calldata:[F(void 0,[1,0]),F(ae("nft_pp_contract")),F(f),F("0")]},{execution:Et({}),to:le(h),selector:le(J("get_extended_verifier_data")),calldata:[F(void 0,[1,0]),F(ae("nft_pp_id")),F("2"),F(f),F("0")]},{execution:Et(void 0,void 0,[6,0,0]),to:le(void 0,[6,0]),selector:le(J("tokenURI")),calldata:[F(void 0,[7,1]),F(void 0,[7,2])]}],p=await t.callContract({contractAddress:y,entrypoint:"aggregate",calldata:Z.compile({calls:g})});if(Array.isArray(p)){const A=parseInt(p[0],16),E=[];let b=1;for(let P=0;P<A&&b<p.length;P+=1){const q=parseInt(p[b],16);b+=1;const T=p.slice(b,b+q);E.push(T),b+=q}const C=wa(E[0].slice(1).map(P=>BigInt(P))),N=E[2][0]!=="0x0"?BigInt(E[2][0]).toString():void 0,S=E[3][0]!=="0x0"?BigInt(E[3][0]).toString():void 0,k=E[4][0]!=="0x0"?BigInt(E[4][0]).toString():void 0,x=E[5][0]==="0x1",B=(p[0]==="0x9"?E[8].slice(1).map(P=>lr(P)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(E[1][0]).toString()}`;return{name:C,twitter:N,github:S,discord:k,proofOfPersonhood:x,profilePicture:B}}throw Error("Error while calling aggregate function")}catch(g){throw g instanceof Error?g:Error("Could not get user stark profile data from address")}}};function D1(e){return e.endsWith(".brother")}function Gl(e){const t=e.endsWith(".brother")?e.replace(".brother",""):e;return Sc(t)}function Kl(e){const t=wa([e]);return t.endsWith(".stark")?t.replace(".stark",".brother"):t&&`${t}.brother`}function ko(e){switch(e){case ke.SN_MAIN:return"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74";default:return"0x0212f1c57700f5a3913dd11efba540196aad4cf67772f7090c62709dd804fa74"}}var L1=class Xi{async getBrotherName(t,n){return Xi.getBrotherName(this,t,n)}async getAddressFromBrotherName(t,n){return Xi.getAddressFromBrotherName(this,t,n)}async getBrotherProfile(t,n){return Xi.getBrotherProfile(this,t,n)}static async getBrotherName(t,n,r){const i=await t.getChainId(),a=r??ko(i);try{const o=await t.callContract({contractAddress:a,entrypoint:"getPrimary",calldata:Z.compile({user:n})});if(!o[0]||o[0]==="0x0")throw Error("Brother name not found");const s=BigInt(o[0]);return Kl(s)}catch(o){throw o instanceof Error&&o.message==="Brother name not found"?o:Error("Could not get brother name")}}static async getAddressFromBrotherName(t,n,r){const i=n.endsWith(".brother")?n:`${n}.brother`;if(!D1(i))throw new Error("Invalid domain, must be a valid .brother domain");const a=await t.getChainId(),o=r??ko(a);try{const s=await t.callContract({contractAddress:o,entrypoint:"get_details_by_domain",calldata:Z.compile({domain:Gl(i)})});if(!s[0]||s[1]==="0x0")throw Error("Could not get address from brother name");return s[1]}catch{throw Error("Could not get address from brother name")}}static async getBrotherProfile(t,n,r){const i=await t.getChainId(),a=r??ko(i);try{const o=await t.callContract({contractAddress:a,entrypoint:"getPrimary",calldata:Z.compile({user:n})});if(!o[0]||o[0]==="0x0")throw Error("Brother profile not found");const s=BigInt(o[0]),c=Kl(s).replace(".brother",""),u=await t.callContract({contractAddress:a,entrypoint:"get_details_by_domain",calldata:Z.compile({domain:Gl(c)})});return{name:c,resolver:u[1],tokenId:u[2],expiryDate:parseInt(u[3],16),lastTransferTime:parseInt(u[4],16)}}catch(o){throw o instanceof Error&&o.message==="Brother profile not found"?o:Error("Could not get brother profile")}}};(class extends Qy(Vh,O1,L1){});new Vh({default:!0});var P1={};G(P1,{bnToUint256:()=>V1,isUint256:()=>$1,uint256ToBN:()=>U1});function U1(e){return new he(e).toBigInt()}function $1(e){return he.is(e)}function V1(e){return new he(e).toUint256HexString()}function M1(e){const t=v($(e)?D(e):e),n=_e(t).padStart(64,"0");return D(n)}function H1(e){const t=M1(e);if(!t.match(/^(0x)?[0-9a-fA-F]{64}$/))throw new Error("Invalid Address Format");return nc(t,xe,ec-1n,"Starknet Address"),t}function Ew(e){const t=_e(H1(e)).toLowerCase().split(""),n=_e(ic(e)),r=Ft(n.padStart(64,"0"));for(let i=0;i<t.length;i+=2)r[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(r[i>>1]&15)>=8&&(t[i+1]=t[i+1].toUpperCase());return D(t.join(""))}var F1={};G(F1,{buildExecuteFromOutsideCall:()=>j1,buildExecuteFromOutsideCallData:()=>Zh,getOutsideCall:()=>Yh,getTypedData:()=>z1,toOutsideCallV2:()=>Wa});function Wa(e){return"calldata_len"in e?{To:e.to,Selector:e.selector,Calldata:e.calldata}:e}function Yh(e){const t=e.calldata??[],n=Array.isArray(t)?t:Z.compile(t);return{to:e.contractAddress,selector:J(e.entrypoint),calldata:n}}function Wl(e,t){const n=Yh(e);return t==="1"?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function Xl(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,...t==="2"?{revision:"1"}:{}}}function z1(e,t,n,r,i){return i==="1"?{types:xb,primaryType:"OutsideExecution",domain:Xl(e,i),message:{...t,nonce:n,calls_len:r.length,calls:r.map(a=>Wl(a,i))}}:{types:Ib,primaryType:"OutsideExecution",domain:Xl(e,i),message:{Caller:t.caller,Nonce:n,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:r.map(a=>Wl(a,i))}}}function Zh(e){const t=e.outsideExecution,n=Ci(e.signature);return Z.compile({outside_execution:t,signature:n})}function j1(e){return(Array.isArray(e)?e:[e]).map(r=>{let i;if(r.version===$l.V1)i="execute_from_outside";else if(r.version===$l.V2)i="execute_from_outside_v2";else throw new Error("Unsupported OutsideExecution version");return{contractAddress:v(r.signerAddress),entrypoint:i,calldata:Zh(r)}})}var q1={};G(q1,{supportsInterface:()=>Y1});async function Y1(e,t,n){const r={contractAddress:v(t),entrypoint:"supports_interface",calldata:[v(n)]};try{const i=await e.callContract(r);return BigInt(i[0])!==0n}catch{return!1}}var Z1={};G(Z1,{assertCallsAreStrictlyEqual:()=>Gh,assertPaymasterTransactionSafety:()=>W1,getDefaultPaymasterNodeUrl:()=>Ji});var Ji=(e,t=!1)=>{t||ge.info("Using default public node url, please provide nodeUrl in provider options!");const n=$f[e??mr.SN_SEPOLIA],r=Math.floor(Math.random()*n.length);return n[r]},G1=(e,t)=>{const n=Wa(e[e.length-1]),i=Z.toCalldata(n.Calldata)[1];m(BigInt(i)===BigInt(t),"Gas token value is not equal to the provided gas fees")},K1=(e,t)=>{const n=Wa(e[e.length-1]);m(BigInt(n.To)===BigInt(t),"Gas token address is not equal to the provided gas token")};function Gh(e,t){const n="Provided calls are not strictly equal to the returned calls";m(t.length-1===e.length,`${n}: Expected ${e.length+1} calls, got ${t.length}`);for(let r=0;r<e.length;r+=1){const i=e[r],a=Wa(t[r]),o=h=>He(h).toString(16).toLowerCase(),s=o(i.contractAddress),l=o(a.To);m(s===l,`${n}: Contract address mismatch at call ${r}. Expected: ${i.contractAddress}, Got: ${a.To}`),m(J(i.entrypoint)===a.Selector,`${n}: Entrypoint mismatch at call ${r}. Expected: ${i.entrypoint}, Got: ${a.Selector}`);const c=Z.toCalldata(i.calldata),u=Z.toCalldata(a.Calldata);m(c.length===u.length,`${n}: Calldata length mismatch at call ${r}. Expected length: ${c.length}, Got length: ${u.length}`);for(let h=0;h<c.length;h+=1){const d=BigInt(c[h]),f=BigInt(u[h]);m(d===f,`${n}: Calldata value mismatch at call ${r}, parameter ${h}. Expected: ${c[h]}, Got: ${u[h]}`)}}}var W1=(e,t,n,r)=>{if(n.feeMode.mode!=="sponsored"&&(e.type==="invoke"||e.type==="deploy_and_invoke")){const i="calls"in e.typed_data.message?e.typed_data.message.calls:e.typed_data.message.Calls;Gh(t,i),K1(i,n.feeMode.gasToken),r&&(m(e.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),G1(i,e.fee.suggested_max_fee_in_gas_token))}},Jl=e=>e.map(t=>({to:t.contractAddress,selector:J(t.entrypoint),calldata:Z.toHex(t.calldata)})),Ql=e=>e.mode==="sponsored"?{mode:"sponsored"}:{mode:"default",gas_token:e.gasToken},X1=e=>e.mode==="sponsored"?{mode:"sponsored"}:{mode:"default",gasToken:e.gas_token},eu=e=>e?{execute_after:e.executeAfter||1,execute_before:e.executeBefore}:void 0,J1=e=>e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0,Co=e=>({version:e.version,feeMode:X1(e.fee_mode),timeBounds:J1(e.time_bounds)}),Bo={headers:{"Content-Type":"application/json"}},Q1=class Kh{constructor(t){w(this,"nodeUrl");w(this,"headers");w(this,"baseFetch");w(this,"requestId");if(t instanceof Kh){this.nodeUrl=t.nodeUrl,this.headers={...Bo.headers,...t.headers},this.baseFetch=t.baseFetch,this.requestId=t.requestId;return}if(t&&"nodeUrl"in t&&"headers"in t&&"baseFetch"in t){this.nodeUrl=t.nodeUrl??Ji(void 0),this.headers={...Bo.headers,...t.headers},this.baseFetch=t.baseFetch??ma,this.requestId=0;return}const{nodeUrl:n,headers:r,baseFetch:i}=t||{};n&&Object.values(mr).includes(n)?this.nodeUrl=Ji(n,t==null?void 0:t.default):n?this.nodeUrl=n:this.nodeUrl=Ji(void 0,t==null?void 0:t.default),this.baseFetch=i??ma,this.headers={...Bo.headers,...r},this.requestId=0}fetch(t,n,r=0){const i={id:r,jsonrpc:"2.0",method:t,...n&&{params:n}};return this.baseFetch(this.nodeUrl,{method:"POST",body:lt(i),headers:this.headers})}errorHandler(t,n,r,i){if(r)throw new ci(r,t,n);if(i instanceof ye)throw i;if(i)throw Error(i.message)}async fetchEndpoint(t,n){var r;try{this.requestId+=1;const i=await this.fetch(t,n,this.requestId),{error:a,result:o}=await i.json();return this.errorHandler(t,n,a),o}catch(i){throw this.errorHandler(t,n,(r=i==null?void 0:i.response)==null?void 0:r.data,i),i}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(t,n){let r;switch(t.type){case"invoke":r={...t,invoke:{user_address:t.invoke.userAddress,calls:Jl(t.invoke.calls)}};break;case"deploy_and_invoke":r={...t,invoke:{user_address:t.invoke.userAddress,calls:Jl(t.invoke.calls)}};break;case"deploy":default:r=t;break}const i={version:n.version,fee_mode:Ql(n.feeMode),time_bounds:eu(n.timeBounds)},a=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:r,parameters:i}),o={gas_token_price_in_strk:BigInt(a.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(a.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(a.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(a.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(a.fee.suggested_max_fee_in_gas_token)};switch(a.type){case"invoke":return{type:"invoke",typed_data:a.typed_data,parameters:Co(a.parameters),fee:o};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:a.deployment,typed_data:a.typed_data,parameters:Co(a.parameters),fee:o};case"deploy":default:return{type:"deploy",deployment:a.deployment,parameters:Co(a.parameters),fee:o}}}async executeTransaction(t,n){let r;switch(t.type){case"invoke":r={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:Xt(t.invoke.signature)}};break;case"deploy_and_invoke":r={...t,invoke:{user_address:t.invoke.userAddress,typed_data:t.invoke.typedData,signature:Xt(t.invoke.signature)}};break;case"deploy":default:r=t;break}const i={version:n.version,fee_mode:Ql(n.feeMode),time_bounds:eu(n.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:r,parameters:i})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(t=>t.map(n=>({token_address:n.token_address,decimals:n.decimals,priceInStrk:BigInt(n.price_in_strk)})))}};new Q1({default:!0});var ew={};G(ew,{addDeclareTransaction:()=>lw,addInvokeTransaction:()=>cw,addStarknetChain:()=>iw,deploymentData:()=>sw,getPermissions:()=>nw,onAccountChange:()=>fw,onNetworkChanged:()=>hw,requestAccounts:()=>tw,requestChainId:()=>ow,signMessage:()=>uw,supportedSpecs:()=>dw,switchStarknetChain:()=>aw,watchAsset:()=>rw});function tw(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function nw(e){return e.request({type:"wallet_getPermissions"})}function rw(e,t){return e.request({type:"wallet_watchAsset",params:t})}function iw(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function aw(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function ow(e){return e.request({type:"wallet_requestChainId"})}function sw(e){return e.request({type:"wallet_deploymentData"})}function cw(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function lw(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function uw(e,t){return e.request({type:"wallet_signTypedData",params:t})}function dw(e){return e.request({type:"wallet_supportedSpecs"})}function fw(e,t){e.on("accountsChanged",t)}function hw(e,t){e.on("networkChanged",t)}var gw={};G(gw,{getAbiEvents:()=>yw,isAbiEvent:()=>us,parseEvents:()=>bw});function us(e){return e.type==="event"}function _w(e){return e.filter(t=>t.type==="event").reduce((t,n)=>{const r=n.name,i={...n};return i.name=r,{...t,[D(on(Bn(r)).toString(16))]:i}},{})}function pw(e){const t=e.filter(i=>us(i)&&i.kind==="struct"),n=e.filter(i=>us(i)&&i.kind==="enum");return t.reduce((i,a)=>{let o=[],{name:s}=a,l=!1;const c=d=>d.type===s;for(;;){const d=n.find(_=>_.variants.some(c));if(pe(d))break;const f=d.variants.find(c);o.unshift(f.name),f.kind==="flat"&&(l=!0),s=d.name}if(o.length===0)throw new Error("inconsistency in ABI events definition.");l&&(o=[o[o.length-1]]);const u=o.pop();let h={[D(on(Bn(u)).toString(16))]:a};for(;o.length>0;)h={[D(on(Bn(o.pop())).toString(16))]:h};return h={...h},Wh(i,h)},{})}function yw(e){return fc(e)?pw(e):_w(e)}function Wh(e,t){const n={...e};return K(e)&&K(t)&&Object.keys(t).forEach(r=>{K(t[r])?r in e?n[r]=Wh(e[r],t[r]):Object.assign(n,{[r]:t[r]}):Object.assign(n,{[r]:t[r]})}),n}function bw(e,t,n,r,i){return e.flat().reduce((o,s)=>{var y,g;const l=JSON.parse(JSON.stringify(s));let c=t[l.keys.shift()??0];if(!c)return o;for(;!c.name;){const p=l.keys.shift();m(!!p,'Not enough data in "keys" property of this event.'),c=c[p]}const u={};u[c.name]={};const h=l.keys[Symbol.iterator](),d=l.data[Symbol.iterator](),f=((y=c.members)==null?void 0:y.filter(p=>p.kind==="key"))||c.keys,_=((g=c.members)==null?void 0:g.filter(p=>p.kind==="data"))||c.data;return f.forEach(p=>{u[c.name][p.name]=pa({responseIterator:h,output:p,structs:n,enums:r,parser:i,parsedResult:u[c.name]})}),_.forEach(p=>{u[c.name][p.name]=pa({responseIterator:d,output:p,structs:n,enums:r,parser:i,parsedResult:u[c.name]})}),"block_hash"in l&&(u.block_hash=l.block_hash),"block_number"in l&&(u.block_number=l.block_number),"transaction_hash"in l&&(u.transaction_hash=l.transaction_hash),o.push(u),o},[])}L.TypedDataRevision;export{M1 as a,ib as c,Ew as g};
