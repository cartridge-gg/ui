{"version":3,"file":"row.js","sourceRoot":"","sources":["../../../../../src/components/modules/leaderboard/row/row.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  BronzeTagIcon,\n  GoldTagIcon,\n  SilverTagIcon,\n  SparklesIcon,\n  LeaderboardUsername,\n} from \"@/index\";\nimport { cn } from \"@/utils\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { FollowerMark } from \"../../followers/mark\";\n\nexport interface LeaderboardRowProps\n  extends React.HTMLAttributes<HTMLDivElement> {\n  rank: number;\n  name: string;\n  points: number;\n  icon?: string;\n  highlight?: boolean;\n  following?: boolean;\n}\n\nexport const LeaderboardRow = ({\n  rank,\n  name,\n  points,\n  icon,\n  highlight,\n  following,\n  className,\n  onClick,\n  ...props\n}: LeaderboardRowProps) => {\n  const [sticky, setSticky] = useState(false);\n  const ref = useRef(null);\n\n  const Tag = useMemo(() => {\n    switch (rank) {\n      case 1:\n        return <GoldTagIcon size=\"sm\" />;\n      case 2:\n        return <SilverTagIcon size=\"sm\" />;\n      case 3:\n        return <BronzeTagIcon size=\"sm\" />;\n      default:\n        return null;\n    }\n  }, [rank]);\n\n  useEffect(() => {\n    const cachedRef = ref.current;\n    if (!highlight || !cachedRef) return;\n    // If the component is sticked to the top or bottom of its parent\n    // we need to add a border to the top or bottom of the component\n    const options = { threshold: [1] };\n    const observer = new IntersectionObserver(([entry]) => {\n      setSticky(entry.intersectionRatio < 1);\n    }, options);\n    observer.observe(cachedRef);\n    return () => {\n      if (cachedRef) observer.unobserve(cachedRef);\n    };\n  }, [ref, highlight]);\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"min-h-11 flex select-none py-2.5 px-3 justify-between bg-background-200 text-foreground-400 transition-colors border-y border-transparent\",\n        !!onClick &&\n          \"group hover:bg-background-300 hover:text-foreground-300 cursor-pointer\",\n        highlight &&\n          \"bg-background-300 text-foreground-300 sticky top-[-1px] bottom-[-1px] z-10\",\n        highlight && sticky && \"border-spacer-100\",\n        className,\n      )}\n      {...props}\n    >\n      <div className=\"flex gap-x-2 items-center\">\n        <div className=\"flex w-11 justify-between items-center\">\n          <p className=\"text-sm\">{`${rank}.`}</p>\n          {Tag}\n        </div>\n        <LeaderboardUsername\n          username={name}\n          icon={icon}\n          highlight={highlight}\n        />\n      </div>\n      <div className=\"flex gap-x-3 items-center\">\n        {following !== undefined && (\n          <FollowerMark\n            active={following}\n            variant=\"default\"\n            className={highlight ? \"hidden\" : \"\"}\n          />\n        )}\n        <div\n          className={cn(\n            \"flex gap-1 min-w-14 justify-end\",\n            highlight ? \"text-primary\" : \"text-foreground-100\",\n          )}\n        >\n          <SparklesIcon variant={highlight ? \"solid\" : \"line\"} size=\"sm\" />\n          <p className=\"text-sm\">{points}</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default LeaderboardRow;\n"]}