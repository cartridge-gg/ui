{"version":3,"file":"share.js","sourceRoot":"","sources":["../../../../../src/components/modules/achievements/share/share.tsx"],"names":[],"mappings":";AAAA,OAAO,EAAE,MAAM,EAAE,KAAK,EAAE,MAAM,SAAS,CAAC;AACxC,OAAO,EAAE,WAAW,EAAE,OAAO,EAAE,MAAM,OAAO,CAAC;AAY7C,MAAM,UAAU,gBAAgB,CAAC,EAC/B,QAAQ,EACR,OAAO,EACP,OAAO,EACP,SAAS,EACT,MAAM,EACN,UAAU,EACV,KAAK,GACiB;IACtB,MAAM,GAAG,GAAkB,OAAO,CAAC,GAAG,EAAE;QACtC,IAAI,CAAC,OAAO;YAAE,OAAO,IAAI,CAAC;QAC1B,OAAO,OAAO,CAAC;IACjB,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;IAEd,MAAM,OAAO,GAAG,OAAO,CAAC,GAAG,EAAE;QAC3B,IAAI,CAAC,OAAO;YAAE,OAAO,IAAI,CAAC;QAC1B,gCAAgC;QAChC,OAAO,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;IAClC,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;IAEd,MAAM,IAAI,GAAG,OAAO,CAAC,GAAG,EAAE;QACxB,IAAI,CAAC,SAAS;YAAE,OAAO,IAAI,CAAC;QAC5B,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC;QACxC,OAAO,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE;YACtC,IAAI,EAAE,SAAS;YACf,KAAK,EAAE,OAAO;YACd,GAAG,EAAE,SAAS;SACf,CAAC,CAAC;IACL,CAAC,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC;IAEhB,MAAM,WAAW,GAAG,WAAW,CAAC,GAAG,EAAE;QACnC,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO;YAAE,OAAO;QAC7B,MAAM,OAAO,GAAG,YAAY,MAAM,2BAA2B,KAAK,QAAQ,OAAO,UAAU,UAAU;;YAE7F,CAAC;QAET,MAAM,UAAU,GAAG,mCAAmC,kBAAkB,CACtE,OAAO,CACR,QAAQ,kBAAkB,CAAC,GAAG,CAAC,EAAE,CAAC;QAEnC,MAAM,CAAC,IAAI,CAAC,UAAU,EAAE,QAAQ,EAAE,qBAAqB,CAAC,CAAC;IAC3D,CAAC,EAAE,CAAC,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,CAAC,CAAC,CAAC;IAEpD,OAAO,CACL,KAAC,MAAM,IACL,OAAO,EAAC,UAAU,EAClB,IAAI,EAAC,MAAM,EACX,SAAS,EAAC,MAAM,EAChB,QAAQ,EAAE,QAAQ,EAClB,OAAO,EAAE,WAAW,YAEpB,KAAC,KAAK,IAAC,IAAI,EAAC,IAAI,GAAG,GACZ,CACV,CAAC;AACJ,CAAC;AAED,eAAe,gBAAgB,CAAC","sourcesContent":["import { Button, XIcon } from \"@/index\";\nimport { useCallback, useMemo } from \"react\";\n\nexport interface AchievementShareProps {\n  website?: string;\n  twitter?: string;\n  timestamp?: number;\n  points?: number;\n  difficulty?: number;\n  title?: string;\n  disabled?: boolean;\n}\n\nexport function AchievementShare({\n  disabled,\n  website,\n  twitter,\n  timestamp,\n  points,\n  difficulty,\n  title,\n}: AchievementShareProps) {\n  const url: string | null = useMemo(() => {\n    if (!website) return null;\n    return website;\n  }, [website]);\n\n  const xhandle = useMemo(() => {\n    if (!twitter) return null;\n    // Take the last part of the url\n    return twitter.split(\"/\").pop();\n  }, [twitter]);\n\n  const date = useMemo(() => {\n    if (!timestamp) return null;\n    const date = new Date(timestamp * 1000);\n    return date.toLocaleDateString(\"en-US\", {\n      year: \"numeric\",\n      month: \"short\",\n      day: \"numeric\",\n    });\n  }, [timestamp]);\n\n  const handleShare = useCallback(() => {\n    if (!url || !xhandle) return;\n    const content = `I earned ${points} points by unlocking 🏆 ${title} in @${xhandle}. Only ${difficulty}% of players have earned this achievement.\n\nPlay now 👇`;\n\n    const twitterUrl = `https://x.com/intent/tweet?text=${encodeURIComponent(\n      content,\n    )}&url=${encodeURIComponent(url)}`;\n\n    window.open(twitterUrl, \"_blank\", \"noopener,noreferrer\");\n  }, [url, xhandle, title, points, date, difficulty]);\n\n  return (\n    <Button\n      variant=\"tertiary\"\n      size=\"tall\"\n      className=\"grow\"\n      disabled={disabled}\n      onClick={handleShare}\n    >\n      <XIcon size=\"sm\" />\n    </Button>\n  );\n}\n\nexport default AchievementShare;\n"]}