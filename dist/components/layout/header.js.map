{"version":3,"file":"header.js","sourceRoot":"","sources":["../../../src/components/layout/header.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  ArrowIcon,\n  ControllerIcon,\n  GearIcon,\n  GiftIcon,\n  IconProps,\n  TimesIcon,\n} from \"@/components/icons\";\nimport { Network } from \"@/components/network\";\nimport { Button } from \"@/components/primitives/button\";\nimport { useUI } from \"@/hooks\";\nimport { ConnectionTooltip, Thumbnail } from \"@/index\";\nimport { cn, isIframe } from \"@/utils\";\nimport { useMemo } from \"react\";\nimport { StarryHeaderBackground } from \"./starry-header\";\nimport { useCSSCustomProperty } from \"@/hooks/theme\";\n\nexport type HeaderProps = HeaderInnerProps & {\n  onBack?: () => void;\n  onClose?: () => void;\n  hideUsername?: boolean;\n  hideNetwork?: boolean;\n  hideSettings?: boolean;\n  onOpenStarterPack?: () => void;\n  onFollowersClick?: () => void;\n  onFollowingsClick?: () => void;\n  onOpenSettings?: () => void;\n  onLogout?: () => void;\n};\n\nexport function LayoutHeader({\n  onBack,\n  onClose,\n  hideUsername,\n  hideNetwork,\n  hideSettings,\n  onOpenStarterPack,\n  onOpenSettings,\n  ...innerProps\n}: HeaderProps) {\n  const {\n    account,\n    chainId,\n    closeModal,\n    openSettings,\n    followers,\n    followings,\n    onFollowersClick,\n    onFollowingsClick,\n    onLogout,\n  } = useUI();\n\n  // Reactively watch for changes to the theme cover URL\n  const coverUrl = useCSSCustomProperty(\"--theme-cover-url\");\n\n  // Helper function to check if we should use StarryHeader\n  const shouldUseStarryHeader = useMemo(() => {\n    // Use StarryHeader if:\n    // 1. It's a cartridge theme, OR\n    // 2. No cover URL is set or it's empty\n    return coverUrl.includes(\"presets/cartridge/\") || !coverUrl;\n  }, [coverUrl]);\n\n  const shouldShowCloseButton = useMemo(() => {\n    return onClose || (closeModal && isIframe());\n  }, [onClose, closeModal]);\n\n  return (\n    <div className=\"sticky top-0 w-full z-10 bg-background\">\n      {(() => {\n        switch (innerProps.variant) {\n          case \"expanded\":\n            return (\n              <div className=\"flex flex-col w-full h-[176px]\">\n                {shouldUseStarryHeader ? (\n                  <StarryHeaderBackground className=\"w-full h-[136px] relative before:content-[''] before:absolute before:inset-0 before:bg-gradient-to-b before:from-transparent before:to-background before:pointer-events-none\" />\n                ) : (\n                  <div className=\"w-full h-[136px] bg-[image:var(--theme-cover-url)] bg-cover bg-center relative before:content-[''] before:absolute before:inset-0 before:bg-gradient-to-b before:from-transparent before:to-background before:pointer-events-none\" />\n                )}\n                <HeaderInner\n                  {...innerProps}\n                  className=\"absolute bottom-0 left-0 right-0\"\n                />\n              </div>\n            );\n          case \"compressed\":\n          default:\n            return (\n              <div className=\"flex flex-col bg-spacer-100 gap-y-px\">\n                {shouldUseStarryHeader ? (\n                  <StarryHeaderBackground\n                    className=\"w-full h-16 pb-6 relative before:content-[''] before:absolute before:inset-0 before:bg-gradient-to-b before:from-transparent before:to-background-100 before:pointer-events-none\"\n                    height={64}\n                  />\n                ) : (\n                  <div className=\"w-full bg-cover bg-center h-16 pb-6 bg-[linear-gradient(transparent,var(--background-100)),var(--theme-cover-url)]\" />\n                )}\n                <div className=\"bg-background-100\">\n                  <HeaderInner {...innerProps} />\n                </div>\n              </div>\n            );\n        }\n      })()}\n\n      <div className=\"flex items-center justify-between absolute top-0 left-0 right-0 h-16 p-3 z-50\">\n        {onBack ? (\n          <BackButton onClick={onBack} />\n        ) : shouldShowCloseButton ? (\n          <CloseButton\n            onClose={() => {\n              if (onClose) onClose();\n              if (closeModal) closeModal();\n            }}\n          />\n        ) : null}\n\n        <div className=\"flex items-center gap-2\">\n          {!!chainId &&\n            (account ? (\n              <>\n                {onOpenStarterPack && (\n                  <Button\n                    variant=\"secondary\"\n                    size=\"default\"\n                    className=\"gap-2\"\n                    onClick={onOpenStarterPack}\n                  >\n                    <GiftIcon size=\"default\" variant=\"line\" />\n                    <span>Get Starter Pack</span>\n                  </Button>\n                )}\n                <ConnectionTooltip\n                  username={account.username}\n                  address={account.address}\n                  chainId={chainId}\n                  followers={followers}\n                  followings={followings}\n                  hideNetwork={hideNetwork}\n                  hideUsername={hideUsername}\n                  onFollowersClick={onFollowersClick}\n                  onFollowingsClick={onFollowingsClick}\n                  onOpenSettings={\n                    onOpenSettings ? onOpenSettings : openSettings\n                  }\n                  onLogout={onLogout}\n                />\n              </>\n            ) : (\n              !hideNetwork && <Network chainId={chainId} />\n            ))}\n\n          {openSettings && !hideSettings && (\n            <SettingsButton onClick={openSettings} />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\ntype HeaderInnerProps = {\n  Icon?: React.ComponentType<IconProps>;\n  icon?: React.ReactElement;\n  title?: string | React.ReactElement;\n  description?: string | React.ReactElement;\n  variant?: HeaderVariant;\n  right?: React.ReactElement;\n  className?: string;\n  hideIcon?: boolean;\n};\n\ntype HeaderVariant = \"expanded\" | \"compressed\" | \"hidden\";\n\nexport function HeaderInner({\n  variant,\n  Icon,\n  icon,\n  title,\n  description,\n  right,\n  className,\n  hideIcon,\n}: HeaderInnerProps) {\n  if (variant === \"hidden\") return null;\n\n  return (\n    <div\n      className={cn(\"p-4 pb-0 flex items-center justify-between\", className)}\n    >\n      <div className=\"flex items-center flex-shrink min-w-0 gap-3\">\n        {!hideIcon && <HeaderIcon variant={variant} Icon={Icon} icon={icon} />}\n        <Headline variant={variant} title={title} description={description} />\n      </div>\n\n      {right}\n    </div>\n  );\n}\n\nexport function HeaderIcon({\n  variant,\n  Icon,\n  icon,\n}: Pick<HeaderInnerProps, \"variant\" | \"Icon\" | \"icon\">) {\n  // Reactively watch for changes to the theme icon URL\n  const iconUrl = useCSSCustomProperty(\"--theme-icon-url\");\n\n  return (\n    <IconWrapper variant={variant}>\n      {(() => {\n        if (Icon) {\n          return <Icon size=\"lg\" />;\n        }\n\n        if (icon) {\n          return icon;\n        }\n\n        if (iconUrl) {\n          // This will implicitly use the theme icon url CSS variable\n          return (\n            <Thumbnail\n              variant={variant === \"expanded\" ? \"dark\" : \"default\"}\n              size={variant === \"expanded\" ? \"xxl\" : \"lg\"}\n            />\n          );\n        }\n\n        return (\n          <Thumbnail\n            variant={variant === \"expanded\" ? \"dark\" : \"default\"}\n            size={variant === \"expanded\" ? \"xxl\" : \"lg\"}\n            icon={\n              <ControllerIcon size=\"xl\" className=\"fill-current text-primary\" />\n            }\n          />\n        );\n      })()}\n    </IconWrapper>\n  );\n}\n\nexport function IconWrapper({\n  variant,\n  children,\n}: {\n  variant?: HeaderVariant;\n  children: React.ReactNode;\n}) {\n  switch (variant) {\n    case \"expanded\":\n      return (\n        <div className=\"flex-shrink-0 rounded size-20 bg-background flex items-center justify-center\">\n          <div className=\"rounded bg-background-200 size-[calc(100%-8px)] flex items-center justify-center\">\n            {children}\n          </div>\n        </div>\n      );\n    default:\n    case \"compressed\":\n      return (\n        <div className=\"flex-shrink-0 rounded size-10 flex items-center justify-center bg-background-200\">\n          {children}\n        </div>\n      );\n  }\n}\n\nfunction Headline({\n  variant,\n  title,\n  description,\n}: Pick<HeaderInnerProps, \"variant\" | \"title\" | \"description\">) {\n  return (\n    <div\n      className={cn(\n        \"flex flex-col gap-0.5 justify-between\",\n        variant === \"expanded\" ? \"gap-1.5\" : \"gap-0.5\",\n      )}\n    >\n      <div className=\"text-lg/[22px] font-semibold line-clamp-1 text-ellipsis\">\n        {title}\n      </div>\n\n      {description && (\n        <div className={cn(\"text-foreground-300 break-words text-xs\")}>\n          {description}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction CloseButton({ onClose }: { onClose?: () => void }) {\n  return (\n    <Button variant=\"icon\" size=\"icon\" onClick={onClose}>\n      <TimesIcon />\n    </Button>\n  );\n}\n\nfunction BackButton({ onClick }: { onClick?: () => void }) {\n  return (\n    <Button variant=\"icon\" size=\"icon\" onClick={onClick}>\n      <ArrowIcon variant=\"left\" />\n    </Button>\n  );\n}\n\nfunction SettingsButton({ onClick }: { onClick?: () => void }) {\n  return (\n    <Button variant=\"icon\" size=\"icon\" onClick={onClick}>\n      <GearIcon />\n    </Button>\n  );\n}\n"]}